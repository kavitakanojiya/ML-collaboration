<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="utf-8"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<link href="https://machinelearningmastery.com/xmlrpc.php" rel="pingback"/>
<!--  Mobile viewport scale -->
<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=yes" name="viewport"/>
<!-- This site is optimized with the Yoast SEO plugin v9.2.1 - https://yoast.com/wordpress/plugins/seo/ -->
<title>How to Model Human Activity From Smartphone Data</title>
<link href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" rel="canonical"/>
<link href="https://plus.google.com/u/0/b/117073416089354242117/+MachinelearningmasteryHome/" rel="publisher"/>
<meta content="en_US" property="og:locale"/>
<meta content="article" property="og:type"/>
<meta content="How to Model Human Activity From Smartphone Data" property="og:title"/>
<meta content="Human activity recognition is the problem of classifying sequences of accelerometer data recorded by specialized harnesses or smart phones into known well-defined movements. It is a challenging problem given the large number of observations produced each second, the temporal nature of the observations, and the lack of a clear way to relate accelerometer data to …" property="og:description"/>
<meta content="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" property="og:url"/>
<meta content="Machine Learning Mastery" property="og:site_name"/>
<meta content="https://www.facebook.com/Machine-Learning-Mastery-1429846323896563/" property="article:publisher"/>
<meta content="https://www.facebook.com/jason.brownlee.39" property="article:author"/>
<meta content="Deep Learning for Time Series" property="article:section"/>
<meta content="2018-09-16T19:00:01+00:00" property="article:published_time"/>
<meta content="2018-08-30T00:31:54+00:00" property="article:modified_time"/>
<meta content="2018-08-30T00:31:54+00:00" property="og:updated_time"/>
<meta content="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-by-activity.png" property="og:image"/>
<meta content="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-by-activity.png" property="og:image:secure_url"/>
<meta content="1280" property="og:image:width"/>
<meta content="960" property="og:image:height"/>
<meta content="Histograms of the body gyroscope data by activity" property="og:image:alt"/>
<script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Organization","url":"https:\/\/machinelearningmastery.com\/","sameAs":["https:\/\/www.facebook.com\/Machine-Learning-Mastery-1429846323896563\/","https:\/\/www.linkedin.com\/in\/jasonbrownlee","https:\/\/plus.google.com\/u\/0\/b\/117073416089354242117\/+MachinelearningmasteryHome\/","https:\/\/twitter.com\/TeachTheMachine"],"@id":"https:\/\/machinelearningmastery.com\/#organization","name":"Machine Learning Mastery","logo":"https:\/\/machinelearningmastery.com\/wp-content\/uploads\/2016\/09\/cropped-icon.png"}</script>
<!-- / Yoast SEO plugin. -->
<link href="//s.w.org" rel="dns-prefetch"/>
<link href="https://feeds.feedburner.com/MachineLearningMastery" rel="alternate" title="Machine Learning Mastery » Feed" type="application/rss+xml"/>
<link href="https://machinelearningmastery.com/comments/feed/" rel="alternate" title="Machine Learning Mastery » Comments Feed" type="application/rss+xml"/>
<link href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/feed/" rel="alternate" title="Machine Learning Mastery » How to Model Human Activity From Smartphone Data Comments Feed" type="application/rss+xml"/>
<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/machinelearningmastery.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<style media="all" type="text/css">
.wpautoterms-footer{background-color:#ffffff;text-align:center;}
.wpautoterms-footer a{color:#000000;font-family:Arial, sans-serif;font-size:14px;}
.wpautoterms-footer .separator{color:#cccccc;font-family:Arial, sans-serif;font-size:14px;}</style>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta" id="crayon-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=_2.7.2_beta" id="crayon-theme-classic-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta" id="crayon-font-monaco-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/auto-terms-of-service-and-privacy-policy/css/wpautoterms.css?ver=4.9.8" id="wpautoterms_css-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.0.5" id="contact-form-7-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/simple-social-buttons/assets/css/front.css?ver=2.0.20" id="ssb-front-css-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/ultimate-faqs/css/ewd-ufaq-styles.css?ver=4.9.8" id="ewd-ufaq-style-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/ultimate-faqs/css/rrssb-min.css?ver=4.9.8" id="ewd-ufaq-rrssb-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/includes/integrations/testimonials/css/testimonials.css?ver=4.9.8" id="woo-testimonials-css-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/style.css?ver=5.9.21" id="theme-stylesheet-css" media="all" rel="stylesheet" type="text/css"/>
<!--[if lt IE 9]>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/css/non-responsive.css" rel="stylesheet" type="text/css" />
<style type="text/css">.col-full, #wrapper { width: 960px; max-width: 960px; } #inner-wrapper { padding: 0; } body.full-width #header, #nav-container, body.full-width #content, body.full-width #footer-widgets, body.full-width #footer { padding-left: 0; padding-right: 0; } body.fixed-mobile #top, body.fixed-mobile #header-container, body.fixed-mobile #footer-container, body.fixed-mobile #nav-container, body.fixed-mobile #footer-widgets-container { min-width: 960px; padding: 0 1em; } body.full-width #content { width: auto; padding: 0 1em;}</style>
<![endif]-->
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery.js?ver=1.12.4" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1" type="text/javascript"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/machinelearningmastery.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/simple-social-buttons/assets/js/front.js?ver=2.0.20" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/includes/js/third-party.min.js?ver=4.9.8" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/includes/js/modernizr.min.js?ver=2.6.2" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/includes/js/general.min.js?ver=4.9.8" type="text/javascript"></script>
<link href="https://machinelearningmastery.com/wp-json/" rel="https://api.w.org/"/>
<link href="https://machinelearningmastery.com/xmlrpc.php?rsd" rel="EditURI" title="RSD" type="application/rsd+xml"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml"/>
<link href="https://machinelearningmastery.com/?p=6164" rel="shortlink"/>
<link href="https://machinelearningmastery.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fmachinelearningmastery.com%2Fhow-to-model-human-activity-from-smartphone-data%2F" rel="alternate" type="application/json+oembed"/>
<link href="https://machinelearningmastery.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fmachinelearningmastery.com%2Fhow-to-model-human-activity-from-smartphone-data%2F&amp;format=xml" rel="alternate" type="text/xml+oembed"/>
<!-- Start Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44039733-3', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->
<style media="screen">

        .simplesocialbuttons.simplesocialbuttons_inline .ssb-fb-like {
      margin: ;
    }
         /*inline margin*/
    
  
  
  
  
  
          .simplesocialbuttons.simplesocialbuttons_inline.simplesocial-simple-icons button{
         margin: ;
     }

          /*margin-digbar*/

  
  
  
  
 
   
   

</style>
<script type="text/javascript">
        var ajaxurl = 'https://machinelearningmastery.com/wp-admin/admin-ajax.php';
    </script>
<!-- Custom CSS Styling -->
<style type="text/css">
#logo .site-title, #logo .site-description { display:none; }
body {background-repeat:no-repeat;background-position:top left;background-attachment:scroll;border-top:0px solid #000000;}
#header {background-repeat:no-repeat;background-position:left top;margin-top:0px;margin-bottom:0px;padding-top:10px;padding-bottom:10px;border:0px solid ;}
#logo .site-title a {font:bold 40px/1em "Helvetica Neue", Helvetica, sans-serif;color:#222222;}
#logo .site-description {font:normal 13px/1em "Helvetica Neue", Helvetica, sans-serif;color:#999999;}
body, p { font:normal 14px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555; }
h1 { font:bold 28px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h2 { font:bold 24px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h3 { font:bold 20px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h4 { font:bold 16px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h5 { font:bold 14px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h6 { font:bold 12px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }
.page-title, .post .title, .page .title {font:bold 28px/1.1em "Helvetica Neue", Helvetica, sans-serif;color:#222222;}
.post .title a:link, .post .title a:visited, .page .title a:link, .page .title a:visited {color:#222222}
.post-meta { font:normal 12px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#999999; }
.entry, .entry p{ font:normal 15px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555; }
.post-more {font:normal 13px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:;border-top:0px solid #e6e6e6;border-bottom:0px solid #e6e6e6;}
#post-author, #connect {border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;border-left:1px solid #e6e6e6;border-right:1px solid #e6e6e6;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#fafafa}
.nav-entries a, .woo-pagination { font:normal 13px/1em "Helvetica Neue", Helvetica, sans-serif;color:#888; }
.woo-pagination a, .woo-pagination a:hover {color:#888!important}
.widget h3 {font:bold 14px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#555555;border-bottom:1px solid #e6e6e6;}
.widget_recent_comments li, #twitter li { border-color: #e6e6e6;}
.widget p, .widget .textwidget { font:normal 13px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555; }
.widget {font:normal 13px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555;border-radius:0px;-moz-border-radius:0px;-webkit-border-radius:0px;}
#tabs .inside li a, .widget_woodojo_tabs .tabbable .tab-pane li a { font:bold 12px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555; }
#tabs .inside li span.meta, .widget_woodojo_tabs .tabbable .tab-pane li span.meta { font:300 11px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#999999; }
#tabs ul.wooTabs li a, .widget_woodojo_tabs .tabbable .nav-tabs li a { font:300 11px/2em "Helvetica Neue", Helvetica, sans-serif;color:#999999; }
@media only screen and (min-width:768px) {
ul.nav li a, #navigation ul.rss a, #navigation ul.cart a.cart-contents, #navigation .cart-contents #navigation ul.rss, #navigation ul.nav-search, #navigation ul.nav-search a { font:bold 18px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#4c89bf; } #navigation ul.rss li a:before, #navigation ul.nav-search a.search-contents:before { color:#4c89bf;}
#navigation ul.nav > li a:hover, #navigation ul.nav > li:hover a, #navigation ul.nav li ul li a, #navigation ul.cart > li:hover > a, #navigation ul.cart > li > ul > div, #navigation ul.cart > li > ul > div p, #navigation ul.cart > li > ul span, #navigation ul.cart .cart_list a, #navigation ul.nav li.current_page_item a, #navigation ul.nav li.current_page_parent a, #navigation ul.nav li.current-menu-ancestor a, #navigation ul.nav li.current-cat a, #navigation ul.nav li.current-menu-item a { color:#4c89bf!important; }
#navigation ul.nav > li a:hover, #navigation ul.nav > li:hover, #navigation ul.nav li ul, #navigation ul.cart li:hover a.cart-contents, #navigation ul.nav-search li:hover a.search-contents, #navigation ul.nav-search a.search-contents + ul, #navigation ul.cart a.cart-contents + ul, #navigation ul.nav li.current_page_item a, #navigation ul.nav li.current_page_parent a, #navigation ul.nav li.current-menu-ancestor a, #navigation ul.nav li.current-cat a, #navigation ul.nav li.current-menu-item a{background-color:#ffffff!important}
#navigation ul.nav li ul, #navigation ul.cart > li > ul > div  { border: 0px solid #dbdbdb; }
#navigation ul.nav > li:hover > ul  { left: 0; }
#navigation ul.nav > li  { border-right: 0px solid #dbdbdb; }#navigation ul.nav > li:hover > ul  { left: 0; }
#navigation { box-shadow: none; -moz-box-shadow: none; -webkit-box-shadow: none; }#navigation ul li:first-child, #navigation ul li:first-child a { border-radius:0px 0 0 0px; -moz-border-radius:0px 0 0 0px; -webkit-border-radius:0px 0 0 0px; }
#navigation {background:#ffffff;border-top:0px solid #dbdbdb;border-bottom:0px solid #dbdbdb;border-left:0px solid #dbdbdb;border-right:0px solid #dbdbdb;border-radius:0px; -moz-border-radius:0px; -webkit-border-radius:0px;}
#top ul.nav li a { font:normal 12px/1.6em "Helvetica Neue", Helvetica, sans-serif;color:#ddd; }
}
#footer, #footer p { font:normal 13px/1.4em "Helvetica Neue", Helvetica, sans-serif;color:#999999; }
#footer {border-top:1px solid #dbdbdb;border-bottom:0px solid ;border-left:0px solid ;border-right:0px solid ;border-radius:0px; -moz-border-radius:0px; -webkit-border-radius:0px;}
.magazine #loopedSlider .content h2.title a { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
.wooslider-theme-magazine .slide-title a { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
.magazine #loopedSlider .content .excerpt p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.wooslider-theme-magazine .slide-content p, .wooslider-theme-magazine .slide-excerpt p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.magazine .block .post .title a {font:bold 18px/1.2em Helvetica Neue, Helvetica, sans-serif;color:#222222; }
#loopedSlider.business-slider .content h2 { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
#loopedSlider.business-slider .content h2.title a { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
.wooslider-theme-business .has-featured-image .slide-title { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
.wooslider-theme-business .has-featured-image .slide-title a { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
#wrapper #loopedSlider.business-slider .content p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.wooslider-theme-business .has-featured-image .slide-content p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.wooslider-theme-business .has-featured-image .slide-excerpt p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.archive_header { font:bold 18px/1em Arial, sans-serif;color:#222222; }
.archive_header {border-bottom:1px solid #e6e6e6;}
.archive_header .catrss { display:none; }
</style>
<!-- Woo Shortcodes CSS -->
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/functions/css/shortcodes.css" rel="stylesheet" type="text/css"/>
<!-- Custom Stylesheet -->
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/custom.css" rel="stylesheet" type="text/css"/>
<!-- Theme version -->
<meta content="Canvas 5.9.21" name="generator"/>
<meta content="WooFramework 6.2.9" name="generator"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2016/09/cropped-icon-32x32.png" rel="icon" sizes="32x32"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2016/09/cropped-icon-192x192.png" rel="icon" sizes="192x192"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2016/09/cropped-icon-180x180.png" rel="apple-touch-icon-precomposed"/>
<meta content="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2016/09/cropped-icon-270x270.png" name="msapplication-TileImage"/>
</head>
<body class="post-template-default single single-post postid-6164 single-format-standard safari alt-style-default two-col-left width-960 two-col-left-960">
<div id="wrapper">
<div id="inner-wrapper">
<h3 class="nav-toggle icon"><a href="#navigation">Navigation</a></h3>
<header class="col-full" id="header">
<div id="logo">
<a href="https://machinelearningmastery.com/" title="Making developers awesome at machine learning"><img alt="Machine Learning Mastery" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/icon-100x100.png"/></a>
<span class="site-title"><a href="https://machinelearningmastery.com/">Machine Learning Mastery</a></span>
<span class="site-description">Making developers awesome at machine learning</span>
</div>
<div class="header-widget">
<div class="widget widget_text" id="text-53"> <div class="textwidget"><p>Want help with deep learning for time series? <a href="https://machinelearningmastery.lpages.co/deep-learning-for-time-series-forecasting-mini-course/">Take the FREE Mini-Course</a></p>
</div>
</div><div class="widget widget_search" id="search-3"><div class="search_main">
<form action="https://machinelearningmastery.com/" class="searchform" method="get">
<input class="field s" name="s" onblur="if (this.value == '') {this.value = 'Search...';}" onfocus="if (this.value == 'Search...') {this.value = '';}" type="text" value="Search..."/>
<input name="post_type" type="hidden" value="post"/>
<button class="fa fa-search submit" name="submit" type="submit" value="Search"></button>
</form>
<div class="fix"></div>
</div></div> </div>
</header>
<nav class="col-full" id="navigation" role="navigation">
<section class="menus">
<a class="nav-home" href="https://machinelearningmastery.com"><span>Home</span></a>
<h3>Main Menu</h3><ul class="nav fl" id="main-nav"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6503" id="menu-item-6503"><a href="https://machinelearningmastery.com/start-here/">Start Here</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-6501" id="menu-item-6501"><a href="https://machinelearningmastery.com/blog/">Blog</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-6506" id="menu-item-6506"><a href="#">Topics</a>
<ul class="sub-menu">
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6508" id="menu-item-6508"><a href="https://machinelearningmastery.com/category/deep-learning/">Deep Learning (Keras)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6511" id="menu-item-6511"><a href="https://machinelearningmastery.com/category/lstm/">LSTMs</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-6509" id="menu-item-6509"><a href="https://machinelearningmastery.com/category/deep-learning-time-series/">Deep Learning for Time Series</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6515" id="menu-item-6515"><a href="https://machinelearningmastery.com/category/natural-language-processing/">Deep Learning for NLP</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6512" id="menu-item-6512"><a href="https://machinelearningmastery.com/category/machine-learning-algorithms/">Understand Algorithms</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6507" id="menu-item-6507"><a href="https://machinelearningmastery.com/category/algorithms-from-scratch/">Code Algorithms (Python)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6513" id="menu-item-6513"><a href="https://machinelearningmastery.com/category/machine-learning-process/">Machine Learning Process</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6516" id="menu-item-6516"><a href="https://machinelearningmastery.com/category/python-machine-learning/">Python (scikit-learn)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6517" id="menu-item-6517"><a href="https://machinelearningmastery.com/category/r-machine-learning/">R (caret)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6522" id="menu-item-6522"><a href="https://machinelearningmastery.com/category/weka-machine-learning/">Weka (no code)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6518" id="menu-item-6518"><a href="https://machinelearningmastery.com/category/start-machine-learning/">Getting Started</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6510" id="menu-item-6510"><a href="https://machinelearningmastery.com/category/linear-algebra/">Linear Algebra</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6519" id="menu-item-6519"><a href="https://machinelearningmastery.com/category/statistical-methods/">Statistical Methods</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6520" id="menu-item-6520"><a href="https://machinelearningmastery.com/category/time-series/">Time Series (introductory)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6523" id="menu-item-6523"><a href="https://machinelearningmastery.com/category/xgboost/">XGBoost</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6514" id="menu-item-6514"><a href="https://machinelearningmastery.com/category/machine-learning-resources/">Resources</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6502" id="menu-item-6502"><a href="https://machinelearningmastery.com/products/">Ebooks</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6500" id="menu-item-6500"><a href="https://machinelearningmastery.com/faq/">FAQ</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6504" id="menu-item-6504"><a href="https://machinelearningmastery.com/about/">About</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6505" id="menu-item-6505"><a href="https://machinelearningmastery.com/contact/">Contact</a></li>
</ul> <div class="side-nav">
</div><!-- /#side-nav -->
</section><!-- /.menus -->
<a class="nav-close" href="#top"><span>Return to Content</span></a>
</nav>
<!-- #content Starts -->
<div class="col-full" id="content">
<div id="main-sidebar-container">
<!-- #main Starts -->
<section id="main">
<article class="post-6164 post type-post status-publish format-standard has-post-thumbnail hentry category-deep-learning-time-series">
<header>
<h1 class="title entry-title">How to Model Human Activity From Smartphone Data</h1> </header>
<div class="post-meta"><span class="small">By</span> <span class="author vcard"><span class="fn"><a href="https://machinelearningmastery.com/author/jasonb/" rel="author" title="Posts by Jason Brownlee">Jason Brownlee</a></span></span> <span class="small">on</span> <abbr class="date time published updated" title="2018-09-17T05:00:01+1100">September 17, 2018</abbr> <span class="small">in</span> <span class="categories"><a href="https://machinelearningmastery.com/category/deep-learning-time-series/" title="View all items in Deep Learning for Time Series">Deep Learning for Time Series</a></span> </div>
<section class="entry">
<div class="simplesocialbuttons simplesocial-simple-icons simplesocialbuttons_inline simplesocialbuttons-align-left post-6164 post simplesocialbuttons-inline-no-animation">
<button class="ssb_tweet-icon" data-href="https://twitter.com/share?text=How+to+Model+Human+Activity+From+Smartphone+Data&amp;url=https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" rel="nofollow">
<span class="icon"><svg viewbox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h72v72H0z" fill="none"></path><path class="icon" d="M68.812 15.14c-2.348 1.04-4.87 1.744-7.52 2.06 2.704-1.62 4.78-4.186 5.757-7.243-2.53 1.5-5.33 2.592-8.314 3.176C56.35 10.59 52.948 9 49.182 9c-7.23 0-13.092 5.86-13.092 13.093 0 1.026.118 2.02.338 2.98C25.543 24.527 15.9 19.318 9.44 11.396c-1.125 1.936-1.77 4.184-1.77 6.58 0 4.543 2.312 8.552 5.824 10.9-2.146-.07-4.165-.658-5.93-1.64-.002.056-.002.11-.002.163 0 6.345 4.513 11.638 10.504 12.84-1.1.298-2.256.457-3.45.457-.845 0-1.666-.078-2.464-.23 1.667 5.2 6.5 8.985 12.23 9.09-4.482 3.51-10.13 5.605-16.26 5.605-1.055 0-2.096-.06-3.122-.184 5.794 3.717 12.676 5.882 20.067 5.882 24.083 0 37.25-19.95 37.25-37.25 0-.565-.013-1.133-.038-1.693 2.558-1.847 4.778-4.15 6.532-6.774z" fill="#fff"></path></svg></span><i class="simplesocialtxt">Tweet </i></button>
<button class="ssb_fbshare-icon" data-href="https://www.facebook.com/sharer/sharer.php?u=https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" target="_blank">
<span class="icon"><svg class="_1pbq" color="#ffffff" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path class="icon" d="M8 14H3.667C2.733 13.9 2 13.167 2 12.233V3.667A1.65 1.65 0 0 1 3.667 2h8.666A1.65 1.65 0 0 1 14 3.667v8.566c0 .934-.733 1.667-1.667 1.767H10v-3.967h1.3l.7-2.066h-2V6.933c0-.466.167-.9.867-.9H12v-1.8c.033 0-.933-.266-1.533-.266-1.267 0-2.434.7-2.467 2.133v1.867H6v2.066h2V14z" fill="#ffffff" fill-rule="evenodd"></path></svg></span>
<span class="simplesocialtxt">Share </span> </button>
<button class="ssb_linkedin-icon" data-href="https://www.linkedin.com/cws/share?url=https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
<span class="icon"> <svg enable-background="new -301.4 387.5 15 14.1" height="14.1px" id="Layer_1" version="1.1" viewbox="-301.4 387.5 15 14.1" width="15px" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"> <g id="XMLID_398_"> <path d="M-296.2,401.6c0-3.2,0-6.3,0-9.5h0.1c1,0,2,0,2.9,0c0.1,0,0.1,0,0.1,0.1c0,0.4,0,0.8,0,1.2 c0.1-0.1,0.2-0.3,0.3-0.4c0.5-0.7,1.2-1,2.1-1.1c0.8-0.1,1.5,0,2.2,0.3c0.7,0.4,1.2,0.8,1.5,1.4c0.4,0.8,0.6,1.7,0.6,2.5 c0,1.8,0,3.6,0,5.4v0.1c-1.1,0-2.1,0-3.2,0c0-0.1,0-0.1,0-0.2c0-1.6,0-3.2,0-4.8c0-0.4,0-0.8-0.2-1.2c-0.2-0.7-0.8-1-1.6-1 c-0.8,0.1-1.3,0.5-1.6,1.2c-0.1,0.2-0.1,0.5-0.1,0.8c0,1.7,0,3.4,0,5.1c0,0.2,0,0.2-0.2,0.2c-1,0-1.9,0-2.9,0 C-296.1,401.6-296.2,401.6-296.2,401.6z" fill="#FFFFFF" id="XMLID_399_"></path> <path d="M-298,401.6L-298,401.6c-1.1,0-2.1,0-3,0c-0.1,0-0.1,0-0.1-0.1c0-3.1,0-6.1,0-9.2 c0-0.1,0-0.1,0.1-0.1c1,0,2,0,2.9,0h0.1C-298,395.3-298,398.5-298,401.6z" fill="#FFFFFF" id="XMLID_400_"></path> <path d="M-299.6,390.9c-0.7-0.1-1.2-0.3-1.6-0.8c-0.5-0.8-0.2-2.1,1-2.4c0.6-0.2,1.2-0.1,1.8,0.2 c0.5,0.4,0.7,0.9,0.6,1.5c-0.1,0.7-0.5,1.1-1.1,1.3C-299.1,390.8-299.4,390.8-299.6,390.9L-299.6,390.9z" fill="#FFFFFF" id="XMLID_401_"></path> </g> </svg> </span>
<span class="simplesocialtxt">Share</span> </button>
<button class="ssb_gplus-icon" data-href="https://plus.google.com/share?url=https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
<span class="icon"><svg class="ozWidgetRioButtonSvg_ ozWidgetRioButtonPlusOne_" height="18px" preserveaspectratio="xMidYMid meet" version="1.1" viewbox="-10 -6 60 36" width="30px" xmlns="http://www.w3.org/2000/svg"><path d="M30 7h-3v4h-4v3h4v4h3v-4h4v-3h-4V7z"></path><path d="M11 9.9v4h5.4C16 16.3 14 18 11 18c-3.3 0-5.9-2.8-5.9-6S7.7 6 11 6c1.5 0 2.8.5 3.8 1.5l2.9-2.9C15.9 3 13.7 2 11 2 5.5 2 1 6.5 1 12s4.5 10 10 10c5.8 0 9.6-4.1 9.6-9.8 0-.7-.1-1.5-.2-2.2H11z"></path></svg></span>
<span class="simplesocialtxt">Google Plus </span></button>
</div>
<p>Human activity recognition is the problem of classifying sequences of accelerometer data recorded by specialized harnesses or smart phones into known well-defined movements.</p>
<p>It is a challenging problem given the large number of observations produced each second, the temporal nature of the observations, and the lack of a clear way to relate accelerometer data to known movements.</p>
<p>Classical approaches to the problem involve hand crafting features from the time series data based on fixed-sized windows and training machine learning models, such as ensembles of decision trees. The difficulty is that this feature engineering requires deep expertise in the field.</p>
<p>Recently, deep learning methods such as recurrent neural networks and one-dimensional convolutional neural networks, or CNNs, have been shown to provide state-of-the-art results on challenging activity recognition tasks with little or no data feature engineering.</p>
<p>In this tutorial, you will discover the ‘<em>Activity Recognition Using Smartphones</em>‘ dataset for time series classification and how to load and explore the dataset in order to make it ready for predictive modeling.</p>
<p>After completing this tutorial, you will know:</p>
<ul>
<li>How to download and load the dataset into memory.</li>
<li>How to use line plots, histograms, and boxplots to better understand the structure of the motion data.</li>
<li>How to model the problem, including framing, data preparation, modeling, and evaluation.</li>
</ul>
<p>Let’s get started.</p>
<div class="wp-caption aligncenter" id="attachment_6182" style="width: 650px"><img alt="How to Model Human Activity From Smartphone Data" class="size-full wp-image-6182" height="419" sizes="(max-width: 640px) 100vw, 640px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/How-to-Model-Human-Activity-From-Smartphone-Data.jpg" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/How-to-Model-Human-Activity-From-Smartphone-Data.jpg 640w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/How-to-Model-Human-Activity-From-Smartphone-Data-300x196.jpg 300w" width="640"/><p class="wp-caption-text">How to Model Human Activity From Smartphone Data<br/>Photo by <a href="https://www.flickr.com/photos/corker888/23930933844/">photographer</a>, some rights reserved.</p></div>
<h2>Tutorial Overview</h2>
<p>This tutorial is divided into 10 parts; they are:</p>
<ol>
<li>Human Activity Recognition</li>
<li>Activity Recognition Using Smartphones Dataset</li>
<li>Download the Dataset</li>
<li>Load Data</li>
<li>Balance of Activity Classes</li>
<li>Plot Time Series Data for One Subject</li>
<li>Plot Histograms Per Subject</li>
<li>Plot Histograms Per Activity</li>
<li>Plot Activity Duration Boxplots</li>
<li>Approach to Modeling</li>
</ol>
<h2>1. Human Activity Recognition</h2>
<p><a href="https://en.wikipedia.org/wiki/Activity_recognition">Human Activity Recognition</a>, or HAR for short, is the problem of predicting what a person is doing based on a trace of their movement using sensors.</p>
<p>Movements are often normal indoor activities such as standing, sitting, jumping, and going up stairs.</p>
<p>Sensors are often located on the subject, such as a smartphone or vest, and often record accelerometer data in three dimensions (x, y, z).</p>
<blockquote><p>Human Activity Recognition (HAR) aims to identify the actions carried out by a person given a set of observations of him/herself and the surrounding environment. Recognition can be accomplished by exploiting the information retrieved from various sources such as environmental or body-worn sensors.</p></blockquote>
<p>— <a href="https://upcommons.upc.edu/handle/2117/20897">A Public Domain Dataset for Human Activity Recognition Using Smartphones</a>, 2013.</p>
<p>The idea is that once the subject’s activity is recognized and known, an intelligent computer system can then offer assistance.</p>
<p>It is a challenging problem because there is no clear analytical way to relate the sensor data to specific actions in a general way. It is technically challenging because of the large volume of sensor data collected (e.g. tens or hundreds of observations per second) and the classical use of hand crafted features and heuristics from this data in developing predictive models.</p>
<p>More recently, deep learning methods have been demonstrated successfully on HAR problems given their ability to automatically learn higher-order features.</p>
<blockquote><p>Sensor-based activity recognition seeks the profound high-level knowledge about human activities from multitudes of low-level sensor readings. Conventional pattern recognition approaches have made tremendous progress in the past years. However, those methods often heavily rely on heuristic hand-crafted feature extraction, which could hinder their generalization performance. […] Recently, the recent advancement of deep learning makes it possible to perform automatic high-level feature extraction thus achieves promising performance in many areas.</p></blockquote>
<p>— <a href="https://arxiv.org/abs/1707.03502">Deep Learning for Sensor-based Activity Recognition: A Survey</a></p>
<p></p><div class="woo-sc-hr"></div>
<center>
<h3>Need help with Deep Learning for Time Series?</h3>
<p>Take my free 7-day email crash course now (with sample code).</p>
<p>Click to sign-up and also get a free PDF Ebook version of the course.</p>
<p><a href="https://machinelearningmastery.lpages.co/leadbox/14531ee73f72a2%3A164f8be4f346dc/5630742793027584/" style="background: rgb(255, 206, 10); color: rgb(255, 255, 255); text-decoration: none; font-family: Helvetica, Arial, sans-serif; font-weight: bold; font-size: 16px; line-height: 20px; padding: 10px; display: inline-block; max-width: 300px; border-radius: 5px; text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 1px; box-shadow: rgba(255, 255, 255, 0.5) 0px 1px 3px inset, rgba(0, 0, 0, 0.5) 0px 1px 3px;" target="_blank">Download Your FREE Mini-Course</a><script data-config="%7B%7D" data-leadbox="14531ee73f72a2:164f8be4f346dc" data-url="https://machinelearningmastery.lpages.co/leadbox/14531ee73f72a2%3A164f8be4f346dc/5630742793027584/" src="https://machinelearningmastery.lpages.co/leadbox-1534880695.js" type="text/javascript"></script></p>
</center>
<p></p><div class="woo-sc-hr"></div>
<h2>2. Activity Recognition Using Smartphones Dataset</h2>
<p>A standard human activity recognition dataset is the ‘<em>Activity Recognition Using Smartphones</em>‘ dataset made available in 2012.</p>
<p>It was prepared and made available by Davide Anguita, et al. from the University of Genova, Italy and is described in full in their 2013 paper “<a href="https://upcommons.upc.edu/handle/2117/20897">A Public Domain Dataset for Human Activity Recognition Using Smartphones</a>.” The dataset was modeled with machine learning algorithms in their 2012 paper titled “<a href="https://link.springer.com/chapter/10.1007/978-3-642-35395-6_30">Human Activity Recognition on Smartphones using a Multiclass Hardware-Friendly Support Vector Machine</a>.”</p>
<p>The dataset was made available and can be downloaded for free from the UCI Machine Learning Repository:</p>
<ul>
<li><a href="https://archive.ics.uci.edu/ml/datasets/human+activity+recognition+using+smartphones">Human Activity Recognition Using Smartphones Data Set</a></li>
</ul>
<p>The data was collected from 30 subjects aged between 19 and 48 years old performing one of 6 standard activities while wearing a waist-mounted smartphone that recorded the movement data. Video was recorded of each subject performing the activities and the movement data was labeled manually from these videos.</p>
<p>Below is an example video of a subject performing the activities while their movement data is being recorded.</p>
<p><iframe allow="autoplay; encrypted-media" allowfullscreen="" frameborder="0" height="375" src="https://www.youtube.com/embed/XOEN9W05_4A?feature=oembed" width="500"></iframe></p>
<p>The six activities performed were as follows:</p>
<ol>
<li>Walking</li>
<li>Walking Upstairs</li>
<li>Walking Downstairs</li>
<li>Sitting</li>
<li>Standing</li>
<li>Laying</li>
</ol>
<p>The movement data recorded was the x, y, and z accelerometer data (linear acceleration) and gyroscopic data (angular velocity) from the smart phone, specifically a <a href="https://en.wikipedia.org/wiki/Samsung_Galaxy_S_II">Samsung Galaxy S II</a>.</p>
<p>Observations were recorded at 50 Hz (i.e. 50 data points per second). Each subject performed the sequence of activities twice, once with the device on their left-hand-side and once with the device on their right-hand side.</p>
<blockquote><p>A group of 30 volunteers with ages ranging from 19 to 48 years were selected for this task. Each person was instructed to follow a protocol of activities while wearing a waist-mounted Samsung Galaxy S II smartphone. The six selected ADL were standing, sitting, laying down, walking, walking downstairs and upstairs. Each subject performed the protocol twice: on the first trial the smartphone was fixed on the left side of the belt and on the second it was placed by the user himself as preferred</p></blockquote>
<p>— <a href="https://upcommons.upc.edu/handle/2117/20897">A Public Domain Dataset for Human Activity Recognition Using Smartphone</a>s, 2013.</p>
<p>The raw data is not available. Instead, a pre-processed version of the dataset was made available.</p>
<p>The pre-processing steps included:</p>
<ul>
<li>Pre-processing accelerometer and gyroscope using noise filters.</li>
<li>Splitting data into fixed windows of 2.56 seconds (128 data points) with 50% overlap.</li>
<li>Splitting of accelerometer data into gravitational (total) and body motion components.</li>
</ul>
<blockquote><p>These signals were preprocessed for noise reduction with a median filter and a 3rd order low-pass Butterworth filter with a 20 Hz cutoff frequency. […] The acceleration signal, which has gravitational and body motion components, was separated using another Butterworth low-pass filter into body acceleration and gravity.</p></blockquote>
<p>— <a href="https://upcommons.upc.edu/handle/2117/20897">A Public Domain Dataset for Human Activity Recognition Using Smartphones</a>, 2013.</p>
<p>Feature engineering was applied to the window data, and a copy of the data with these engineered features was made available.</p>
<p>A number of time and frequency features commonly used in the field of human activity recognition were extracted from each window. The result was a 561 element vector of features.</p>
<p>The dataset was split into train (70%) and test (30%) sets based on data for subjects, e.g. 21 subjects for train and nine for test.</p>
<p>This suggests a framing of the problem where a sequence of movement activity is used as input to predict the portion (2.56 seconds) of the current activity being performed, where a model trained on known subjects is used to predict the activity from movement on new subjects.</p>
<p>Early experiment results with a support vector machine intended for use on a smartphone (e.g. fixed-point arithmetic) resulted in a predictive accuracy of 89% on the test dataset, achieving similar results as an unmodified SVM implementation.</p>
<blockquote><p>This method adapts the standard Support Vector Machine (SVM) and exploits fixed-point arithmetic for computational cost reduction. A comparison with the traditional SVM shows a significant improvement in terms of computational costs while maintaining similar accuracy […]</p></blockquote>
<p>— <a href="https://link.springer.com/chapter/10.1007/978-3-642-35395-6_30">Human Activity Recognition on Smartphones using a Multiclass Hardware-Friendly Support Vector Machine</a>, 2012.</p>
<p>Now that we are familiar with the prediction problem, we will look at loading and exploring this dataset.</p>
<h2>3. Download the Dataset</h2>
<p>The dataset is freely available and can be downloaded from the UCI Machine Learning repository.</p>
<p>The data is provided as a single zip file that is about 58 megabytes in size. The direct link for this download is below:</p>
<ul>
<li><a href="https://archive.ics.uci.edu/ml/machine-learning-databases/00240/UCI%20HAR%20Dataset.zip">UCI HAR Dataset.zip</a></li>
</ul>
<p>Download the dataset and unzip all files into a new directory in your current working directory named “<em>HARDataset</em>“.</p>
<p>Inspecting the decompressed contents, you will notice a few things:</p>
<ul>
<li>There are “<em>train</em>” and “<em>test</em>” folders containing the split portions of the data for modeling (e.g. 70%/30%).</li>
<li>There is a “<em>README.txt</em>” file that contains a detailed technical description of the dataset and the contents of the unzipped files.</li>
<li>There is a “<em>features.txt</em>” file that contains a technical description of the engineered features.</li>
</ul>
<p>The contents of the “<em>train</em>” and “<em>test</em>” folders are similar (e.g. folders and file names), although with differences in the specific data they contain.</p>
<p>Inspecting the “train” folder shows a few important elements:</p>
<ul>
<li>An “<em>Inertial Signals</em>” folder that contains the preprocessed data.</li>
<li>The “<em>X_train.txt</em>” file that contains the engineered features intended for fitting a model.</li>
<li>The “<em>y_train.txt</em>” that contains the class labels for each observation (1-6).</li>
<li>The “<em>subject_train.txt</em>” file that contains a mapping of each line in the data files with their subject identifier (1-30).</li>
</ul>
<p>The number of lines in each file match, indicating that one row is one record in each data file.</p>
<p>The “<em>Inertial Signals</em>” directory contains 9 files.</p>
<ul>
<li><em>Gravitational acceleration</em> data files for x, y and z axes: <em>total_acc_x_train.txt</em>, <em>total_acc_y_train.txt</em>, <em>total_acc_z_train.txt</em>.</li>
<li><em>Body acceleration</em> data files for x, y and z axes: <em>body_acc_x_train.txt</em>, <em>body_acc_y_train.txt</em>, body_acc_z_train.txt.</li>
<li><em>Body gyroscope</em> data files for x, y and z axes: <em>body_gyro_x_train.txt</em>, <em>body_gyro_y_train.txt</em>, <em>body_gyro_z_train.txt</em>.</li>
</ul>
<p>The structure is mirrored in the “<em>test</em>” directory.</p>
<p>We will focus our attention on the data in the “<em>Inertial Signals</em>” as this is most interesting in developing machine learning models that can learn a suitable representation, instead of using the domain-specific feature engineering.</p>
<p>Inspecting a datafile shows that columns are separated by whitespace and values appear to be scaled to the range -1, 1. This scaling can be confirmed by a note in the <em>README.txt</em> file provided with the dataset.</p>
<p>Now that we know what data we have, we can figure out how to load it into memory.</p>
<h2>4. Load Data</h2>
<p>In this section, we will develop some code to load the dataset into memory.</p>
<p>First, we need to load a single file.</p>
<p>We can use the <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">read_csv() Pandas function</a> to load a single data file and specify that the file has no header and to separate columns using white space.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0abb277785296" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
dataframe = read_csv(filepath, header=None, delim_whitespace=True)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0abb277785296-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0abb277785296-1"><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>We can wrap this in a function named <em>load_file()</em>. The complete example of this function is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ac8881175279" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load dataset
from pandas import read_csv

# load a single file as a numpy array
def load_file(filepath):
	dataframe = read_csv(filepath, header=None, delim_whitespace=True)
	return dataframe.values

data = load_file('HARDataset/train/Inertial Signals/total_acc_y_train.txt')
print(data.shape)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ac8881175279-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ac8881175279-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0ac8881175279-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ac8881175279-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0ac8881175279-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ac8881175279-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0ac8881175279-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ac8881175279-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0ac8881175279-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ac8881175279-10">10</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ac8881175279-1"><span class="crayon-p"># load dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ac8881175279-2"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-v">read_csv</span></div><div class="crayon-line" id="crayon-5c0ca682c0ac8881175279-3"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ac8881175279-4"><span class="crayon-p"># load a single file as a numpy array</span></div><div class="crayon-line" id="crayon-5c0ca682c0ac8881175279-5"><span class="crayon-e">def </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ac8881175279-6"><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ac8881175279-7"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ac8881175279-8"> </div><div class="crayon-line" id="crayon-5c0ca682c0ac8881175279-9"><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/train/Inertial Signals/total_acc_y_train.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ac8881175279-10"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>Running the example loads the file ‘<em>total_acc_y_train.txt</em>‘, returns a NumPy array, and prints the shape of the array.</p>
<p>We can see that the training data is comprised of 7,352 rows or windows of data, where each window has 128 observations.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0aca656200601" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
(7352, 128)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0aca656200601-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0aca656200601-1">(7352, 128)</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>Next, it would be useful to load a group of files, such as all of the body acceleration data files as a single group.</p>
<p>Ideally, when working with multivariate time series data, it is useful to have the data structured in the format:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0acb646525744" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
[samples, timesteps, features]</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0acb646525744-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0acb646525744-1">[samples, timesteps, features]</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>This is helpful for analysis and is the expectation of deep learning models such as convolutional neural networks and recurrent neural networks.</p>
<p>We can achieve this by calling the above <em>load_file()</em> function multiple times, once for each file in a group.</p>
<p>Once we have loaded each file as a NumPy array, we can combine or stack all three arrays together. We can use the <a href="https://www.numpy.org/devdocs/reference/generated/numpy.dstack.html">dstack() NumPy function</a> to ensure that each array is stacked in such a way that the features are separated in the third dimension, as we would prefer.</p>
<p>The function <em>load_group()</em> implements this behavior for a list of file names and is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0acd705021432" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load a list of files, such as x, y, z data for a given variable
def load_group(filenames, prefix=''):
	loaded = list()
	for name in filenames:
		data = load_file(prefix + name)
		loaded.append(data)
	# stack group so that features are the 3rd dimension
	loaded = dstack(loaded)
	return loaded</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0acd705021432-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acd705021432-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0acd705021432-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acd705021432-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0acd705021432-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acd705021432-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0acd705021432-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acd705021432-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0acd705021432-9">9</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0acd705021432-1"><span class="crayon-p"># load a list of files, such as x, y, z data for a given variable</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acd705021432-2"><span class="crayon-e">def </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0acd705021432-3"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acd705021432-4"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">name </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0acd705021432-5"><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acd705021432-6"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0acd705021432-7"><span class="crayon-h"> </span><span class="crayon-p"># stack group so that features are the 3rd dimension</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acd705021432-8"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dstack</span><span class="crayon-sy">(</span><span class="crayon-v">loaded</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0acd705021432-9"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">loaded</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>We can demonstrate this function by loading all of the total acceleration files.</p>
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0acf753500599" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load dataset
from numpy import dstack
from pandas import read_csv

# load a single file as a numpy array
def load_file(filepath):
	dataframe = read_csv(filepath, header=None, delim_whitespace=True)
	return dataframe.values

# load a list of files, such as x, y, z data for a given variable
def load_group(filenames, prefix=''):
	loaded = list()
	for name in filenames:
		data = load_file(prefix + name)
		loaded.append(data)
	# stack group so that features are the 3rd dimension
	loaded = dstack(loaded)
	return loaded

# load the total acc data
filenames = ['total_acc_x_train.txt', 'total_acc_y_train.txt', 'total_acc_z_train.txt']
total_acc = load_group(filenames, prefix='HARDataset/train/Inertial Signals/')
print(total_acc.shape)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0acf753500599-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0acf753500599-23">23</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-1"><span class="crayon-p"># load dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">dstack</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-3"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-v">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-4"> </div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-5"><span class="crayon-p"># load a single file as a numpy array</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-6"><span class="crayon-e">def </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-7"><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-8"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-9"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-10"><span class="crayon-p"># load a list of files, such as x, y, z data for a given variable</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-11"><span class="crayon-e">def </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-12"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">name </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-14"><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-15"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-16"><span class="crayon-h"> </span><span class="crayon-p"># stack group so that features are the 3rd dimension</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-17"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dstack</span><span class="crayon-sy">(</span><span class="crayon-v">loaded</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-18"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">loaded</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-19"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-20"><span class="crayon-p"># load the total acc data</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-21"><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'total_acc_x_train.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_y_train.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_z_train.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0acf753500599-22"><span class="crayon-v">total_acc</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">'HARDataset/train/Inertial Signals/'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0acf753500599-23"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">total_acc</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0009 seconds] -->
<p>Running the example prints the shape of the returned NumPy array, showing the expected number of samples and time steps with the three features, x, y, and z for the dataset.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ad0636366803" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
(7352, 128, 3)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ad0636366803-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ad0636366803-1">(7352, 128, 3)</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>Finally, we can use the two functions developed so far to load all data for the train and the test dataset.</p>
<p>Given the parallel structure in the train and test folders, we can develop a new function that loads all input and output data for a given folder. The function can build a list of all 9 data files to load, load them as one NumPy array with 9 features, then load the data file containing the output class.</p>
<p>The <em>load_dataset()</em> function below implements this behaviour. It can be called for either the “<em>train</em>” group or the “<em>test</em>” group, passed as a string argument.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ad3750283218" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load a dataset group, such as train or test
def load_dataset(group, prefix=''):
	filepath = prefix + group + '/Inertial Signals/'
	# load all 9 files as a single array
	filenames = list()
	# total acceleration
	filenames += ['total_acc_x_'+group+'.txt', 'total_acc_y_'+group+'.txt', 'total_acc_z_'+group+'.txt']
	# body acceleration
	filenames += ['body_acc_x_'+group+'.txt', 'body_acc_y_'+group+'.txt', 'body_acc_z_'+group+'.txt']
	# body gyroscope
	filenames += ['body_gyro_x_'+group+'.txt', 'body_gyro_y_'+group+'.txt', 'body_gyro_z_'+group+'.txt']
	# load input data
	X = load_group(filenames, filepath)
	# load class output
	y = load_file(prefix + group + '/y_'+group+'.txt')
	return X, y</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ad3750283218-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad3750283218-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad3750283218-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad3750283218-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad3750283218-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad3750283218-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad3750283218-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad3750283218-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad3750283218-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad3750283218-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad3750283218-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad3750283218-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad3750283218-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad3750283218-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad3750283218-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad3750283218-16">16</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ad3750283218-1"><span class="crayon-p"># load a dataset group, such as train or test</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad3750283218-2"><span class="crayon-e">def </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-v">group</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad3750283218-3"><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/Inertial Signals/'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad3750283218-4"><span class="crayon-h"> </span><span class="crayon-p"># load all 9 files as a single array</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad3750283218-5"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad3750283218-6"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad3750283218-7"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'total_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad3750283218-8"><span class="crayon-h"> </span><span class="crayon-p"># body acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad3750283218-9"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad3750283218-10"><span class="crayon-h"> </span><span class="crayon-p"># body gyroscope</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad3750283218-11"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_gyro_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad3750283218-12"><span class="crayon-h"> </span><span class="crayon-p"># load input data</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad3750283218-13"><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad3750283218-14"><span class="crayon-h"> </span><span class="crayon-p"># load class output</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad3750283218-15"><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad3750283218-16"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0010 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ad5859141210" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load dataset
from numpy import dstack
from pandas import read_csv

# load a single file as a numpy array
def load_file(filepath):
	dataframe = read_csv(filepath, header=None, delim_whitespace=True)
	return dataframe.values

# load a list of files, such as x, y, z data for a given variable
def load_group(filenames, prefix=''):
	loaded = list()
	for name in filenames:
		data = load_file(prefix + name)
		loaded.append(data)
	# stack group so that features are the 3rd dimension
	loaded = dstack(loaded)
	return loaded

# load a dataset group, such as train or test
def load_dataset(group, prefix=''):
	filepath = prefix + group + '/Inertial Signals/'
	# load all 9 files as a single array
	filenames = list()
	# total acceleration
	filenames += ['total_acc_x_'+group+'.txt', 'total_acc_y_'+group+'.txt', 'total_acc_z_'+group+'.txt']
	# body acceleration
	filenames += ['body_acc_x_'+group+'.txt', 'body_acc_y_'+group+'.txt', 'body_acc_z_'+group+'.txt']
	# body gyroscope
	filenames += ['body_gyro_x_'+group+'.txt', 'body_gyro_y_'+group+'.txt', 'body_gyro_z_'+group+'.txt']
	# load input data
	X = load_group(filenames, filepath)
	# load class output
	y = load_file(prefix + group + '/y_'+group+'.txt')
	return X, y

# load all train
trainX, trainy = load_dataset('train', 'HARDataset/')
print(trainX.shape, trainy.shape)
# load all test
testX, testy = load_dataset('test', 'HARDataset/')
print(testX.shape, testy.shape)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-24">24</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-26">26</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-28">28</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-30">30</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-32">32</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-34">34</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-36">36</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-38">38</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-40">40</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad5859141210-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad5859141210-42">42</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-1"><span class="crayon-p"># load dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">dstack</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-3"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-v">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-4"> </div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-5"><span class="crayon-p"># load a single file as a numpy array</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-6"><span class="crayon-e">def </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-7"><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-8"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-9"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-10"><span class="crayon-p"># load a list of files, such as x, y, z data for a given variable</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-11"><span class="crayon-e">def </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-12"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">name </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-14"><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-15"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-16"><span class="crayon-h"> </span><span class="crayon-p"># stack group so that features are the 3rd dimension</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-17"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dstack</span><span class="crayon-sy">(</span><span class="crayon-v">loaded</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-18"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">loaded</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-19"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-20"><span class="crayon-p"># load a dataset group, such as train or test</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-21"><span class="crayon-e">def </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-v">group</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-22"><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/Inertial Signals/'</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-23"><span class="crayon-h"> </span><span class="crayon-p"># load all 9 files as a single array</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-24"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-25"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-26"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'total_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-27"><span class="crayon-h"> </span><span class="crayon-p"># body acceleration</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-28"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-29"><span class="crayon-h"> </span><span class="crayon-p"># body gyroscope</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-30"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_gyro_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-31"><span class="crayon-h"> </span><span class="crayon-p"># load input data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-32"><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-33"><span class="crayon-h"> </span><span class="crayon-p"># load class output</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-34"><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-35"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-36"> </div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-37"><span class="crayon-p"># load all train</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-38"><span class="crayon-v">trainX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">trainy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-s">'train'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'HARDataset/'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-39"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">trainX</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">trainy</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-40"><span class="crayon-p"># load all test</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad5859141210-41"><span class="crayon-v">testX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">testy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-s">'test'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'HARDataset/'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad5859141210-42"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">testX</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">testy</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0020 seconds] -->
<p>Running the example loads the train and test datasets.</p>
<p>We can see that the test dataset has 2,947 rows of window data. As expected, we can see that the size of windows in the train and test sets matches and the size of the output (y) in each the train and test case matches the number of samples.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ad7281404170" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
(7352, 128, 9) (7352, 1)
(2947, 128, 9) (2947, 1)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ad7281404170-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad7281404170-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ad7281404170-1">(7352, 128, 9) (7352, 1)</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad7281404170-2">(2947, 128, 9) (2947, 1)</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>Now that we know how to load the data, we can start to explore it.</p>
<h2>5. Balance of Activity Classes</h2>
<p>A good first check of the data is to investigate the balance of each activity.</p>
<p>We believe that each of the 30 subjects performed each of the six activities.</p>
<p>Confirming this expectation will both check that the data is indeed balanced, making it easier to model, and confirm that we are correctly loading and interpreting the dataset.</p>
<p>We can develop a function that summarizes the breakdown of the output variables, e.g. the y variable.</p>
<p>The function <em>class_breakdown()</em> below implements this behavior, first wrapping the provided NumPy array in a DataFrame, grouping the rows by the class value, and calculating the size of each group (number of rows). The results are then summarized, including the count and the percentage.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ad9179652655" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# summarize the balance of classes in an output variable column
def class_breakdown(data):
	# convert the numpy array into a dataframe
	df = DataFrame(data)
	# group data by the class value and calculate the number of rows
	counts = df.groupby(0).size()
	# retrieve raw rows
	counts = counts.values
	# summarize
	for i in range(len(counts)):
		percent = counts[i] / len(df) * 100
		print('Class=%d, total=%d, percentage=%.3f' % (i+1, counts[i], percent))</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ad9179652655-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad9179652655-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad9179652655-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad9179652655-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad9179652655-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad9179652655-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad9179652655-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad9179652655-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad9179652655-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad9179652655-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0ad9179652655-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ad9179652655-12">12</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ad9179652655-1"><span class="crayon-p"># summarize the balance of classes in an output variable column</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad9179652655-2"><span class="crayon-e">def </span><span class="crayon-e">class_breakdown</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad9179652655-3"><span class="crayon-h"> </span><span class="crayon-p"># convert the numpy array into a dataframe</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad9179652655-4"><span class="crayon-h"> </span><span class="crayon-v">df</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">DataFrame</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad9179652655-5"><span class="crayon-h"> </span><span class="crayon-p"># group data by the class value and calculate the number of rows</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad9179652655-6"><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-e">groupby</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad9179652655-7"><span class="crayon-h"> </span><span class="crayon-p"># retrieve raw rows</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad9179652655-8"><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad9179652655-9"><span class="crayon-h"> </span><span class="crayon-p"># summarize</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad9179652655-10"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">counts</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0ad9179652655-11"><span class="crayon-h"> </span><span class="crayon-v">percent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">df</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ad9179652655-12"><span class="crayon-h"> </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Class=%d, total=%d, percentage=%.3f'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">percent</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>It may be useful to summarize the breakdown of the classes in the train and test datasets to ensure they have a similar breakdown, then compare the result to the breakdown on the combined dataset.</p>
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0adb020049170" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# summarize class balance
from numpy import array
from numpy import vstack
from pandas import read_csv
from pandas import DataFrame

# load a single file as a numpy array
def load_file(filepath):
	dataframe = read_csv(filepath, header=None, delim_whitespace=True)
	return dataframe.values

# summarize the balance of classes in an output variable column
def class_breakdown(data):
	# convert the numpy array into a dataframe
	df = DataFrame(data)
	# group data by the class value and calculate the number of rows
	counts = df.groupby(0).size()
	# retrieve raw rows
	counts = counts.values
	# summarize
	for i in range(len(counts)):
		percent = counts[i] / len(df) * 100
		print('Class=%d, total=%d, percentage=%.3f' % (i+1, counts[i], percent))

# load train file
trainy = load_file('HARDataset/train/y_train.txt')
# summarize class breakdown
print('Train Dataset')
class_breakdown(trainy)

# load test file
testy = load_file('HARDataset/test/y_test.txt')
# summarize class breakdown
print('Test Dataset')
class_breakdown(testy)

# summarize combined class breakdown
print('Both')
combined = vstack((trainy, testy))
class_breakdown(combined)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-24">24</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-26">26</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-28">28</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-30">30</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-32">32</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-34">34</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-36">36</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-38">38</div><div class="crayon-num" data-line="crayon-5c0ca682c0adb020049170-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adb020049170-40">40</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-1"><span class="crayon-p"># summarize class balance</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-t">array</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">vstack</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-4"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-5"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-v">DataFrame</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-6"> </div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-7"><span class="crayon-p"># load a single file as a numpy array</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-8"><span class="crayon-e">def </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-9"><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-10"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-11"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-12"><span class="crayon-p"># summarize the balance of classes in an output variable column</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-13"><span class="crayon-e">def </span><span class="crayon-e">class_breakdown</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-14"><span class="crayon-h"> </span><span class="crayon-p"># convert the numpy array into a dataframe</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-15"><span class="crayon-h"> </span><span class="crayon-v">df</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">DataFrame</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-16"><span class="crayon-h"> </span><span class="crayon-p"># group data by the class value and calculate the number of rows</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-17"><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">df</span><span class="crayon-sy">.</span><span class="crayon-e">groupby</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">size</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-18"><span class="crayon-h"> </span><span class="crayon-p"># retrieve raw rows</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-19"><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-20"><span class="crayon-h"> </span><span class="crayon-p"># summarize</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-21"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">counts</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-22"><span class="crayon-h"> </span><span class="crayon-v">percent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">df</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-23"><span class="crayon-h"> </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Class=%d, total=%d, percentage=%.3f'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">counts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">percent</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-24"> </div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-25"><span class="crayon-p"># load train file</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-26"><span class="crayon-v">trainy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/train/y_train.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-27"><span class="crayon-p"># summarize class breakdown</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-28"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Train Dataset'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-29"><span class="crayon-e">class_breakdown</span><span class="crayon-sy">(</span><span class="crayon-v">trainy</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-30"> </div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-31"><span class="crayon-p"># load test file</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-32"><span class="crayon-v">testy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/test/y_test.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-33"><span class="crayon-p"># summarize class breakdown</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-34"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Test Dataset'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-35"><span class="crayon-e">class_breakdown</span><span class="crayon-sy">(</span><span class="crayon-v">testy</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-36"> </div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-37"><span class="crayon-p"># summarize combined class breakdown</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-38"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Both'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0adb020049170-39"><span class="crayon-v">combined</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">vstack</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">trainy</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">testy</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adb020049170-40"><span class="crayon-e">class_breakdown</span><span class="crayon-sy">(</span><span class="crayon-v">combined</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0014 seconds] -->
<p>Running the example first summarizes the breakdown for the training set. We can see a pretty similar distribution of each class hovering between 13% and 19% of the dataset.</p>
<p>The result on the test set and on both datasets together look very similar.</p>
<p>It is likely safe to work with the dataset assuming the distribution of classes is balanced per train and test set and perhaps per subject.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0add475573750" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
Train Dataset
Class=1, total=1226, percentage=16.676
Class=2, total=1073, percentage=14.595
Class=3, total=986, percentage=13.411
Class=4, total=1286, percentage=17.492
Class=5, total=1374, percentage=18.689
Class=6, total=1407, percentage=19.138

Test Dataset
Class=1, total=496, percentage=16.831
Class=2, total=471, percentage=15.982
Class=3, total=420, percentage=14.252
Class=4, total=491, percentage=16.661
Class=5, total=532, percentage=18.052
Class=6, total=537, percentage=18.222

Both
Class=1, total=1722, percentage=16.720
Class=2, total=1544, percentage=14.992
Class=3, total=1406, percentage=13.652
Class=4, total=1777, percentage=17.254
Class=5, total=1906, percentage=18.507
Class=6, total=1944, percentage=18.876</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0add475573750-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0add475573750-23">23</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0add475573750-1">Train Dataset</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-2">Class=1, total=1226, percentage=16.676</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-3">Class=2, total=1073, percentage=14.595</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-4">Class=3, total=986, percentage=13.411</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-5">Class=4, total=1286, percentage=17.492</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-6">Class=5, total=1374, percentage=18.689</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-7">Class=6, total=1407, percentage=19.138</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-8"> </div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-9">Test Dataset</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-10">Class=1, total=496, percentage=16.831</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-11">Class=2, total=471, percentage=15.982</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-12">Class=3, total=420, percentage=14.252</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-13">Class=4, total=491, percentage=16.661</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-14">Class=5, total=532, percentage=18.052</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-15">Class=6, total=537, percentage=18.222</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-16"> </div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-17">Both</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-18">Class=1, total=1722, percentage=16.720</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-19">Class=2, total=1544, percentage=14.992</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-20">Class=3, total=1406, percentage=13.652</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-21">Class=4, total=1777, percentage=17.254</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0add475573750-22">Class=5, total=1906, percentage=18.507</div><div class="crayon-line" id="crayon-5c0ca682c0add475573750-23">Class=6, total=1944, percentage=18.876</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p></p>
<h2>6. Plot Time Series Data for One Subject</h2>
<p>We are working with time series data, therefore an import check is to create a line plot of the raw data.</p>
<p>The raw data is comprised of windows of time series data per variable, and the windows do have a 50% overlap. This suggests we may see some repetition in the observations as a line plot unless the overlap is removed.</p>
<p>We can start off by loading the training dataset using the functions developed above.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0adf174595915" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load data
trainX, trainy = load_dataset('train', 'HARDataset/')</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0adf174595915-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0adf174595915-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0adf174595915-1"><span class="crayon-p"># load data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0adf174595915-2"><span class="crayon-v">trainX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">trainy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-s">'train'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'HARDataset/'</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>Next, we can load the ‘<em>subject_train.txt</em>‘ in the ‘<em>train</em>‘ directory that provides a mapping of rows to the subject to which it belongs.</p>
<p>We can load this file using the <em>load_file()</em> function. Once loaded, we can also use the <em>unique()</em> NumPy function to retrieve a list of the unique subjects in the training dataset.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ae1706765705" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
sub_map = load_file('HARDataset/train/subject_train.txt')
train_subjects = unique(sub_map)
print(train_subjects)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ae1706765705-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae1706765705-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae1706765705-3">3</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ae1706765705-1"><span class="crayon-v">sub_map</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/train/subject_train.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae1706765705-2"><span class="crayon-v">train_subjects</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae1706765705-3"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">train_subjects</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>Next, we need a way to retrieve all of the rows for a single subject, e.g. subject number 1.</p>
<p>We can do this by finding all of the row numbers that belong to a given subject and use those row numbers to select the samples from the loaded X and y data from the training dataset.</p>
<p>The <em>data_for_subject()</em> function below implements this behavior. It will take the loaded training data, the loaded mapping of row number to subjects, and the subject identification number for the subject that we are interested in, and will return the <em>X</em> and <em>y</em> data for only that subject.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ae3292051060" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# get all data for one subject
def data_for_subject(X, y, sub_map, sub_id):
	# get row indexes for the subject id
	ix = [i for i in range(len(sub_map)) if sub_map[i]==sub_id]
	# return the selected samples
	return X[ix, :, :], y[ix]</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ae3292051060-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae3292051060-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae3292051060-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae3292051060-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae3292051060-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae3292051060-6">6</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ae3292051060-1"><span class="crayon-p"># get all data for one subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae3292051060-2"><span class="crayon-e">def </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae3292051060-3"><span class="crayon-h"> </span><span class="crayon-p"># get row indexes for the subject id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae3292051060-4"><span class="crayon-h"> </span><span class="crayon-v">ix</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">sub_id</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae3292051060-5"><span class="crayon-h"> </span><span class="crayon-p"># return the selected samples</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae3292051060-6"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">]</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>Now that we have data for one subject, we can plot it.</p>
<p>The data is comprised of windows with overlap. We can write a function to remove this overlap and squash the windows down for a given variable into one long sequence that can be plotted directly as a line plot.</p>
<p>The <em>to_series()</em> function below implements this behavior for a given variable, e.g. array of windows.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ae5737293584" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# convert a series of windows to a 1D list
def to_series(windows):
	series = list()
	for window in windows:
		# remove the overlap from the window
		half = int(len(window) / 2) - 1
		for value in window[-half:]:
			series.append(value)
	return series</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ae5737293584-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae5737293584-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae5737293584-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae5737293584-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae5737293584-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae5737293584-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae5737293584-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae5737293584-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae5737293584-9">9</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ae5737293584-1"><span class="crayon-p"># convert a series of windows to a 1D list</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae5737293584-2"><span class="crayon-e">def </span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">windows</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae5737293584-3"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae5737293584-4"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">window </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">windows</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae5737293584-5"><span class="crayon-h"> </span><span class="crayon-p"># remove the overlap from the window</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae5737293584-6"><span class="crayon-h"> </span><span class="crayon-v">half</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">window</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae5737293584-7"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">value </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">half</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae5737293584-8"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae5737293584-9"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">series</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>Finally, we have enough to plot the data. We can plot each of the nine variables for the subject in turn and a final plot for the activity level.</p>
<p>Each series will have the same number of time steps (length of x-axis), therefore, it may be useful to create a subplot for each variable and align all plots vertically so we can compare the movement on each variable.</p>
<p>The <em>plot_subject()</em> function below implements this behavior for the <em>X</em> and <em>y</em> data for a single subject. The function assumes the same order of the variables (3rd axis) as was loaded in the <em>load_dataset() </em>function. A crude title is also added to each plot so we don’t get easily confused about what we are looking at.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0ae6593963821" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot the data for one subject
def plot_subject(X, y):
	pyplot.figure()
	# determine the total number of plots
	n, off = X.shape[2] + 1, 0
	# plot total acc
	for i in range(3):
		pyplot.subplot(n, 1, off+1)
		pyplot.plot(to_series(X[:, :, off]))
		pyplot.title('total acc '+str(i), y=0, loc='left')
		off += 1
	# plot body acc
	for i in range(3):
		pyplot.subplot(n, 1, off+1)
		pyplot.plot(to_series(X[:, :, off]))
		pyplot.title('body acc '+str(i), y=0, loc='left')
		off += 1
	# plot body gyro
	for i in range(3):
		pyplot.subplot(n, 1, off+1)
		pyplot.plot(to_series(X[:, :, off]))
		pyplot.title('body gyro '+str(i), y=0, loc='left')
		off += 1
	# plot activities
	pyplot.subplot(n, 1, n)
	pyplot.plot(y)
	pyplot.title('activity', y=0, loc='left')
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-24">24</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-26">26</div><div class="crayon-num" data-line="crayon-5c0ca682c0ae6593963821-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0ae6593963821-28">28</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-1"><span class="crayon-p"># plot the data for one subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-2"><span class="crayon-e">def </span><span class="crayon-e">plot_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-3"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-4"><span class="crayon-h"> </span><span class="crayon-p"># determine the total number of plots</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-5"><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-6"><span class="crayon-h"> </span><span class="crayon-p"># plot total acc</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-7"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-8"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-9"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-10"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'total acc '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-11"><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-12"><span class="crayon-h"> </span><span class="crayon-p"># plot body acc</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-14"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-15"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-16"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'body acc '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-17"><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-18"><span class="crayon-h"> </span><span class="crayon-p"># plot body gyro</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-19"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-20"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-21"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-22"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'body gyro '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-23"><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-24"><span class="crayon-h"> </span><span class="crayon-p"># plot activities</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-25"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-26"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0ae6593963821-27"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'activity'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0ae6593963821-28"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0020 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b0f345305040" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot all vars for one subject
from numpy import array
from numpy import dstack
from numpy import unique
from pandas import read_csv
from matplotlib import pyplot

# load a single file as a numpy array
def load_file(filepath):
	dataframe = read_csv(filepath, header=None, delim_whitespace=True)
	return dataframe.values

# load a list of files, such as x, y, z data for a given variable
def load_group(filenames, prefix=''):
	loaded = list()
	for name in filenames:
		data = load_file(prefix + name)
		loaded.append(data)
	# stack group so that features are the 3rd dimension
	loaded = dstack(loaded)
	return loaded

# load a dataset group, such as train or test
def load_dataset(group, prefix=''):
	filepath = prefix + group + '/Inertial Signals/'
	# load all 9 files as a single array
	filenames = list()
	# total acceleration
	filenames += ['total_acc_x_'+group+'.txt', 'total_acc_y_'+group+'.txt', 'total_acc_z_'+group+'.txt']
	# body acceleration
	filenames += ['body_acc_x_'+group+'.txt', 'body_acc_y_'+group+'.txt', 'body_acc_z_'+group+'.txt']
	# body gyroscope
	filenames += ['body_gyro_x_'+group+'.txt', 'body_gyro_y_'+group+'.txt', 'body_gyro_z_'+group+'.txt']
	# load input data
	X = load_group(filenames, filepath)
	# load class output
	y = load_file(prefix + group + '/y_'+group+'.txt')
	return X, y

# get all data for one subject
def data_for_subject(X, y, sub_map, sub_id):
	# get row indexes for the subject id
	ix = [i for i in range(len(sub_map)) if sub_map[i]==sub_id]
	# return the selected samples
	return X[ix, :, :], y[ix]

# convert a series of windows to a 1D list
def to_series(windows):
	series = list()
	for window in windows:
		# remove the overlap from the window
		half = int(len(window) / 2) - 1
		for value in window[-half:]:
			series.append(value)
	return series

# plot the data for one subject
def plot_subject(X, y):
	pyplot.figure()
	# determine the total number of plots
	n, off = X.shape[2] + 1, 0
	# plot total acc
	for i in range(3):
		pyplot.subplot(n, 1, off+1)
		pyplot.plot(to_series(X[:, :, off]))
		pyplot.title('total acc '+str(i), y=0, loc='left')
		off += 1
	# plot body acc
	for i in range(3):
		pyplot.subplot(n, 1, off+1)
		pyplot.plot(to_series(X[:, :, off]))
		pyplot.title('body acc '+str(i), y=0, loc='left')
		off += 1
	# plot body gyro
	for i in range(3):
		pyplot.subplot(n, 1, off+1)
		pyplot.plot(to_series(X[:, :, off]))
		pyplot.title('body gyro '+str(i), y=0, loc='left')
		off += 1
	# plot activities
	pyplot.subplot(n, 1, n)
	pyplot.plot(y)
	pyplot.title('activity', y=0, loc='left')
	pyplot.show()

# load data
trainX, trainy = load_dataset('train', 'HARDataset/')
# load mapping of rows to subjects
sub_map = load_file('HARDataset/train/subject_train.txt')
train_subjects = unique(sub_map)
print(train_subjects)
# get the data for one subject
sub_id = train_subjects[0]
subX, suby = data_for_subject(trainX, trainy, sub_map, sub_id)
print(subX.shape, suby.shape)
# plot data for subject
plot_subject(subX, suby)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-24">24</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-26">26</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-28">28</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-30">30</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-32">32</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-34">34</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-36">36</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-38">38</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-40">40</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-42">42</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-44">44</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-46">46</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-48">48</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-50">50</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-52">52</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-54">54</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-56">56</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-58">58</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-60">60</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-62">62</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-64">64</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-66">66</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-68">68</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-70">70</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-72">72</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-74">74</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-76">76</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-78">78</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-80">80</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-82">82</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-84">84</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-86">86</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-88">88</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-90">90</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-92">92</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-94">94</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b0f345305040-96">96</div><div class="crayon-num" data-line="crayon-5c0ca682c0b0f345305040-97">97</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-1"><span class="crayon-p"># plot all vars for one subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-t">array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">dstack</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-4"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-5"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-6"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-7"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-8"><span class="crayon-p"># load a single file as a numpy array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-9"><span class="crayon-e">def </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-10"><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-11"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-12"> </div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-13"><span class="crayon-p"># load a list of files, such as x, y, z data for a given variable</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-14"><span class="crayon-e">def </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-15"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-16"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">name </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-17"><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-18"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-19"><span class="crayon-h"> </span><span class="crayon-p"># stack group so that features are the 3rd dimension</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-20"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dstack</span><span class="crayon-sy">(</span><span class="crayon-v">loaded</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-21"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">loaded</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-22"> </div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-23"><span class="crayon-p"># load a dataset group, such as train or test</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-24"><span class="crayon-e">def </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-v">group</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-25"><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/Inertial Signals/'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-26"><span class="crayon-h"> </span><span class="crayon-p"># load all 9 files as a single array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-27"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-28"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-29"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'total_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-30"><span class="crayon-h"> </span><span class="crayon-p"># body acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-31"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-32"><span class="crayon-h"> </span><span class="crayon-p"># body gyroscope</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-33"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_gyro_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-34"><span class="crayon-h"> </span><span class="crayon-p"># load input data</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-35"><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-36"><span class="crayon-h"> </span><span class="crayon-p"># load class output</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-37"><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-38"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-39"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-40"><span class="crayon-p"># get all data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-41"><span class="crayon-e">def </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-42"><span class="crayon-h"> </span><span class="crayon-p"># get row indexes for the subject id</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-43"><span class="crayon-h"> </span><span class="crayon-v">ix</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">sub_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-44"><span class="crayon-h"> </span><span class="crayon-p"># return the selected samples</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-45"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-46"> </div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-47"><span class="crayon-p"># convert a series of windows to a 1D list</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-48"><span class="crayon-e">def </span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">windows</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-49"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-50"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">window </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">windows</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-51"><span class="crayon-h"> </span><span class="crayon-p"># remove the overlap from the window</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-52"><span class="crayon-h"> </span><span class="crayon-v">half</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">window</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-53"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">value </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">half</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-54"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-55"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">series</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-56"> </div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-57"><span class="crayon-p"># plot the data for one subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-58"><span class="crayon-e">def </span><span class="crayon-e">plot_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-59"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-60"><span class="crayon-h"> </span><span class="crayon-p"># determine the total number of plots</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-61"><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-62"><span class="crayon-h"> </span><span class="crayon-p"># plot total acc</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-63"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-64"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-65"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-66"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'total acc '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-67"><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-68"><span class="crayon-h"> </span><span class="crayon-p"># plot body acc</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-69"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-70"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-71"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-72"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'body acc '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-73"><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-74"><span class="crayon-h"> </span><span class="crayon-p"># plot body gyro</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-75"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-76"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-77"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-78"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'body gyro '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-79"><span class="crayon-h"> </span><span class="crayon-v">off</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-80"><span class="crayon-h"> </span><span class="crayon-p"># plot activities</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-81"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-82"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-83"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'activity'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-84"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-85"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-86"><span class="crayon-p"># load data</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-87"><span class="crayon-v">trainX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">trainy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-s">'train'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'HARDataset/'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-88"><span class="crayon-p"># load mapping of rows to subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-89"><span class="crayon-v">sub_map</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/train/subject_train.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-90"><span class="crayon-v">train_subjects</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-91"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">train_subjects</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-92"><span class="crayon-p"># get the data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-93"><span class="crayon-v">sub_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">train_subjects</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-94"><span class="crayon-v">subX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">suby</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">trainX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">trainy</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-95"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">subX</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">suby</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b0f345305040-96"><span class="crayon-p"># plot data for subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b0f345305040-97"><span class="crayon-e">plot_subject</span><span class="crayon-sy">(</span><span class="crayon-v">subX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">suby</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0050 seconds] -->
<p>Running the example prints the unique subjects in the training dataset, the sample of the data for the first subject, and creates one figure with 10 plots, one for each of the nine input variables and the output class.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b12354554329" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
[ 1 3 5 6 7 8 11 14 15 16 17 19 21 22 23 25 26 27 28 29 30]
(341, 128, 9) (341, 1)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b12354554329-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b12354554329-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b12354554329-1">[ 1 3 5 6 7 8 11 14 15 16 17 19 21 22 23 25 26 27 28 29 30]</div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b12354554329-2">(341, 128, 9) (341, 1)</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>In the plot, we can see periods of large movement corresponding with activities 1, 2, and 3: the walking activities. We can also see much less activity (i.e. a relatively straight line) for higher numbered activities, 4, 5, and 6 (sitting, standing, and laying).</p>
<p>This is good confirmation that we have correctly loaded interpreted the raw dataset.</p>
<p>We can see that this subject has performed the same general sequence of activities twice, and some activities are performed more than two times. This suggests that for a given subject, we should not make assumptions about what activities may have been performed or their order.</p>
<p>We can also see some relatively large movement for some stationary activities, such as laying. It is possible that these are outliers or related to activity transitions. It may be possible to smooth or remove these observations as outliers.</p>
<p>Finally, we see a lot of commonality across the nine variables. It is very likely that only a subset of these traces are required to develop a predictive model.</p>
<div class="wp-caption aligncenter" id="attachment_6172" style="width: 1290px"><img alt="Line plot for all variables for a single subject" class="size-full wp-image-6172" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-subject.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-subject.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-subject-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-subject-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-subject-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Line plot for all variables for a single subject</p></div>
<p>We can re-run the example for another subject by making one small change, e.g. choose the identifier of the second subject in the training dataset.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b14780052467" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# get the data for one subject
sub_id = train_subjects[1]</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b14780052467-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b14780052467-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b14780052467-1"><span class="crayon-p"># get the data for one subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b14780052467-2"><span class="crayon-v">sub_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">train_subjects</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0001 seconds] -->
<p>The plot for the second subject shows similar behavior with no surprises.</p>
<p>The double sequence of activities does appear more regular than the first subject.</p>
<div class="wp-caption aligncenter" id="attachment_6173" style="width: 1290px"><img alt="Line plot for all variables for a second single subject" class="size-full wp-image-6173" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-second-subject.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-second-subject.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-second-subject-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-second-subject-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Line-plot-for-all-variables-for-a-single-second-subject-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Line plot for all variables for a second single subject</p></div>
<h2>7. Plot Histograms Per Subject</h2>
<p>As the problem is framed, we are interested in using the movement data from some subjects to predict activities from the movement of other subjects.</p>
<p>This suggests that there must be regularity in the movement data across subjects. We know that the data has been scaled between -1 and 1, presumably per subject, suggesting that the amplitude of the detected movements will be similar.</p>
<p>We would also expect that the distribution of movement data would be similar across subjects, given that they performed the same actions.</p>
<p>We can check for this by plotting and comparing the histograms of the movement data across subjects. A useful approach would be to create one plot per subject and plot all three axis of a given data (e.g. total acceleration), then repeat this for multiple subjects. The plots can be modified to use the same axis and aligned horizontally so that the distributions for each variable across subjects can be compared.</p>
<p>The <em>plot_subject_histograms()</em> function below implements this behavior. The function takes the loaded dataset and mapping of rows to subjects as well as a maximum number of subjects to plot, fixed at 10 by default.</p>
<p>A plot is created for each subject and the three variables for one data type are plotted as histograms with 100 bins, to help to make the distribution obvious. Each plot shares the same axis, which is fixed at the bounds of -1 and 1.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b17683704422" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot histograms for multiple subjects
def plot_subject_histograms(X, y, sub_map, n=10):
	pyplot.figure()
	# get unique subjects
	subject_ids = unique(sub_map[:,0])
	# enumerate subjects
	xaxis = None
	for k in range(n):
		sub_id = subject_ids[k]
		# get data for one subject
		subX, _ = data_for_subject(X, y, sub_map, sub_id)
		# total acc
		for i in range(3):
			ax = pyplot.subplot(n, 1, k+1, sharex=xaxis)
			ax.set_xlim(-1,1)
			if k == 0:
				xaxis = ax
			pyplot.hist(to_series(subX[:,:,i]), bins=100)
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b17683704422-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b17683704422-19">19</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-1"><span class="crayon-p"># plot histograms for multiple subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-2"><span class="crayon-e">def </span><span class="crayon-e">plot_subject_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-o">=</span><span class="crayon-cn">10</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-3"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-4"><span class="crayon-h"> </span><span class="crayon-p"># get unique subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-5"><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-6"><span class="crayon-h"> </span><span class="crayon-p"># enumerate subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-7"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-8"><span class="crayon-e"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-9"><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-sy">[</span><span class="crayon-v">k</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-10"><span class="crayon-h"> </span><span class="crayon-p"># get data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-11"><span class="crayon-h"> </span><span class="crayon-v">subX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">_</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-12"><span class="crayon-h"> </span><span class="crayon-p"># total acc</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-14"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sharex</span><span class="crayon-o">=</span><span class="crayon-v">xaxis</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-15"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xlim</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-16"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-17"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ax</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b17683704422-18"><span class="crayon-e"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">subX</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b17683704422-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b19371624425" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot histograms for multiple subjects
from numpy import array
from numpy import unique
from numpy import dstack
from pandas import read_csv
from matplotlib import pyplot

# load a single file as a numpy array
def load_file(filepath):
	dataframe = read_csv(filepath, header=None, delim_whitespace=True)
	return dataframe.values

# load a list of files, such as x, y, z data for a given variable
def load_group(filenames, prefix=''):
	loaded = list()
	for name in filenames:
		data = load_file(prefix + name)
		loaded.append(data)
	# stack group so that features are the 3rd dimension
	loaded = dstack(loaded)
	return loaded

# load a dataset group, such as train or test
def load_dataset(group, prefix=''):
	filepath = prefix + group + '/Inertial Signals/'
	# load all 9 files as a single array
	filenames = list()
	# total acceleration
	filenames += ['total_acc_x_'+group+'.txt', 'total_acc_y_'+group+'.txt', 'total_acc_z_'+group+'.txt']
	# body acceleration
	filenames += ['body_acc_x_'+group+'.txt', 'body_acc_y_'+group+'.txt', 'body_acc_z_'+group+'.txt']
	# body gyroscope
	filenames += ['body_gyro_x_'+group+'.txt', 'body_gyro_y_'+group+'.txt', 'body_gyro_z_'+group+'.txt']
	# load input data
	X = load_group(filenames, filepath)
	# load class output
	y = load_file(prefix + group + '/y_'+group+'.txt')
	return X, y

# get all data for one subject
def data_for_subject(X, y, sub_map, sub_id):
	# get row indexes for the subject id
	ix = [i for i in range(len(sub_map)) if sub_map[i]==sub_id]
	# return the selected samples
	return X[ix, :, :], y[ix]

# convert a series of windows to a 1D list
def to_series(windows):
	series = list()
	for window in windows:
		# remove the overlap from the window
		half = int(len(window) / 2) - 1
		for value in window[-half:]:
			series.append(value)
	return series

# plot histograms for multiple subjects
def plot_subject_histograms(X, y, sub_map, n=10):
	pyplot.figure()
	# get unique subjects
	subject_ids = unique(sub_map[:,0])
	# enumerate subjects
	xaxis = None
	for k in range(n):
		sub_id = subject_ids[k]
		# get data for one subject
		subX, _ = data_for_subject(X, y, sub_map, sub_id)
		# total acc
		for i in range(3):
			ax = pyplot.subplot(n, 1, k+1, sharex=xaxis)
			ax.set_xlim(-1,1)
			if k == 0:
				xaxis = ax
			pyplot.hist(to_series(subX[:,:,i]), bins=100)
	pyplot.show()

# load training dataset
X, y = load_dataset('train', 'HARDataset/')
# load mapping of rows to subjects
sub_map = load_file('HARDataset/train/subject_train.txt')
# plot histograms for subjects
plot_subject_histograms(X, y, sub_map)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-24">24</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-26">26</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-28">28</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-30">30</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-32">32</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-34">34</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-36">36</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-38">38</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-40">40</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-42">42</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-44">44</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-46">46</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-48">48</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-50">50</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-52">52</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-54">54</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-56">56</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-58">58</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-60">60</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-62">62</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-64">64</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-66">66</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-68">68</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-70">70</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-72">72</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-74">74</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-76">76</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-78">78</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-80">80</div><div class="crayon-num" data-line="crayon-5c0ca682c0b19371624425-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b19371624425-82">82</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-1"><span class="crayon-p"># plot histograms for multiple subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-t">array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-4"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">dstack</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-5"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-6"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-7"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-8"><span class="crayon-p"># load a single file as a numpy array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-9"><span class="crayon-e">def </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-10"><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-11"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-12"> </div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-13"><span class="crayon-p"># load a list of files, such as x, y, z data for a given variable</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-14"><span class="crayon-e">def </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-15"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-16"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">name </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-17"><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-18"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-19"><span class="crayon-h"> </span><span class="crayon-p"># stack group so that features are the 3rd dimension</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-20"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dstack</span><span class="crayon-sy">(</span><span class="crayon-v">loaded</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-21"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">loaded</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-22"> </div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-23"><span class="crayon-p"># load a dataset group, such as train or test</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-24"><span class="crayon-e">def </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-v">group</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-25"><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/Inertial Signals/'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-26"><span class="crayon-h"> </span><span class="crayon-p"># load all 9 files as a single array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-27"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-28"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-29"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'total_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-30"><span class="crayon-h"> </span><span class="crayon-p"># body acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-31"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-32"><span class="crayon-h"> </span><span class="crayon-p"># body gyroscope</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-33"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_gyro_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-34"><span class="crayon-h"> </span><span class="crayon-p"># load input data</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-35"><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-36"><span class="crayon-h"> </span><span class="crayon-p"># load class output</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-37"><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-38"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-39"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-40"><span class="crayon-p"># get all data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-41"><span class="crayon-e">def </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-42"><span class="crayon-h"> </span><span class="crayon-p"># get row indexes for the subject id</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-43"><span class="crayon-h"> </span><span class="crayon-v">ix</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">sub_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-44"><span class="crayon-h"> </span><span class="crayon-p"># return the selected samples</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-45"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-46"> </div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-47"><span class="crayon-p"># convert a series of windows to a 1D list</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-48"><span class="crayon-e">def </span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">windows</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-49"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-50"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">window </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">windows</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-51"><span class="crayon-h"> </span><span class="crayon-p"># remove the overlap from the window</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-52"><span class="crayon-h"> </span><span class="crayon-v">half</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">window</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-53"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">value </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">half</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-54"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-55"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">series</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-56"> </div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-57"><span class="crayon-p"># plot histograms for multiple subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-58"><span class="crayon-e">def </span><span class="crayon-e">plot_subject_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-o">=</span><span class="crayon-cn">10</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-59"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-60"><span class="crayon-h"> </span><span class="crayon-p"># get unique subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-61"><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-62"><span class="crayon-h"> </span><span class="crayon-p"># enumerate subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-63"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-64"><span class="crayon-e"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-65"><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-sy">[</span><span class="crayon-v">k</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-66"><span class="crayon-h"> </span><span class="crayon-p"># get data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-67"><span class="crayon-h"> </span><span class="crayon-v">subX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">_</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-68"><span class="crayon-h"> </span><span class="crayon-p"># total acc</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-69"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-70"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sharex</span><span class="crayon-o">=</span><span class="crayon-v">xaxis</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-71"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xlim</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-72"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-73"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ax</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-74"><span class="crayon-e"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">subX</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-75"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-76"> </div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-77"><span class="crayon-p"># load training dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-78"><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-s">'train'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'HARDataset/'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-79"><span class="crayon-p"># load mapping of rows to subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-80"><span class="crayon-v">sub_map</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/train/subject_train.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b19371624425-81"><span class="crayon-p"># plot histograms for subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b19371624425-82"><span class="crayon-e">plot_subject_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0042 seconds] -->
<p>Running the example creates a single figure with 10 plots with histograms for the three axis of the total acceleration data.</p>
<p>Each of the three axes on a given plot have a different color, specifically x, y, and z are blue, orange, and green respectively.</p>
<p>We can see that the distribution for a given axis does appear Gaussian with large separate groups of data.</p>
<p>We can see some of the distributions align (e.g. main groups in the middle around 0.0), suggesting there may be some continuity of the movement data across subjects, at least for this data.</p>
<div class="wp-caption aligncenter" id="attachment_6174" style="width: 1290px"><img alt="Histograms of the total acceleration data for 10 subjects" class="size-full wp-image-6174" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-for-10-subjects.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-for-10-subjects.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-for-10-subjects-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-for-10-subjects-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-for-10-subjects-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Histograms of the total acceleration data for 10 subjects</p></div>
<p>We can update the <em>plot_subject_histograms()</em> function to next plot the distributions of the body acceleration. The updated function is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b1b753106663" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot histograms for multiple subjects
def plot_subject_histograms(X, y, sub_map, n=10):
	pyplot.figure()
	# get unique subjects
	subject_ids = unique(sub_map[:,0])
	# enumerate subjects
	xaxis = None
	for k in range(n):
		sub_id = subject_ids[k]
		# get data for one subject
		subX, _ = data_for_subject(X, y, sub_map, sub_id)
		# body acc
		for i in range(3):
			ax = pyplot.subplot(n, 1, k+1, sharex=xaxis)
			ax.set_xlim(-1,1)
			if k == 0:
				xaxis = ax
			pyplot.hist(to_series(subX[:,:,3+i]), bins=100)
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1b753106663-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1b753106663-19">19</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-1"><span class="crayon-p"># plot histograms for multiple subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-2"><span class="crayon-e">def </span><span class="crayon-e">plot_subject_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-o">=</span><span class="crayon-cn">10</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-3"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-4"><span class="crayon-h"> </span><span class="crayon-p"># get unique subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-5"><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-6"><span class="crayon-h"> </span><span class="crayon-p"># enumerate subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-7"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-8"><span class="crayon-e"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-9"><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-sy">[</span><span class="crayon-v">k</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-10"><span class="crayon-h"> </span><span class="crayon-p"># get data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-11"><span class="crayon-h"> </span><span class="crayon-v">subX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">_</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-12"><span class="crayon-h"> </span><span class="crayon-p"># body acc</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-14"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sharex</span><span class="crayon-o">=</span><span class="crayon-v">xaxis</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-15"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xlim</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-16"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-17"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ax</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1b753106663-18"><span class="crayon-e"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">subX</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-o">+</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1b753106663-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>Running the updated example creates the same plot with very different results.</p>
<p>Here we can see all data clustered around 0.0 across axis within a subject and across subjects. This suggests that perhaps the data was centered (zero mean). This strong consistency across subjects may aid in modeling, and may suggest that the differences across subjects in the total acceleration data may not be as helpful.</p>
<div class="wp-caption aligncenter" id="attachment_6175" style="width: 1290px"><img alt="Histograms of the body acceleration data for 10 subjects" class="size-full wp-image-6175" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-for-10-subjects.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-for-10-subjects.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-for-10-subjects-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-for-10-subjects-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-for-10-subjects-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Histograms of the body acceleration data for 10 subjects</p></div>
<p>Finally, we can generate one final plot for the gyroscopic data.</p>
<p>The updated function is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b1e310153484" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot histograms for multiple subjects
def plot_subject_histograms(X, y, sub_map, n=10):
	pyplot.figure()
	# get unique subjects
	subject_ids = unique(sub_map[:,0])
	# enumerate subjects
	xaxis = None
	for k in range(n):
		sub_id = subject_ids[k]
		# get data for one subject
		subX, _ = data_for_subject(X, y, sub_map, sub_id)
		# body acc
		for i in range(3):
			ax = pyplot.subplot(n, 1, k+1, sharex=xaxis)
			ax.set_xlim(-1,1)
			if k == 0:
				xaxis = ax
			pyplot.hist(to_series(subX[:,:,6+i]), bins=100)
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b1e310153484-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b1e310153484-19">19</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-1"><span class="crayon-p"># plot histograms for multiple subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-2"><span class="crayon-e">def </span><span class="crayon-e">plot_subject_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-o">=</span><span class="crayon-cn">10</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-3"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-4"><span class="crayon-h"> </span><span class="crayon-p"># get unique subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-5"><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-6"><span class="crayon-h"> </span><span class="crayon-p"># enumerate subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-7"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-8"><span class="crayon-e"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-9"><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-sy">[</span><span class="crayon-v">k</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-10"><span class="crayon-h"> </span><span class="crayon-p"># get data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-11"><span class="crayon-h"> </span><span class="crayon-v">subX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">_</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-12"><span class="crayon-h"> </span><span class="crayon-p"># body acc</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-14"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sharex</span><span class="crayon-o">=</span><span class="crayon-v">xaxis</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-15"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xlim</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-16"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-17"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ax</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b1e310153484-18"><span class="crayon-e"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">subX</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-o">+</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b1e310153484-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>Running the example shows very similar results to the body acceleration data.</p>
<p>We see a high likelihood of a Gaussian distribution for each axis across each subject centered on 0.0. The distributions are a little wider and show fatter tails, but this is an encouraging finding for modeling movement data across subjects.</p>
<div class="wp-caption aligncenter" id="attachment_6176" style="width: 1290px"><img alt="Histograms of the body gyroscope data for 10 subjects" class="size-full wp-image-6176" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-for-10-subjects.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-for-10-subjects.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-for-10-subjects-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-for-10-subjects-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-for-10-subjects-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Histograms of the body gyroscope data for 10 subjects</p></div>
<h2>8. Plot Histograms Per Activity</h2>
<p>We are interested in discriminating between activities based on activity data.</p>
<p>The simplest case for this would be to discriminate between activities for a single subject. One way to investigate this would be to review the distribution of movement data for a subject by activity. We would expect to see some difference in the distribution between the movement data for different activities by a single subject.</p>
<p>We can review this by creating a histogram plot per activity, with the three axis of a given data type on each plot. Again, the plots can be arranged horizontally to compare the distribution of each data axis by activity. We would expect to see differences in the distributions across activities down the plots.</p>
<p>First, we must group the traces for a subject by activity. The <em>data_by_activity()</em> function below implements this behaviour.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b20957512219" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# group data by activity
def data_by_activity(X, y, activities):
	# group windows by activity
	return {a:X[y[:,0]==a, :, :] for a in activities}</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b20957512219-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b20957512219-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b20957512219-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b20957512219-4">4</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b20957512219-1"><span class="crayon-p"># group data by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b20957512219-2"><span class="crayon-e">def </span><span class="crayon-e">data_by_activity</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">activities</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b20957512219-3"><span class="crayon-h"> </span><span class="crayon-p"># group windows by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b20957512219-4"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activities</span><span class="crayon-sy">}</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>We can now create plots per activity for a given subject.</p>
<p>The <em>plot_activity_histograms()</em> function below implements this function for the traces data for a given subject.</p>
<p>First, the data is grouped by activity, then one subplot is created for each activity and each axis of the data type is added as a histogram. The function only enumerates the first three features of the data, which are the total acceleration variables.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b22808393933" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot histograms for each activity for a subject
def plot_activity_histograms(X, y):
	# get a list of unique activities for the subject
	activity_ids = unique(y[:,0])
	# group windows by activity
	grouped = data_by_activity(X, y, activity_ids)
	# plot per activity, histograms for each axis
	pyplot.figure()
	xaxis = None
	for k in range(len(activity_ids)):
		act_id = activity_ids[k]
		# total acceleration
		for i in range(3):
			ax = pyplot.subplot(len(activity_ids), 1, k+1, sharex=xaxis)
			ax.set_xlim(-1,1)
			if k == 0:
				xaxis = ax
			pyplot.hist(to_series(grouped[act_id][:,:,i]), bins=100)
			pyplot.title('activity '+str(act_id), y=0, loc='left')
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b22808393933-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b22808393933-20">20</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-1"><span class="crayon-p"># plot histograms for each activity for a subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-2"><span class="crayon-e">def </span><span class="crayon-e">plot_activity_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-3"><span class="crayon-h"> </span><span class="crayon-p"># get a list of unique activities for the subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-4"><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-5"><span class="crayon-h"> </span><span class="crayon-p"># group windows by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-6"><span class="crayon-h"> </span><span class="crayon-v">grouped</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_by_activity</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-7"><span class="crayon-h"> </span><span class="crayon-p"># plot per activity, histograms for each axis</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-8"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-9"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-10"><span class="crayon-e"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-11"><span class="crayon-h"> </span><span class="crayon-v">act_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">[</span><span class="crayon-v">k</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-12"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-14"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sharex</span><span class="crayon-o">=</span><span class="crayon-v">xaxis</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-15"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xlim</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-16"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-17"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ax</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-18"><span class="crayon-e"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">grouped</span><span class="crayon-sy">[</span><span class="crayon-v">act_id</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b22808393933-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'activity '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">act_id</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b22808393933-20"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0013 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b24716569515" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot histograms per activity for a subject
from numpy import array
from numpy import dstack
from numpy import unique
from pandas import read_csv
from matplotlib import pyplot

# load a single file as a numpy array
def load_file(filepath):
	dataframe = read_csv(filepath, header=None, delim_whitespace=True)
	return dataframe.values

# load a list of files, such as x, y, z data for a given variable
def load_group(filenames, prefix=''):
	loaded = list()
	for name in filenames:
		data = load_file(prefix + name)
		loaded.append(data)
	# stack group so that features are the 3rd dimension
	loaded = dstack(loaded)
	return loaded

# load a dataset group, such as train or test
def load_dataset(group, prefix=''):
	filepath = prefix + group + '/Inertial Signals/'
	# load all 9 files as a single array
	filenames = list()
	# total acceleration
	filenames += ['total_acc_x_'+group+'.txt', 'total_acc_y_'+group+'.txt', 'total_acc_z_'+group+'.txt']
	# body acceleration
	filenames += ['body_acc_x_'+group+'.txt', 'body_acc_y_'+group+'.txt', 'body_acc_z_'+group+'.txt']
	# body gyroscope
	filenames += ['body_gyro_x_'+group+'.txt', 'body_gyro_y_'+group+'.txt', 'body_gyro_z_'+group+'.txt']
	# load input data
	X = load_group(filenames, filepath)
	# load class output
	y = load_file(prefix + group + '/y_'+group+'.txt')
	return X, y

# get all data for one subject
def data_for_subject(X, y, sub_map, sub_id):
	# get row indexes for the subject id
	ix = [i for i in range(len(sub_map)) if sub_map[i]==sub_id]
	# return the selected samples
	return X[ix, :, :], y[ix]

# convert a series of windows to a 1D list
def to_series(windows):
	series = list()
	for window in windows:
		# remove the overlap from the window
		half = int(len(window) / 2) - 1
		for value in window[-half:]:
			series.append(value)
	return series

# group data by activity
def data_by_activity(X, y, activities):
	# group windows by activity
	return {a:X[y[:,0]==a, :, :] for a in activities}

# plot histograms for each activity for a subject
def plot_activity_histograms(X, y):
	# get a list of unique activities for the subject
	activity_ids = unique(y[:,0])
	# group windows by activity
	grouped = data_by_activity(X, y, activity_ids)
	# plot per activity, histograms for each axis
	pyplot.figure()
	xaxis = None
	for k in range(len(activity_ids)):
		act_id = activity_ids[k]
		# total acceleration
		for i in range(3):
			ax = pyplot.subplot(len(activity_ids), 1, k+1, sharex=xaxis)
			ax.set_xlim(-1,1)
			if k == 0:
				xaxis = ax
			pyplot.hist(to_series(grouped[act_id][:,:,i]), bins=100)
			pyplot.title('activity '+str(act_id), y=0, loc='left')
	pyplot.show()

# load data
trainX, trainy = load_dataset('train', 'HARDataset/')
# load mapping of rows to subjects
sub_map = load_file('HARDataset/train/subject_train.txt')
train_subjects = unique(sub_map)
# get the data for one subject
sub_id = train_subjects[0]
subX, suby = data_for_subject(trainX, trainy, sub_map, sub_id)
# plot data for subject
plot_activity_histograms(subX, suby)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-24">24</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-26">26</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-28">28</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-30">30</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-32">32</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-34">34</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-36">36</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-38">38</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-40">40</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-42">42</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-44">44</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-46">46</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-48">48</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-50">50</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-52">52</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-54">54</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-56">56</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-58">58</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-60">60</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-62">62</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-64">64</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-66">66</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-68">68</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-70">70</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-72">72</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-74">74</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-76">76</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-78">78</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-80">80</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-82">82</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-84">84</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-86">86</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-88">88</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-90">90</div><div class="crayon-num" data-line="crayon-5c0ca682c0b24716569515-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b24716569515-92">92</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-1"><span class="crayon-p"># plot histograms per activity for a subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-t">array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">dstack</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-4"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-5"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-6"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-7"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-8"><span class="crayon-p"># load a single file as a numpy array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-9"><span class="crayon-e">def </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-10"><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-11"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-12"> </div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-13"><span class="crayon-p"># load a list of files, such as x, y, z data for a given variable</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-14"><span class="crayon-e">def </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-15"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-16"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">name </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-17"><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-18"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-19"><span class="crayon-h"> </span><span class="crayon-p"># stack group so that features are the 3rd dimension</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-20"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dstack</span><span class="crayon-sy">(</span><span class="crayon-v">loaded</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-21"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">loaded</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-22"> </div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-23"><span class="crayon-p"># load a dataset group, such as train or test</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-24"><span class="crayon-e">def </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-v">group</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-25"><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/Inertial Signals/'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-26"><span class="crayon-h"> </span><span class="crayon-p"># load all 9 files as a single array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-27"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-28"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-29"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'total_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-30"><span class="crayon-h"> </span><span class="crayon-p"># body acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-31"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-32"><span class="crayon-h"> </span><span class="crayon-p"># body gyroscope</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-33"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_gyro_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-34"><span class="crayon-h"> </span><span class="crayon-p"># load input data</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-35"><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-36"><span class="crayon-h"> </span><span class="crayon-p"># load class output</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-37"><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-38"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-39"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-40"><span class="crayon-p"># get all data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-41"><span class="crayon-e">def </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-42"><span class="crayon-h"> </span><span class="crayon-p"># get row indexes for the subject id</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-43"><span class="crayon-h"> </span><span class="crayon-v">ix</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">sub_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-44"><span class="crayon-h"> </span><span class="crayon-p"># return the selected samples</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-45"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-46"> </div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-47"><span class="crayon-p"># convert a series of windows to a 1D list</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-48"><span class="crayon-e">def </span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">windows</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-49"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-50"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">window </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">windows</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-51"><span class="crayon-h"> </span><span class="crayon-p"># remove the overlap from the window</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-52"><span class="crayon-h"> </span><span class="crayon-v">half</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">window</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-53"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">value </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">half</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-54"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-55"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">series</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-56"> </div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-57"><span class="crayon-p"># group data by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-58"><span class="crayon-e">def </span><span class="crayon-e">data_by_activity</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">activities</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-59"><span class="crayon-h"> </span><span class="crayon-p"># group windows by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-60"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activities</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-61"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-62"><span class="crayon-p"># plot histograms for each activity for a subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-63"><span class="crayon-e">def </span><span class="crayon-e">plot_activity_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-64"><span class="crayon-h"> </span><span class="crayon-p"># get a list of unique activities for the subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-65"><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-66"><span class="crayon-h"> </span><span class="crayon-p"># group windows by activity</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-67"><span class="crayon-h"> </span><span class="crayon-v">grouped</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_by_activity</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-68"><span class="crayon-h"> </span><span class="crayon-p"># plot per activity, histograms for each axis</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-69"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-70"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-71"><span class="crayon-e"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-72"><span class="crayon-h"> </span><span class="crayon-v">act_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">[</span><span class="crayon-v">k</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-73"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-74"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-75"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sharex</span><span class="crayon-o">=</span><span class="crayon-v">xaxis</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-76"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xlim</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-77"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-78"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ax</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-79"><span class="crayon-e"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">grouped</span><span class="crayon-sy">[</span><span class="crayon-v">act_id</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-80"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'activity '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">act_id</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-81"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-82"> </div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-83"><span class="crayon-p"># load data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-84"><span class="crayon-v">trainX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">trainy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-s">'train'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'HARDataset/'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-85"><span class="crayon-p"># load mapping of rows to subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-86"><span class="crayon-v">sub_map</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/train/subject_train.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-87"><span class="crayon-v">train_subjects</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-88"><span class="crayon-p"># get the data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-89"><span class="crayon-v">sub_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">train_subjects</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-90"><span class="crayon-v">subX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">suby</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">trainX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">trainy</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b24716569515-91"><span class="crayon-p"># plot data for subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b24716569515-92"><span class="crayon-e">plot_activity_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">subX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">suby</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0045 seconds] -->
<p>Running the example creates the plot with six subplots, one for each activity for the first subject in the train dataset. Each of the x, y, and z axes for the total acceleration data have a blue, orange, and green histogram respectively.</p>
<p>We can see that each activity has a different data distribution, with a marked difference between the large movement (first three activities) with the stationary activities (last three activities). Data distributions for the first three activities look Gaussian with perhaps differing means and standard deviations. Distributions for the latter activities look multi-modal (i.e. multiple peaks).</p>
<div class="wp-caption aligncenter" id="attachment_6177" style="width: 1290px"><img alt="Histograms of the total acceleration data by activity" class="size-full wp-image-6177" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-by-activity.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-by-activity.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-by-activity-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-by-activity-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-total-acceleration-data-by-activity-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Histograms of the total acceleration data by activity</p></div>
<p>We can re-run the same example with an updated version of the <em>plot_activity_histograms()</em> that plots the body acceleration data instead.</p>
<p>The updated function is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b26678153787" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot histograms for each activity for a subject
def plot_activity_histograms(X, y):
	# get a list of unique activities for the subject
	activity_ids = unique(y[:,0])
	# group windows by activity
	grouped = data_by_activity(X, y, activity_ids)
	# plot per activity, histograms for each axis
	pyplot.figure()
	xaxis = None
	for k in range(len(activity_ids)):
		act_id = activity_ids[k]
		# total acceleration
		for i in range(3):
			ax = pyplot.subplot(len(activity_ids), 1, k+1, sharex=xaxis)
			ax.set_xlim(-1,1)
			if k == 0:
				xaxis = ax
			pyplot.hist(to_series(grouped[act_id][:,:,3+i]), bins=100)
			pyplot.title('activity '+str(act_id), y=0, loc='left')
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b26678153787-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b26678153787-20">20</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-1"><span class="crayon-p"># plot histograms for each activity for a subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-2"><span class="crayon-e">def </span><span class="crayon-e">plot_activity_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-3"><span class="crayon-h"> </span><span class="crayon-p"># get a list of unique activities for the subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-4"><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-5"><span class="crayon-h"> </span><span class="crayon-p"># group windows by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-6"><span class="crayon-h"> </span><span class="crayon-v">grouped</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_by_activity</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-7"><span class="crayon-h"> </span><span class="crayon-p"># plot per activity, histograms for each axis</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-8"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-9"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-10"><span class="crayon-e"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-11"><span class="crayon-h"> </span><span class="crayon-v">act_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">[</span><span class="crayon-v">k</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-12"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-14"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sharex</span><span class="crayon-o">=</span><span class="crayon-v">xaxis</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-15"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xlim</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-16"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-17"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ax</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-18"><span class="crayon-e"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">grouped</span><span class="crayon-sy">[</span><span class="crayon-v">act_id</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-o">+</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b26678153787-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'activity '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">act_id</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b26678153787-20"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0013 seconds] -->
<p>Running the updated example creates a new plot.</p>
<p>Here, we can see more similar distributions across the activities amongst the in-motion vs. stationary activities. The data looks bimodal in the case of the in-motion activities and perhaps Gaussian or exponential in the case of the stationary activities.</p>
<p>The pattern we see with the total vs. body acceleration distributions by activity mirrors what we see with the same data types across subjects in the previous section. Perhaps the total acceleration data is the key to discriminating the activities.</p>
<div class="wp-caption aligncenter" id="attachment_6178" style="width: 1290px"><img alt="Histograms of the body acceleration data by activity" class="size-full wp-image-6178" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-by-activity.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-by-activity.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-by-activity-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-by-activity-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-acceleration-data-by-activity-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Histograms of the body acceleration data by activity</p></div>
<p>Finally, we can update the example one more time to plot the histograms per activity for the gyroscopic data.</p>
<p>The updated function is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b29472425170" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot histograms for each activity for a subject
def plot_activity_histograms(X, y):
	# get a list of unique activities for the subject
	activity_ids = unique(y[:,0])
	# group windows by activity
	grouped = data_by_activity(X, y, activity_ids)
	# plot per activity, histograms for each axis
	pyplot.figure()
	xaxis = None
	for k in range(len(activity_ids)):
		act_id = activity_ids[k]
		# total acceleration
		for i in range(3):
			ax = pyplot.subplot(len(activity_ids), 1, k+1, sharex=xaxis)
			ax.set_xlim(-1,1)
			if k == 0:
				xaxis = ax
			pyplot.hist(to_series(grouped[act_id][:,:,6+i]), bins=100)
			pyplot.title('activity '+str(act_id), y=0, loc='left')
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b29472425170-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b29472425170-20">20</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-1"><span class="crayon-p"># plot histograms for each activity for a subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-2"><span class="crayon-e">def </span><span class="crayon-e">plot_activity_histograms</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-3"><span class="crayon-h"> </span><span class="crayon-p"># get a list of unique activities for the subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-4"><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-5"><span class="crayon-h"> </span><span class="crayon-p"># group windows by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-6"><span class="crayon-h"> </span><span class="crayon-v">grouped</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_by_activity</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-7"><span class="crayon-h"> </span><span class="crayon-p"># plot per activity, histograms for each axis</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-8"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-9"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-10"><span class="crayon-e"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-11"><span class="crayon-h"> </span><span class="crayon-v">act_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">[</span><span class="crayon-v">k</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-12"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-14"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sharex</span><span class="crayon-o">=</span><span class="crayon-v">xaxis</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-15"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xlim</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-16"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-17"><span class="crayon-h"> </span><span class="crayon-v">xaxis</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ax</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-18"><span class="crayon-e"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">grouped</span><span class="crayon-sy">[</span><span class="crayon-v">act_id</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-o">+</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b29472425170-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">title</span><span class="crayon-sy">(</span><span class="crayon-s">'activity '</span><span class="crayon-o">+</span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">act_id</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">loc</span><span class="crayon-o">=</span><span class="crayon-s">'left'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b29472425170-20"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0013 seconds] -->
<p>Running the example creates plots with the similar pattern as the body acceleration data, although showing perhaps fat-tailed Gaussian-like distributions instead of bimodal distributions for the in-motion activities.</p>
<div class="wp-caption aligncenter" id="attachment_6179" style="width: 1290px"><img alt="Histograms of the body gyroscope data by activity" class="size-full wp-image-6179" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-by-activity.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-by-activity.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-by-activity-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-by-activity-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Histograms-of-the-body-gyroscope-data-by-activity-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Histograms of the body gyroscope data by activity</p></div>
<p>All of these plots were created for the first subject, and we would expect to see similar distributions and relationships for the movement data across activities for other subjects.</p>
<h2>9. Plot Activity Duration Boxplots</h2>
<p>A final area to consider is how long a subject spends on each activity.</p>
<p>This is closely related to the balance of classes. If the activities (classes) are generally balanced within a dataset, then we expect the balance of activities for a given subject over the course of their trace would also be reasonably well balanced.</p>
<p>We can confirm this by calculating how long (in samples or rows) each subject spends on each activity and look at the distribution of durations for each activity.</p>
<p>A handy way to review this data is to summarize the distributions as boxplots showing the median (line), the middle 50% (box), the general extent of the data as the interquartile range (the whiskers), and outliers (as dots).</p>
<p>The function <em>plot_activity_durations_by_subject()</em> below implements this behavior by first splitting the dataset by subject, then the subjects data by activity and counting the rows spent on each activity, before finally creating a boxplot per activity of the duration measurements.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b2b116241497" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot activity durations by subject
def plot_activity_durations_by_subject(X, y, sub_map):
	# get unique subjects and activities
	subject_ids = unique(sub_map[:,0])
	activity_ids = unique(y[:,0])
	# enumerate subjects
	activity_windows = {a:list() for a in activity_ids}
	for sub_id in subject_ids:
		# get data for one subject
		_, subj_y = data_for_subject(X, y, sub_map, sub_id)
		# count windows by activity
		for a in activity_ids:
			activity_windows[a].append(len(subj_y[subj_y[:,0]==a]))
	# organize durations into a list of lists
	durations = [activity_windows[a] for a in activity_ids]
	pyplot.boxplot(durations, labels=activity_ids)
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2b116241497-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2b116241497-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2b116241497-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2b116241497-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2b116241497-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2b116241497-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2b116241497-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2b116241497-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2b116241497-17">17</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-1"><span class="crayon-p"># plot activity durations by subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2b116241497-2"><span class="crayon-e">def </span><span class="crayon-e">plot_activity_durations_by_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-3"><span class="crayon-h"> </span><span class="crayon-p"># get unique subjects and activities</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2b116241497-4"><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-5"><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2b116241497-6"><span class="crayon-h"> </span><span class="crayon-p"># enumerate subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-7"><span class="crayon-h"> </span><span class="crayon-v">activity_windows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2b116241497-8"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-9"><span class="crayon-h"> </span><span class="crayon-p"># get data for one subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2b116241497-10"><span class="crayon-h"> </span><span class="crayon-v">_</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">subj_y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-11"><span class="crayon-h"> </span><span class="crayon-p"># count windows by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2b116241497-12"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-13"><span class="crayon-h"> </span><span class="crayon-v">activity_windows</span><span class="crayon-sy">[</span><span class="crayon-v">a</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">subj_y</span><span class="crayon-sy">[</span><span class="crayon-v">subj_y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">a</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2b116241497-14"><span class="crayon-h"> </span><span class="crayon-p"># organize durations into a list of lists</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-15"><span class="crayon-h"> </span><span class="crayon-v">durations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">activity_windows</span><span class="crayon-sy">[</span><span class="crayon-v">a</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2b116241497-16"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">durations</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">labels</span><span class="crayon-o">=</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2b116241497-17"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b2d125734943" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot durations of each activity by subject
from numpy import array
from numpy import dstack
from numpy import unique
from pandas import read_csv
from matplotlib import pyplot

# load a single file as a numpy array
def load_file(filepath):
	dataframe = read_csv(filepath, header=None, delim_whitespace=True)
	return dataframe.values

# load a list of files, such as x, y, z data for a given variable
def load_group(filenames, prefix=''):
	loaded = list()
	for name in filenames:
		data = load_file(prefix + name)
		loaded.append(data)
	# stack group so that features are the 3rd dimension
	loaded = dstack(loaded)
	return loaded

# load a dataset group, such as train or test
def load_dataset(group, prefix=''):
	filepath = prefix + group + '/Inertial Signals/'
	# load all 9 files as a single array
	filenames = list()
	# total acceleration
	filenames += ['total_acc_x_'+group+'.txt', 'total_acc_y_'+group+'.txt', 'total_acc_z_'+group+'.txt']
	# body acceleration
	filenames += ['body_acc_x_'+group+'.txt', 'body_acc_y_'+group+'.txt', 'body_acc_z_'+group+'.txt']
	# body gyroscope
	filenames += ['body_gyro_x_'+group+'.txt', 'body_gyro_y_'+group+'.txt', 'body_gyro_z_'+group+'.txt']
	# load input data
	X = load_group(filenames, filepath)
	# load class output
	y = load_file(prefix + group + '/y_'+group+'.txt')
	return X, y

# get all data for one subject
def data_for_subject(X, y, sub_map, sub_id):
	# get row indexes for the subject id
	ix = [i for i in range(len(sub_map)) if sub_map[i]==sub_id]
	# return the selected samples
	return X[ix, :, :], y[ix]

# convert a series of windows to a 1D list
def to_series(windows):
	series = list()
	for window in windows:
		# remove the overlap from the window
		half = int(len(window) / 2) - 1
		for value in window[-half:]:
			series.append(value)
	return series

# group data by activity
def data_by_activity(X, y, activities):
	# group windows by activity
	return {a:X[y[:,0]==a, :, :] for a in activities}

# plot activity durations by subject
def plot_activity_durations_by_subject(X, y, sub_map):
	# get unique subjects and activities
	subject_ids = unique(sub_map[:,0])
	activity_ids = unique(y[:,0])
	# enumerate subjects
	activity_windows = {a:list() for a in activity_ids}
	for sub_id in subject_ids:
		# get data for one subject
		_, subj_y = data_for_subject(X, y, sub_map, sub_id)
		# count windows by activity
		for a in activity_ids:
			activity_windows[a].append(len(subj_y[subj_y[:,0]==a]))
	# organize durations into a list of lists
	durations = [activity_windows[a] for a in activity_ids]
	pyplot.boxplot(durations, labels=activity_ids)
	pyplot.show()

# load training dataset
X, y = load_dataset('train', 'HARDataset/')
# load mapping of rows to subjects
sub_map = load_file('HARDataset/train/subject_train.txt')
# plot durations
plot_activity_durations_by_subject(X, y, sub_map)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-6">6</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-8">8</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-10">10</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-12">12</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-14">14</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-16">16</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-18">18</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-20">20</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-22">22</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-24">24</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-26">26</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-28">28</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-30">30</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-32">32</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-34">34</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-36">36</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-38">38</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-40">40</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-42">42</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-44">44</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-46">46</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-48">48</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-50">50</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-52">52</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-54">54</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-56">56</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-58">58</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-60">60</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-62">62</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-64">64</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-66">66</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-68">68</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-70">70</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-72">72</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-74">74</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-76">76</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-78">78</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-80">80</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-82">82</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2d125734943-84">84</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2d125734943-85">85</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-1"><span class="crayon-p"># plot durations of each activity by subject</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-t">array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">dstack</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-4"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-5"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-6"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-7"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-8"><span class="crayon-p"># load a single file as a numpy array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-9"><span class="crayon-e">def </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-10"><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-v">filepath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delim_whitespace</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-11"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">dataframe</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-12"> </div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-13"><span class="crayon-p"># load a list of files, such as x, y, z data for a given variable</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-14"><span class="crayon-e">def </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-15"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-16"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">name </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-17"><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-18"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-19"><span class="crayon-h"> </span><span class="crayon-p"># stack group so that features are the 3rd dimension</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-20"><span class="crayon-h"> </span><span class="crayon-v">loaded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dstack</span><span class="crayon-sy">(</span><span class="crayon-v">loaded</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-21"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">loaded</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-22"> </div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-23"><span class="crayon-p"># load a dataset group, such as train or test</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-24"><span class="crayon-e">def </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-v">group</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-o">=</span><span class="crayon-s">''</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-25"><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/Inertial Signals/'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-26"><span class="crayon-h"> </span><span class="crayon-p"># load all 9 files as a single array</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-27"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-28"><span class="crayon-h"> </span><span class="crayon-p"># total acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-29"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'total_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'total_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-30"><span class="crayon-h"> </span><span class="crayon-p"># body acceleration</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-31"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_acc_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_acc_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-32"><span class="crayon-h"> </span><span class="crayon-p"># body gyroscope</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-33"><span class="crayon-h"> </span><span class="crayon-v">filenames</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'body_gyro_x_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'body_gyro_z_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-34"><span class="crayon-h"> </span><span class="crayon-p"># load input data</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-35"><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_group</span><span class="crayon-sy">(</span><span class="crayon-v">filenames</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">filepath</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-36"><span class="crayon-h"> </span><span class="crayon-p"># load class output</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-37"><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-v">prefix</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">group</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'/y_'</span><span class="crayon-o">+</span><span class="crayon-v">group</span><span class="crayon-o">+</span><span class="crayon-s">'.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-38"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-39"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-40"><span class="crayon-p"># get all data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-41"><span class="crayon-e">def </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-42"><span class="crayon-h"> </span><span class="crayon-p"># get row indexes for the subject id</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-43"><span class="crayon-h"> </span><span class="crayon-v">ix</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">sub_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-44"><span class="crayon-h"> </span><span class="crayon-p"># return the selected samples</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-45"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-v">ix</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-46"> </div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-47"><span class="crayon-p"># convert a series of windows to a 1D list</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-48"><span class="crayon-e">def </span><span class="crayon-e">to_series</span><span class="crayon-sy">(</span><span class="crayon-v">windows</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-49"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-50"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">window </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">windows</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-51"><span class="crayon-h"> </span><span class="crayon-p"># remove the overlap from the window</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-52"><span class="crayon-h"> </span><span class="crayon-v">half</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">window</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-53"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">value </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">window</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">half</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-54"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">value</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-55"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">series</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-56"> </div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-57"><span class="crayon-p"># group data by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-58"><span class="crayon-e">def </span><span class="crayon-e">data_by_activity</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">activities</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-59"><span class="crayon-h"> </span><span class="crayon-p"># group windows by activity</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-60"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-v">X</span><span class="crayon-sy">[</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activities</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-61"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-62"><span class="crayon-p"># plot activity durations by subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-63"><span class="crayon-e">def </span><span class="crayon-e">plot_activity_durations_by_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-64"><span class="crayon-h"> </span><span class="crayon-p"># get unique subjects and activities</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-65"><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">sub_map</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-66"><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-67"><span class="crayon-h"> </span><span class="crayon-p"># enumerate subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-68"><span class="crayon-h"> </span><span class="crayon-v">activity_windows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">a</span><span class="crayon-o">:</span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-69"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">subject_ids</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-70"><span class="crayon-h"> </span><span class="crayon-p"># get data for one subject</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-71"><span class="crayon-h"> </span><span class="crayon-v">_</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">subj_y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">data_for_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_id</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-72"><span class="crayon-h"> </span><span class="crayon-p"># count windows by activity</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-73"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-74"><span class="crayon-h"> </span><span class="crayon-v">activity_windows</span><span class="crayon-sy">[</span><span class="crayon-v">a</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">subj_y</span><span class="crayon-sy">[</span><span class="crayon-v">subj_y</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-v">a</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-75"><span class="crayon-h"> </span><span class="crayon-p"># organize durations into a list of lists</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-76"><span class="crayon-h"> </span><span class="crayon-v">durations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">activity_windows</span><span class="crayon-sy">[</span><span class="crayon-v">a</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">activity_ids</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-77"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">durations</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">labels</span><span class="crayon-o">=</span><span class="crayon-v">activity_ids</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-78"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-79"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-80"><span class="crayon-p"># load training dataset</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-81"><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-s">'train'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'HARDataset/'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-82"><span class="crayon-p"># load mapping of rows to subjects</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-83"><span class="crayon-v">sub_map</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/train/subject_train.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2d125734943-84"><span class="crayon-p"># plot durations</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2d125734943-85"><span class="crayon-e">plot_activity_durations_by_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0041 seconds] -->
<p>Running the example creates six box plots, one for each activity.</p>
<p>Each boxplot summarizes how long (in rows or the number of windows) subjects in the training dataset spent on each activity.</p>
<p>We can see that the subjects spent more time on stationary activities (4, 5 and 6) and less time on the in motion activities (1, 2 and 3), with the distribution for 3 being the smallest, or where time was spent least.</p>
<p>The spread across the activities is not large, suggesting little need to trim the longer duration activities or oversampling of the in-motion activities. Although, these approaches remain available if skill of a predictive model on the in-motion activities is generally worse.</p>
<div class="wp-caption aligncenter" id="attachment_6180" style="width: 1290px"><img alt="Boxplot of activity durations per subject on train set" class="size-full wp-image-6180" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-train-set.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-train-set.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-train-set-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-train-set-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-train-set-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Boxplot of activity durations per subject on train set</p></div>
<p>We can create a similar boxplot for the training data with the following additional lines.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0ca682c0b2f644263048" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load test dataset
X, y = load_dataset('test', 'HARDataset/')
# load mapping of rows to subjects
sub_map = load_file('HARDataset/test/subject_test.txt')
# plot durations
plot_activity_durations_by_subject(X, y, sub_map)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0ca682c0b2f644263048-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2f644263048-2">2</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2f644263048-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2f644263048-4">4</div><div class="crayon-num" data-line="crayon-5c0ca682c0b2f644263048-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0ca682c0b2f644263048-6">6</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0ca682c0b2f644263048-1"><span class="crayon-p"># load test dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2f644263048-2"><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_dataset</span><span class="crayon-sy">(</span><span class="crayon-s">'test'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'HARDataset/'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2f644263048-3"><span class="crayon-p"># load mapping of rows to subjects</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2f644263048-4"><span class="crayon-v">sub_map</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">load_file</span><span class="crayon-sy">(</span><span class="crayon-s">'HARDataset/test/subject_test.txt'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0ca682c0b2f644263048-5"><span class="crayon-p"># plot durations</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0ca682c0b2f644263048-6"><span class="crayon-e">plot_activity_durations_by_subject</span><span class="crayon-sy">(</span><span class="crayon-v">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sub_map</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>Running the updated example shows a similar relationship between activities.</p>
<p>This is encouraging, suggesting that indeed the test and training dataset are reasonably representative of the whole dataset.</p>
<div class="wp-caption aligncenter" id="attachment_6181" style="width: 1290px"><img alt="Boxplot of activity durations per subject on test set" class="size-full wp-image-6181" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-test-set.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-test-set.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-test-set-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-test-set-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/Boxplot-of-activity-durations-per-subject-on-test-set-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Boxplot of activity durations per subject on test set</p></div>
<p>Now that we have explored the dataset, we can suggest some ideas for how it may be modeled.</p>
<h2>10. Approach to Modeling</h2>
<p>In this section, we summarize some approaches to modeling the activity recognition dataset.</p>
<p>These ideas are divided into the main themes of a project.</p>
<h3>Problem Framing</h3>
<p>The first important consideration is the framing of the prediction problem.</p>
<p>The framing of the problem as described in the original work is the prediction of activity for a new subject given their movement data, based on the movement data and activities of known subjects.</p>
<p>We can summarize this as:</p>
<ul>
<li>Predict activity given a window of movement data.</li>
</ul>
<p>This is a reasonable and useful framing of the problem.</p>
<p>Some other possible ways to frame the provided data as a prediction problem include the following:</p>
<ul>
<li>Predict activity given a time step of movement data.</li>
<li>Predict activity given multiple windows of movement data.</li>
<li>Predict the activity sequence given multiple windows of movement data.</li>
<li>Predict activity given a sequence of movement data for a pre-segmented activity.</li>
<li>Predict activity cessation or transition given a time step of movement data.</li>
<li>Predict a stationary or non-stationary activity given a window of movement data</li>
</ul>
<p>Some of these framings may be too challenging or too easy.</p>
<p>Nevertheless, these framings provide additional ways to explore and understand the dataset.</p>
<h3>Data Preparation</h3>
<p>Some data preparation may be required prior to using the raw data to train a model.</p>
<p>The data already appears to have been scaled to the range [-1,1].</p>
<p>Some additional data transforms that could be performed prior to modeling include:</p>
<ul>
<li>Normalization across subjects.</li>
<li>Standardization per subject.</li>
<li>Standardization across subjects.</li>
<li>Axis feature selection.</li>
<li>Data type feature selection.</li>
<li>Signal outlier detection and removal.</li>
<li>Removing windows of over-represented activities.</li>
<li>Oversampling windows of under-represented activities.</li>
<li>Downsampling signal data to 1/4, 1/2, 1, 2 or other fractions of a section.</li>
</ul>
<h3>Predictive Modeling</h3>
<p>Generally, the problem is a time series multi-class classification problem.</p>
<p>As we have seen, it may also be framed as a binary classification problem and a multi-step time series classification problem.</p>
<p>The original paper explored the use of a classical machine learning algorithm on a version of the dataset where features were engineered from each window of data. Specifically, a modified support vector machine.</p>
<p>The results of an SVM on the feature-engineered version of the dataset may provide a baseline in performance on the problem.</p>
<p>Expanding from this point, the evaluation of multiple linear, non-linear, and ensemble machine learning algorithms on this version of the dataset may provide an improved benchmark.</p>
<p>The focus of the problem may be on the un-engineered or raw version of the dataset.</p>
<p>Here, a progression in model complexity may be explored in order to determine the most suitable model for the problem; some candidate models to explore include:</p>
<ul>
<li>Common linear, nonlinear, and ensemble machine learning algorithms.</li>
<li>Multilayer Perceptron.</li>
<li>Convolutional neural networks, specifically 1D CNNs.</li>
<li>Recurrent neural networks, specifically LSTMs.</li>
<li>Hybrids of CNNs and LSTMS such as the CNN-LSTM and the ConvLSTM.</li>
</ul>
<h3>Model Evaluation</h3>
<p>The evaluation of the model in the original paper involved using a train/test split of the data by subject with a 70% and 30% ratio.</p>
<p>Exploration of this pre-defined split of the data suggests that both sets are reasonably representative of the whole dataset.</p>
<p>Another alternative methodology may be to use leave-one-out cross-validation, or LOOCV, per subject. In addition to giving the data for each subject the opportunity for being used as the withheld test set, the approach would provide a population of 30 scores that can be averaged and summarized, which may offer a more robust result.</p>
<p>Model performance was presented using classification accuracy and a confusion matrix, both of which are suitable for the multi-class nature of the prediction problem.</p>
<p>Specifically, the confusion matrix will aid in determining whether some classes are easier or more challenging to predict than others, such as those for stationary activities versus those activities that involve motion.</p>
<h2>Further Reading</h2>
<p>This section provides more resources on the topic if you are looking to go deeper.</p>
<h3>Papers</h3>
<ul>
<li><a href="https://arxiv.org/abs/1707.03502">Deep Learning for Sensor-based Activity Recognition: A Survey</a>.</li>
<li><a href="https://upcommons.upc.edu/handle/2117/20897">A Public Domain Dataset for Human Activity Recognition Using Smartphones</a>, 2013.</li>
<li><a href="https://link.springer.com/chapter/10.1007/978-3-642-35395-6_30">Human Activity Recognition on Smartphones using a Multiclass Hardware-Friendly Support Vector Machine</a>, 2012.</li>
</ul>
<h3>API</h3>
<ul>
<li><a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">pandas.read_csv API</a></li>
<li><a href="https://www.numpy.org/devdocs/reference/generated/numpy.dstack.html">numpy.dstack API</a></li>
</ul>
<h3>Articles</h3>
<ul>
<li><a href="https://archive.ics.uci.edu/ml/datasets/human+activity+recognition+using+smartphones">Human Activity Recognition Using Smartphones Data Set, UCI Machine Learning Repository</a></li>
<li><a href="https://en.wikipedia.org/wiki/Activity_recognition">Activity recognition, Wikipedia</a></li>
<li><a href="https://www.youtube.com/watch?v=XOEN9W05_4A">Activity Recognition Experiment Using Smartphone Sensors</a>, Video.</li>
</ul>
<h2>Summary</h2>
<p>In this tutorial, you discovered the Activity Recognition Using Smartphones Dataset for time series classification and how to load and explore the dataset in order to make it ready for predictive modeling.</p>
<p>Specifically, you learned:</p>
<ul>
<li>How to download and load the dataset into memory.</li>
<li>How to use line plots, histograms, and boxplots to better understand the structure of the motion data.</li>
<li>How to model the problem including framing, data preparation, modeling, and evaluation.</li>
</ul>
<p>Do you have any questions?<br/>
Ask your questions in the comments below and I will do my best to answer.</p>
<div class="awac-wrapper"><div class="awac widget text-52"> <div class="textwidget"><p></p><center><br/>
<div class="woo-sc-hr"></div>
<h2>Develop Deep Learning models for Time Series Today!</h2>
<p><a href="/deep-learning-for-time-series-forecasting/"><img align="left" alt="Deep Learning for Time Series Forecasting" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/08/Cover-220.png" style="border: 0;"/></a></p>
<h4>Develop Your Own Forecasting models in Minutes</h4>
<p>…with just a few lines of python code</p>
<p>Discover how in my new Ebook:<br/>
<a href="/deep-learning-for-time-series-forecasting/">Deep Learning for Time Series Forecasting</a></p>
<p>It provides <strong>self-study tutorials</strong> on topics like: <em>CNNs</em>, <em>LSTMs</em>,<br/>
<em>Multivariate Forecasting</em>, <em>Multi-Step Forecasting</em> and much more…</p>
<h4>Finally Bring Deep Learning to your Time Series Forecasting Projects</h4>
<p>Skip the Academics. Just Results.</p>
<p><a href="/deep-learning-for-time-series-forecasting/">Click to learn more</a>.<br/>
</p><div class="woo-sc-hr"></div><br/>
</center>
</div>
</div></div><div class="simplesocialbuttons simplesocial-simple-icons simplesocialbuttons_inline simplesocialbuttons-align-left post-6164 post simplesocialbuttons-inline-no-animation">
<button class="ssb_tweet-icon" data-href="https://twitter.com/share?text=How+to+Model+Human+Activity+From+Smartphone+Data&amp;url=https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" rel="nofollow">
<span class="icon"><svg viewbox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h72v72H0z" fill="none"></path><path class="icon" d="M68.812 15.14c-2.348 1.04-4.87 1.744-7.52 2.06 2.704-1.62 4.78-4.186 5.757-7.243-2.53 1.5-5.33 2.592-8.314 3.176C56.35 10.59 52.948 9 49.182 9c-7.23 0-13.092 5.86-13.092 13.093 0 1.026.118 2.02.338 2.98C25.543 24.527 15.9 19.318 9.44 11.396c-1.125 1.936-1.77 4.184-1.77 6.58 0 4.543 2.312 8.552 5.824 10.9-2.146-.07-4.165-.658-5.93-1.64-.002.056-.002.11-.002.163 0 6.345 4.513 11.638 10.504 12.84-1.1.298-2.256.457-3.45.457-.845 0-1.666-.078-2.464-.23 1.667 5.2 6.5 8.985 12.23 9.09-4.482 3.51-10.13 5.605-16.26 5.605-1.055 0-2.096-.06-3.122-.184 5.794 3.717 12.676 5.882 20.067 5.882 24.083 0 37.25-19.95 37.25-37.25 0-.565-.013-1.133-.038-1.693 2.558-1.847 4.778-4.15 6.532-6.774z" fill="#fff"></path></svg></span><i class="simplesocialtxt">Tweet </i></button>
<button class="ssb_fbshare-icon" data-href="https://www.facebook.com/sharer/sharer.php?u=https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" target="_blank">
<span class="icon"><svg class="_1pbq" color="#ffffff" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path class="icon" d="M8 14H3.667C2.733 13.9 2 13.167 2 12.233V3.667A1.65 1.65 0 0 1 3.667 2h8.666A1.65 1.65 0 0 1 14 3.667v8.566c0 .934-.733 1.667-1.667 1.767H10v-3.967h1.3l.7-2.066h-2V6.933c0-.466.167-.9.867-.9H12v-1.8c.033 0-.933-.266-1.533-.266-1.267 0-2.434.7-2.467 2.133v1.867H6v2.066h2V14z" fill="#ffffff" fill-rule="evenodd"></path></svg></span>
<span class="simplesocialtxt">Share </span> </button>
<button class="ssb_linkedin-icon" data-href="https://www.linkedin.com/cws/share?url=https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
<span class="icon"> <svg enable-background="new -301.4 387.5 15 14.1" height="14.1px" id="Layer_1" version="1.1" viewbox="-301.4 387.5 15 14.1" width="15px" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"> <g id="XMLID_398_"> <path d="M-296.2,401.6c0-3.2,0-6.3,0-9.5h0.1c1,0,2,0,2.9,0c0.1,0,0.1,0,0.1,0.1c0,0.4,0,0.8,0,1.2 c0.1-0.1,0.2-0.3,0.3-0.4c0.5-0.7,1.2-1,2.1-1.1c0.8-0.1,1.5,0,2.2,0.3c0.7,0.4,1.2,0.8,1.5,1.4c0.4,0.8,0.6,1.7,0.6,2.5 c0,1.8,0,3.6,0,5.4v0.1c-1.1,0-2.1,0-3.2,0c0-0.1,0-0.1,0-0.2c0-1.6,0-3.2,0-4.8c0-0.4,0-0.8-0.2-1.2c-0.2-0.7-0.8-1-1.6-1 c-0.8,0.1-1.3,0.5-1.6,1.2c-0.1,0.2-0.1,0.5-0.1,0.8c0,1.7,0,3.4,0,5.1c0,0.2,0,0.2-0.2,0.2c-1,0-1.9,0-2.9,0 C-296.1,401.6-296.2,401.6-296.2,401.6z" fill="#FFFFFF" id="XMLID_399_"></path> <path d="M-298,401.6L-298,401.6c-1.1,0-2.1,0-3,0c-0.1,0-0.1,0-0.1-0.1c0-3.1,0-6.1,0-9.2 c0-0.1,0-0.1,0.1-0.1c1,0,2,0,2.9,0h0.1C-298,395.3-298,398.5-298,401.6z" fill="#FFFFFF" id="XMLID_400_"></path> <path d="M-299.6,390.9c-0.7-0.1-1.2-0.3-1.6-0.8c-0.5-0.8-0.2-2.1,1-2.4c0.6-0.2,1.2-0.1,1.8,0.2 c0.5,0.4,0.7,0.9,0.6,1.5c-0.1,0.7-0.5,1.1-1.1,1.3C-299.1,390.8-299.4,390.8-299.6,390.9L-299.6,390.9z" fill="#FFFFFF" id="XMLID_401_"></path> </g> </svg> </span>
<span class="simplesocialtxt">Share</span> </button>
<button class="ssb_gplus-icon" data-href="https://plus.google.com/share?url=https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
<span class="icon"><svg class="ozWidgetRioButtonSvg_ ozWidgetRioButtonPlusOne_" height="18px" preserveaspectratio="xMidYMid meet" version="1.1" viewbox="-10 -6 60 36" width="30px" xmlns="http://www.w3.org/2000/svg"><path d="M30 7h-3v4h-4v3h4v4h3v-4h4v-3h-4V7z"></path><path d="M11 9.9v4h5.4C16 16.3 14 18 11 18c-3.3 0-5.9-2.8-5.9-6S7.7 6 11 6c1.5 0 2.8.5 3.8 1.5l2.9-2.9C15.9 3 13.7 2 11 2 5.5 2 1 6.5 1 12s4.5 10 10 10c5.8 0 9.6-4.1 9.6-9.8 0-.7-.1-1.5-.2-2.2H11z"></path></svg></span>
<span class="simplesocialtxt">Google Plus </span></button>
</div>
</section><!-- /.entry -->
<div class="fix"></div>
<aside id="post-author">
<div class="profile-image"><img alt="" class="avatar avatar-80 photo" height="80" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=160&amp;d=mm&amp;r=g 2x" width="80"/></div>
<div class="profile-content">
<h4>About Jason Brownlee</h4>
		Jason Brownlee, PhD is a machine learning specialist who teaches developers how to get results with modern machine learning methods via hands-on tutorials.				<div class="profile-link">
<a href="https://machinelearningmastery.com/author/jasonb/">
				View all posts by Jason Brownlee <span class="meta-nav">→</span> </a>
</div><!--#profile-link-->
</div>
<div class="fix"></div>
</aside>
<div class="post-utility"></div>
</article><!-- /.post -->
<div class="post-entries">
<div class="nav-prev fl"><a href="https://machinelearningmastery.com/spot-check-machine-learning-algorithms-in-python/" rel="prev"><i class="fa fa-angle-left"></i> How to Develop a Reusable Framework to Spot-Check Algorithms in Python</a></div>
<div class="nav-next fr"><a href="https://machinelearningmastery.com/evaluate-machine-learning-algorithms-for-human-activity-recognition/" rel="next">How to Evaluate Machine Learning Algorithms for Human Activity Recognition <i class="fa fa-angle-right"></i></a></div>
<div class="fix"></div>
</div>
<div id="comments"> <h3 id="comments-title">25 Responses to <em>How to Model Human Activity From Smartphone Data</em></h3>
<ol class="commentlist">
<li class="comment even thread-even depth-1" id="comment-449095">
<div class="comment-container" id="li-comment-449095">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/58d436743df7b047b1e29862e1fa1cdf?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/58d436743df7b047b1e29862e1fa1cdf?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Sid</span>
<span class="date">September 17, 2018 at 1:14 pm</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449095" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Jason, nice peace of work like always. I only wish that you have had the code for communicating to the phone (android for instance) instead of loading sampled data.</p>
<div class="reply">
<a aria-label="Reply to Sid" class="comment-reply-link" href="#comment-449095" onclick='return addComment.moveForm( "comment-449095", "449095", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor odd alt depth-2" id="comment-449102">
<div class="comment-container" id="li-comment-449102">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 17, 2018 at 2:08 pm</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449102" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Thanks.</p>
<p>Good suggestion!</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449102" onclick='return addComment.moveForm( "comment-449102", "449102", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
<li class="comment even depth-2" id="comment-449500">
<div class="comment-container" id="li-comment-449500">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/52622940cc8b78d78a14efe3e9c6e5a0?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/52622940cc8b78d78a14efe3e9c6e5a0?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Noam Cohen</span>
<span class="date">September 21, 2018 at 6:45 pm</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449500" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>There are several open sources  demoing how to collect data from the phone (cf github).<br/>
In my app (under development) I am collecting accel data (using a sliding window of 10 sec), and upon certain trigger, save to temporary file and upload to google cloud. Not trivial task due to all the pesky security.<br/>
If this is on interest to anyone, please let me know and I will try to derive a sample app.</p>
<div class="reply">
<a aria-label="Reply to Noam Cohen" class="comment-reply-link" href="#comment-449500" onclick='return addComment.moveForm( "comment-449500", "449500", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor odd alt depth-3" id="comment-449535">
<div class="comment-container" id="li-comment-449535">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 22, 2018 at 6:27 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449535" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Sounds like a challenging problem!</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449535" onclick='return addComment.moveForm( "comment-449535", "449535", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
<li class="comment even depth-3" id="comment-450517">
<div class="comment-container" id="li-comment-450517">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/d182d983c8a381dd4817c77aaee05693?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/d182d983c8a381dd4817c77aaee05693?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Shishir Pandey</span>
<span class="date">October 3, 2018 at 3:51 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-450517" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>please help me how to recognize activity via application</p>
<div class="reply">
<a aria-label="Reply to Shishir Pandey" class="comment-reply-link" href="#comment-450517" onclick='return addComment.moveForm( "comment-450517", "450517", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-449106">
<div class="comment-container" id="li-comment-449106">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/e7fe60e8308fbe4990419ade90f04196?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/e7fe60e8308fbe4990419ade90f04196?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Rebeen</span>
<span class="date">September 17, 2018 at 2:57 pm</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449106" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Thank you very much ,</p>
<p>please if you have any article about activity recognition or anomaly detection from activity let me know thank you again.</p>
<div class="reply">
<a aria-label="Reply to Rebeen" class="comment-reply-link" href="#comment-449106" onclick='return addComment.moveForm( "comment-449106", "449106", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-449169">
<div class="comment-container" id="li-comment-449169">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 18, 2018 at 6:10 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449169" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>I have a number of posts coming on activity recognition.</p>
<p>I also cover the topic in detail in this book:<br/>
<a href="https://machinelearningmastery.com/deep-learning-for-time-series-forecasting/" rel="nofollow">https://machinelearningmastery.com/deep-learning-for-time-series-forecasting/</a></p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449169" onclick='return addComment.moveForm( "comment-449169", "449169", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="comment-449127">
<div class="comment-container" id="li-comment-449127">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/48717b78af86486b7021264b95872609?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/48717b78af86486b7021264b95872609?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="https://www.aeplglobe.com/" rel="external nofollow">AEPL</a></span>
<span class="date">September 17, 2018 at 8:18 pm</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449127" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Thanks for sharing it.</p>
<div class="reply">
<a aria-label="Reply to AEPL" class="comment-reply-link" href="#comment-449127" onclick='return addComment.moveForm( "comment-449127", "449127", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-449174">
<div class="comment-container" id="li-comment-449174">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 18, 2018 at 6:11 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449174" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>You’re welcome.</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449174" onclick='return addComment.moveForm( "comment-449174", "449174", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-449462">
<div class="comment-container" id="li-comment-449462">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/0bcfa222fcfea5b8d7f87f9ee4cb7308?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/0bcfa222fcfea5b8d7f87f9ee4cb7308?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Samih Eisa</span>
<span class="date">September 21, 2018 at 8:11 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449462" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Thank you Jason.</p>
<div class="reply">
<a aria-label="Reply to Samih Eisa" class="comment-reply-link" href="#comment-449462" onclick='return addComment.moveForm( "comment-449462", "449462", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-449468">
<div class="comment-container" id="li-comment-449468">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 21, 2018 at 10:55 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449468" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>You’re welcome.</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449468" onclick='return addComment.moveForm( "comment-449468", "449468", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="comment-449499">
<div class="comment-container" id="li-comment-449499">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/52622940cc8b78d78a14efe3e9c6e5a0?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/52622940cc8b78d78a14efe3e9c6e5a0?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Noam Cohen</span>
<span class="date">September 21, 2018 at 6:39 pm</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449499" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Is there a similar dataset for falls of sorts? I found a lot of references regarding fall detection of elderly people but not of younger (20-60 year old). Specifically I want to identify fall during riding (which is NOT easier as one expects since I don’t have velocity data).</p>
<p>Thanks for the blog posts!</p>
<div class="reply">
<a aria-label="Reply to Noam Cohen" class="comment-reply-link" href="#comment-449499" onclick='return addComment.moveForm( "comment-449499", "449499", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-449534">
<div class="comment-container" id="li-comment-449534">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 22, 2018 at 6:27 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449534" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>I expect there is, I don’t know off hand, perhaps try a search?</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449534" onclick='return addComment.moveForm( "comment-449534", "449534", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-449501">
<div class="comment-container" id="li-comment-449501">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/6e84619438fd508e20631491d1eff28d?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/6e84619438fd508e20631491d1eff28d?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">servomac</span>
<span class="date">September 21, 2018 at 6:54 pm</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449501" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>I have implemented a model using Keras to model a LSTM for this same problem, you can take a look at <a href="https://github.com/servomac/Human-Activity-Recognition" rel="nofollow">https://github.com/servomac/Human-Activity-Recognition</a>.</p>
<div class="reply">
<a aria-label="Reply to servomac" class="comment-reply-link" href="#comment-449501" onclick='return addComment.moveForm( "comment-449501", "449501", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-449536">
<div class="comment-container" id="li-comment-449536">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 22, 2018 at 6:27 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449536" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Nice work!</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449536" onclick='return addComment.moveForm( "comment-449536", "449536", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="comment-449589">
<div class="comment-container" id="li-comment-449589">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/6d86cca75bb4cc7fd401476b178e56f2?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/6d86cca75bb4cc7fd401476b178e56f2?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Aman Ullah</span>
<span class="date">September 23, 2018 at 2:13 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449589" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Hi </p>
<p>I have a question: If a research is interested in actual data so why researcher transforms data. Transform have different patterns and model.</p>
<div class="reply">
<a aria-label="Reply to Aman Ullah" class="comment-reply-link" href="#comment-449589" onclick='return addComment.moveForm( "comment-449589", "449589", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-449603">
<div class="comment-container" id="li-comment-449603">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 23, 2018 at 6:40 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449603" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Yes, we transform data to better expose the structure of the patterns in the data to the learning algorithm. No other reason.</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449603" onclick='return addComment.moveForm( "comment-449603", "449603", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-449662">
<div class="comment-container" id="li-comment-449662">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/b1af8f338c231e6bd0f06495b724ef47?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b1af8f338c231e6bd0f06495b724ef47?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="https://www.engineeringbigdata.com/" rel="external nofollow">John Wingate</a></span>
<span class="date">September 24, 2018 at 7:40 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449662" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Awesome post on human activity recognition.</p>
<div class="reply">
<a aria-label="Reply to John Wingate" class="comment-reply-link" href="#comment-449662" onclick='return addComment.moveForm( "comment-449662", "449662", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-449664">
<div class="comment-container" id="li-comment-449664">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">September 24, 2018 at 8:37 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-449664" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Thanks John!</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-449664" onclick='return addComment.moveForm( "comment-449664", "449664", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="comment-451030">
<div class="comment-container" id="li-comment-451030">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/d182d983c8a381dd4817c77aaee05693?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/d182d983c8a381dd4817c77aaee05693?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Shishir Pandey</span>
<span class="date">October 9, 2018 at 5:35 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-451030" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>i need to recognize human activity  in real time via smart phone ?please help me with it.</p>
<div class="reply">
<a aria-label="Reply to Shishir Pandey" class="comment-reply-link" href="#comment-451030" onclick='return addComment.moveForm( "comment-451030", "451030", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-451061">
<div class="comment-container" id="li-comment-451061">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">October 9, 2018 at 8:46 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-451061" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>I don’t have examples that run on smartphones, sorry.</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-451061" onclick='return addComment.moveForm( "comment-451061", "451061", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-456860">
<div class="comment-container" id="li-comment-456860">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/b21d54103531861ff5f43242d7a56f87?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b21d54103531861ff5f43242d7a56f87?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Joe</span>
<span class="date">December 2, 2018 at 2:42 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-456860" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Hey there!<br/>
I’m using the Wireless Sensor Data Mining (WISDM) dataset which include:<br/>
<a href="http://www.cis.fordham.edu/wisdm/dataset.php" rel="nofollow">http://www.cis.fordham.edu/wisdm/dataset.php</a><br/>
Number of examples: 1,098,207<br/>
Number of attributes: 6<br/>
Class Distribution<br/>
Walking: 424,400 (38.6%)<br/>
Jogging: 342,177 (31.2%)<br/>
Upstairs: 122,869 (11.2%)<br/>
Downstairs: 100,427 (9.1%)<br/>
Sitting: 59,939 (5.5%)<br/>
Standing: 48,395 (4.4%)<br/>
My question is about data preparation for this dataset.<br/>
I’m about to use CONV2D-LSTM network, so I choose to pick the size of 90×3.<br/>
The way I’m doing this is just move a 90×3 window with 45 step over data vertically.<br/>
First of all does this overlapping (45) help?<br/>
Then I pick 60% of data for training, 20% for test and 20% for validation. The way is pick 60%,20% and 20% of each person’s data to be sure about each person (36) has it’s share in training and testing and validation<br/>
Does my Idea OK?<br/>
Thanks</p>
<div class="reply">
<a aria-label="Reply to Joe" class="comment-reply-link" href="#comment-456860" onclick='return addComment.moveForm( "comment-456860", "456860", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-2" id="comment-456900">
<div class="comment-container" id="li-comment-456900">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">December 2, 2018 at 6:22 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-456900" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>I’m not familiar with this dataset, sorry. I recommend experimenting and confirming your chosen configuration is stable.</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-456900" onclick='return addComment.moveForm( "comment-456900", "456900", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment odd alt depth-3" id="comment-456916">
<div class="comment-container" id="li-comment-456916">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/b21d54103531861ff5f43242d7a56f87?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b21d54103531861ff5f43242d7a56f87?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name">Joe</span>
<span class="date">December 2, 2018 at 8:50 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-456916" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>Thanks.<br/>
It’s my master’s thesis and I consider Your answer as a good point.<br/>
I appreciate that<br/>
And as a professional, what’s your idea about how many layer is suitable for this kind of data and activities ? I’m using CONV2D(as a feature extractor) and LSTM.</p>
<div class="reply">
<a aria-label="Reply to Joe" class="comment-reply-link" href="#comment-456916" onclick='return addComment.moveForm( "comment-456916", "456916", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
<ul class="children">
<li class="comment byuser comment-author-jasonb bypostauthor even depth-4" id="comment-457038">
<div class="comment-container" id="li-comment-457038">
<div class="avatar"><img alt="" class="avatar avatar-40 photo" height="40" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g 2x" width="40"/></div>
<div class="comment-head">
<span class="name"><a class="url" href="http://MachineLearningMastery.com" rel="external nofollow">Jason Brownlee</a></span>
<span class="date">December 3, 2018 at 6:37 am</span>
<span class="perma"><a href="https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/#comment-457038" title="Direct link to this comment">#</a></span>
<span class="edit"></span>
</div><!-- /.comment-head -->
<div class="comment-entry">
<p>I recommend testing a suite of network configurations/number of layers in order to see what works best for your specific dataset.</p>
<div class="reply">
<a aria-label="Reply to Jason Brownlee" class="comment-reply-link" href="#comment-457038" onclick='return addComment.moveForm( "comment-457038", "457038", "respond", "6164" )' rel="nofollow">Reply</a> </div><!-- /.reply -->
</div><!-- /comment-entry -->
</div><!-- /.comment-container -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ol>
</div> <div class="comment-respond" id="respond">
<h3 class="comment-reply-title" id="reply-title">Leave a Reply <small><a href="/how-to-model-human-activity-from-smartphone-data/#respond" id="cancel-comment-reply-link" rel="nofollow" style="display:none;">Click here to cancel reply.</a></small></h3> <form action="https://machinelearningmastery.com/wp-comments-post.php?wpe-comment-post=mlmastery" class="comment-form" id="commentform" method="post">
<p class="comment-form-comment"><label class="hide" for="comment">Comment</label> <textarea cols="50" id="comment" maxlength="65525" name="comment" required="required" rows="10" tabindex="4"></textarea></p><p class="comment-form-author"><input aria-required="true" class="txt" id="author" name="author" size="30" tabindex="1" type="text" value=""/><label for="author">Name <span class="required">(required)</span></label> </p>
<p class="comment-form-email"><input aria-required="true" class="txt" id="email" name="email" size="30" tabindex="2" type="text" value=""/><label for="email">Email (will not be published) <span class="required">(required)</span></label> </p>
<p class="comment-form-url"><input class="txt" id="url" name="url" size="30" tabindex="3" type="text" value=""/><label for="url">Website</label></p>
<p class="form-submit"><input class="submit" id="submit" name="submit" type="submit" value="Submit Comment"/> <input id="comment_post_ID" name="comment_post_ID" type="hidden" value="6164"/>
<input id="comment_parent" name="comment_parent" type="hidden" value="0"/>
</p><p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" type="hidden" value="e92f36cc69"/></p><p style="display: none;"><input id="ak_js" name="ak_js" type="hidden" value="126"/></p> </form>
</div><!-- #respond -->
</section><!-- /#main -->
<aside id="sidebar">
<div class="widget widget_woo_blogauthorinfo" id="woo_blogauthorinfo-2"><h3>Welcome to Machine Learning Mastery!</h3><span class="left"><img alt="" class="avatar avatar-100 photo" height="100" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=100&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=200&amp;d=mm&amp;r=g 2x" width="100"/></span>
<p>Hi, I'm Jason Brownlee, PhD
<br/>
I write tutorials to help developers (<i>like you</i>) get results with machine learning.</p>
<p><a href="/about">Read More</a></p>
<div class="fix"></div>
</div><div class="widget widget_text" id="text-51"> <div class="textwidget"><p></p><center><br/>
<strong>Deep Learning for Time Series</strong><br/>
Forecast the future with MLPs, CNNs, and LSTMs.
<p><a href="/deep-learning-for-time-series-forecasting/">Click to Get Started Now!</a><br/>
<a href="/deep-learning-for-time-series-forecasting/"><img src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/08/Cover-220.png"/></a><br/>
</p></center>
</div>
</div>
<div class="widget widget_woo_tabs" id="woo_tabs-2"> <div id="tabs">
<ul class="wooTabs">
<li class="popular"><a href="#tab-pop">Popular</a></li> </ul>
<div class="clear"></div>
<div class="boxes box inside">
<ul class="list" id="tab-pop">
<li>
<a href="https://machinelearningmastery.com/develop-neural-machine-translation-system-keras/" title="How to Develop a Neural Machine Translation System from Scratch"><img alt="How to Develop a Neural Machine Translation System in Keras" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/01/How-to-Develop-a-Neural-Machine-Translation-System-in-Keras-150x150.jpg" title="How to Develop a Neural Machine Translation System from Scratch" width="45"/></a> <a href="https://machinelearningmastery.com/develop-neural-machine-translation-system-keras/" title="How to Develop a Neural Machine Translation System from Scratch">How to Develop a Neural Machine Translation System from Scratch</a>
<span class="meta">January 10, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/classification-versus-regression-in-machine-learning/" title="Difference Between Classification and Regression in Machine Learning"><img alt="Difference Between Classification and Regression in Machine Learning" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2017/12/Difference-Between-Classification-and-Regression-in-Machine-Learning-150x150.jpg" title="Difference Between Classification and Regression in Machine Learning" width="45"/></a> <a href="https://machinelearningmastery.com/classification-versus-regression-in-machine-learning/" title="Difference Between Classification and Regression in Machine Learning">Difference Between Classification and Regression in Machine Learning</a>
<span class="meta">December 11, 2017</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/working-machine-learning-problem/" title="So, You are Working on a Machine Learning Problem..."><img alt="So, You are Working on a Machine Learning Problem..." class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/04/So-You-are-Working-on-a-Machine-Learning-Problem...-150x150.jpg" title="So, You are Working on a Machine Learning Problem..." width="45"/></a> <a href="https://machinelearningmastery.com/working-machine-learning-problem/" title="So, You are Working on a Machine Learning Problem…">So, You are Working on a Machine Learning Problem…</a>
<span class="meta">April 4, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/develop-n-gram-multichannel-convolutional-neural-network-sentiment-analysis/" title="How to Develop an N-gram Multichannel Convolutional Neural Network for Sentiment Analysis"><img alt="Plot of the Multichannel Convolutional Neural Network For Text" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2017/10/Plot-of-the-Multichannel-Convolutional-Neural-Network-For-Text-150x150.png" title="How to Develop an N-gram Multichannel Convolutional Neural Network for Sentiment Analysis" width="45"/></a> <a href="https://machinelearningmastery.com/develop-n-gram-multichannel-convolutional-neural-network-sentiment-analysis/" title="How to Develop an N-gram Multichannel Convolutional Neural Network for Sentiment Analysis">How to Develop an N-gram Multichannel Convolutional Neural Network for Sentiment Analysis</a>
<span class="meta">January 12, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/how-to-make-classification-and-regression-predictions-for-deep-learning-models-in-keras/" title="How to Make Predictions with Keras"><img alt="How to Make Classification and Regression Predictions for Deep Learning Models in Keras" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/04/How-to-Make-Classification-and-Regression-Predictions-for-Deep-Learning-Models-in-Keras-150x150.jpg" title="How to Make Predictions with Keras" width="45"/></a> <a href="https://machinelearningmastery.com/how-to-make-classification-and-regression-predictions-for-deep-learning-models-in-keras/" title="How to Make Predictions with Keras">How to Make Predictions with Keras</a>
<span class="meta">April 9, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" title="11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)"><img alt="11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/08/11-Classical-Time-Series-Forecasting-Methods-in-Python-Cheat-Sheet-150x150.jpg" title="11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)" width="45"/></a> <a href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" title="11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)">11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)</a>
<span class="meta">August 6, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/visualize-deep-learning-neural-network-model-keras/" title="How to Visualize a Deep Learning Neural Network Model in Keras"><img alt="How to Visualize a Deep Learning Neural Network Model in Keras" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2017/12/How-to-Visualize-a-Deep-Learning-Neural-Network-Model-in-Keras-150x150.jpg" title="How to Visualize a Deep Learning Neural Network Model in Keras" width="45"/></a> <a href="https://machinelearningmastery.com/visualize-deep-learning-neural-network-model-keras/" title="How to Visualize a Deep Learning Neural Network Model in Keras">How to Visualize a Deep Learning Neural Network Model in Keras</a>
<span class="meta">December 13, 2017</span>
<div class="fix"></div>
</li>
</ul>
</div><!-- /.boxes -->
</div><!-- /wooTabs -->
</div> <div class="widget_text widget widget_custom_html" id="custom_html-2"><h3>You might also like…</h3><div class="textwidget custom-html-widget"><ul>
<li><a href="/setup-python-environment-machine-learning-deep-learning-anaconda/">How to Install Python for Machine Learning</a></li>
<li><a href="/machine-learning-in-python-step-by-step/">Your First Machine Learning Project in Python</a></li>
<li><a href="/tutorial-first-neural-network-python-keras/">Your First Neural Network in Python</a></li>
<li><a href="/how-to-run-your-first-classifier-in-weka/">Your First Classifier in Weka</a></li>
<li><a href="/arima-for-time-series-forecasting-with-python/">Your First Time Series Forecasting Project</a></li>
</ul></div></div></aside><!-- /#sidebar -->
</div><!-- /#main-sidebar-container -->
</div><!-- /#content -->
<footer class="col-full" id="footer">
<div class="col-left" id="copyright">
<p>© 2018 Machine Learning Mastery. All Rights Reserved. </p> </div>
<div class="col-right" id="credit">
<p></p><p>
<a href="/privacy/">Privacy</a> | 
<a href="/disclaimer/">Disclaimer</a> | 
<a href="/terms-of-service/">Terms</a> | 
<a href="/contact/">Contact</a>
</p> </div>
</footer>
</div><!-- /#inner-wrapper -->
</div><!-- /#wrapper -->
<div class="fix"></div><!--/.fix-->
<!-- Drip -->
<script type="text/javascript">
  var _dcq = _dcq || [];
  var _dcs = _dcs || {};
  _dcs.account = '9556588';

  (function() {
    var dc = document.createElement('script');
    dc.type = 'text/javascript'; dc.async = true;
    dc.src = '//tag.getdrip.com/9556588.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(dc, s);
  })();
</script>
<!-- end Drip --><!-- Woo Tabs Widget -->
<script type="text/javascript">
jQuery(document).ready(function(){
	// UL = .wooTabs
	// Tab contents = .inside

	var tag_cloud_class = '#tagcloud';

	//Fix for tag clouds - unexpected height before .hide()
	var tag_cloud_height = jQuery( '#tagcloud').height();

	jQuery( '.inside ul li:last-child').css( 'border-bottom','0px' ); // remove last border-bottom from list in tab content
	jQuery( '.wooTabs').each(function(){
		jQuery(this).children( 'li').children( 'a:first').addClass( 'selected' ); // Add .selected class to first tab on load
	});
	jQuery( '.inside > *').hide();
	jQuery( '.inside > *:first-child').show();

	jQuery( '.wooTabs li a').click(function(evt){ // Init Click funtion on Tabs

		var clicked_tab_ref = jQuery(this).attr( 'href' ); // Strore Href value

		jQuery(this).parent().parent().children( 'li').children( 'a').removeClass( 'selected' ); //Remove selected from all tabs
		jQuery(this).addClass( 'selected' );
		jQuery(this).parent().parent().parent().children( '.inside').children( '*').hide();

		jQuery( '.inside ' + clicked_tab_ref).fadeIn(500);

		 evt.preventDefault();

	})
})
</script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/js/comment-reply.min.js?ver=4.9.8" type="text/javascript"></script>
<script type="text/javascript">
/* <![CDATA[ */
var wpcf7 = {"apiSettings":{"root":"https:\/\/machinelearningmastery.com\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"},"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}},"cached":"1"};
/* ]]> */
</script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=5.0.5" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/js/wp-embed.min.js?ver=4.9.8" type="text/javascript"></script>
<script async="async" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/akismet/_inc/form.js?ver=4.1" type="text/javascript"></script>
<script type="text/javascript">		var ssb_admin_ajax = 'https://machinelearningmastery.com/wp-admin/admin-ajax.php';
		var ssb_post_id = 6164 ;
		var ssb_post_url = 'https://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/';
		var ssb_alternate_post_url = 'http://machinelearningmastery.com/how-to-model-human-activity-from-smartphone-data/';
		jQuery( document ).ready(function(){
		var is_ssb_used = jQuery('.simplesocialbuttons');
		if( is_ssb_used ) {

			var data = {
			'action': 'ssb_fetch_data',
			'postID': ssb_post_id
		};
			jQuery.post(ssb_admin_ajax, data, function(data, textStatus, xhr) {
				var array = JSON.parse(data);

				jQuery.each( array, function( index, value ){

					if( index == 'total' ){
						jQuery('.ssb_'+ index +'_counter').html(value + '<span>Shares</span>');
					}else{
						jQuery('.ssb_'+ index +'_counter').html(value);
					}
				});

			});
		}
		})

		document.addEventListener("DOMContentLoaded", function() {
			var if_ssb_exist = document.getElementsByClassName( "simplesocialbuttons" ).length > 0;
			if (if_ssb_exist) {
				ssbPlugin.fetchFacebookShares();
			}
		});;
		</script></body>
</html>