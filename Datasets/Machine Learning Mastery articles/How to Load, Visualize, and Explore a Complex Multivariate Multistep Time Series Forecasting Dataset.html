<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="utf-8"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<link href="https://machinelearningmastery.com/xmlrpc.php" rel="pingback"/>
<!--  Mobile viewport scale -->
<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=yes" name="viewport"/>
<!-- This site is optimized with the Yoast SEO plugin v9.2.1 - https://yoast.com/wordpress/plugins/seo/ -->
<title>How to Load, Visualize, and Explore a Complex Multivariate Multistep Time Series Forecasting Dataset</title>
<link href="https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" rel="canonical"/>
<link href="https://plus.google.com/u/0/b/117073416089354242117/+MachinelearningmasteryHome/" rel="publisher"/>
<meta content="en_US" property="og:locale"/>
<meta content="article" property="og:type"/>
<meta content="How to Load, Visualize, and Explore a Complex Multivariate Multistep Time Series Forecasting Dataset" property="og:title"/>
<meta content="Real-world time series forecasting is challenging for a whole host of reasons not limited to problem features such as having multiple input variables, the requirement to predict multiple time steps, and the need to perform the same type of prediction for multiple physical sites. The EMC Data Science Global Hackathon dataset, or the ‘Air Quality …" property="og:description"/>
<meta content="https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" property="og:url"/>
<meta content="Machine Learning Mastery" property="og:site_name"/>
<meta content="https://www.facebook.com/Machine-Learning-Mastery-1429846323896563/" property="article:publisher"/>
<meta content="https://www.facebook.com/jason.brownlee.39" property="article:author"/>
<meta content="Deep Learning for Time Series" property="article:section"/>
<meta content="2018-10-11T18:00:01+00:00" property="article:published_time"/>
<meta content="2018-08-30T00:34:08+00:00" property="article:modified_time"/>
<meta content="2018-08-30T00:34:08+00:00" property="og:updated_time"/>
<meta content="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-one-chunk.png" property="og:image"/>
<meta content="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-one-chunk.png" property="og:image:secure_url"/>
<meta content="1280" property="og:image:width"/>
<meta content="960" property="og:image:height"/>
<meta content="Box and whisker plots of target variables for one chunk" property="og:image:alt"/>
<script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Organization","url":"https:\/\/machinelearningmastery.com\/","sameAs":["https:\/\/www.facebook.com\/Machine-Learning-Mastery-1429846323896563\/","https:\/\/www.linkedin.com\/in\/jasonbrownlee","https:\/\/plus.google.com\/u\/0\/b\/117073416089354242117\/+MachinelearningmasteryHome\/","https:\/\/twitter.com\/TeachTheMachine"],"@id":"https:\/\/machinelearningmastery.com\/#organization","name":"Machine Learning Mastery","logo":"https:\/\/machinelearningmastery.com\/wp-content\/uploads\/2016\/09\/cropped-icon.png"}</script>
<!-- / Yoast SEO plugin. -->
<link href="//s.w.org" rel="dns-prefetch"/>
<link href="https://feeds.feedburner.com/MachineLearningMastery" rel="alternate" title="Machine Learning Mastery » Feed" type="application/rss+xml"/>
<link href="https://machinelearningmastery.com/comments/feed/" rel="alternate" title="Machine Learning Mastery » Comments Feed" type="application/rss+xml"/>
<link href="https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/feed/" rel="alternate" title="Machine Learning Mastery » How to Load, Visualize, and Explore a Complex Multivariate Multistep Time Series Forecasting Dataset Comments Feed" type="application/rss+xml"/>
<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/machinelearningmastery.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<style media="all" type="text/css">
.wpautoterms-footer{background-color:#ffffff;text-align:center;}
.wpautoterms-footer a{color:#000000;font-family:Arial, sans-serif;font-size:14px;}
.wpautoterms-footer .separator{color:#cccccc;font-family:Arial, sans-serif;font-size:14px;}</style>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta" id="crayon-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=_2.7.2_beta" id="crayon-theme-classic-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta" id="crayon-font-monaco-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/auto-terms-of-service-and-privacy-policy/css/wpautoterms.css?ver=4.9.8" id="wpautoterms_css-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.0.5" id="contact-form-7-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/simple-social-buttons/assets/css/front.css?ver=2.0.20" id="ssb-front-css-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/ultimate-faqs/css/ewd-ufaq-styles.css?ver=4.9.8" id="ewd-ufaq-style-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/ultimate-faqs/css/rrssb-min.css?ver=4.9.8" id="ewd-ufaq-rrssb-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/includes/integrations/testimonials/css/testimonials.css?ver=4.9.8" id="woo-testimonials-css-css" media="all" rel="stylesheet" type="text/css"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/style.css?ver=5.9.21" id="theme-stylesheet-css" media="all" rel="stylesheet" type="text/css"/>
<!--[if lt IE 9]>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/css/non-responsive.css" rel="stylesheet" type="text/css" />
<style type="text/css">.col-full, #wrapper { width: 960px; max-width: 960px; } #inner-wrapper { padding: 0; } body.full-width #header, #nav-container, body.full-width #content, body.full-width #footer-widgets, body.full-width #footer { padding-left: 0; padding-right: 0; } body.fixed-mobile #top, body.fixed-mobile #header-container, body.fixed-mobile #footer-container, body.fixed-mobile #nav-container, body.fixed-mobile #footer-widgets-container { min-width: 960px; padding: 0 1em; } body.full-width #content { width: auto; padding: 0 1em;}</style>
<![endif]-->
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery.js?ver=1.12.4" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1" type="text/javascript"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/machinelearningmastery.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/simple-social-buttons/assets/js/front.js?ver=2.0.20" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/includes/js/third-party.min.js?ver=4.9.8" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/includes/js/modernizr.min.js?ver=2.6.2" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/includes/js/general.min.js?ver=4.9.8" type="text/javascript"></script>
<link href="https://machinelearningmastery.com/wp-json/" rel="https://api.w.org/"/>
<link href="https://machinelearningmastery.com/xmlrpc.php?rsd" rel="EditURI" title="RSD" type="application/rsd+xml"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml"/>
<link href="https://machinelearningmastery.com/?p=6295" rel="shortlink"/>
<link href="https://machinelearningmastery.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fmachinelearningmastery.com%2Fhow-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset%2F" rel="alternate" type="application/json+oembed"/>
<link href="https://machinelearningmastery.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fmachinelearningmastery.com%2Fhow-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset%2F&amp;format=xml" rel="alternate" type="text/xml+oembed"/>
<!-- Start Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44039733-3', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->
<style media="screen">

        .simplesocialbuttons.simplesocialbuttons_inline .ssb-fb-like {
      margin: ;
    }
         /*inline margin*/
    
  
  
  
  
  
          .simplesocialbuttons.simplesocialbuttons_inline.simplesocial-simple-icons button{
         margin: ;
     }

          /*margin-digbar*/

  
  
  
  
 
   
   

</style>
<script type="text/javascript">
        var ajaxurl = 'https://machinelearningmastery.com/wp-admin/admin-ajax.php';
    </script>
<!-- Custom CSS Styling -->
<style type="text/css">
#logo .site-title, #logo .site-description { display:none; }
body {background-repeat:no-repeat;background-position:top left;background-attachment:scroll;border-top:0px solid #000000;}
#header {background-repeat:no-repeat;background-position:left top;margin-top:0px;margin-bottom:0px;padding-top:10px;padding-bottom:10px;border:0px solid ;}
#logo .site-title a {font:bold 40px/1em "Helvetica Neue", Helvetica, sans-serif;color:#222222;}
#logo .site-description {font:normal 13px/1em "Helvetica Neue", Helvetica, sans-serif;color:#999999;}
body, p { font:normal 14px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555; }
h1 { font:bold 28px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h2 { font:bold 24px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h3 { font:bold 20px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h4 { font:bold 16px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h5 { font:bold 14px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }h6 { font:bold 12px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#222222; }
.page-title, .post .title, .page .title {font:bold 28px/1.1em "Helvetica Neue", Helvetica, sans-serif;color:#222222;}
.post .title a:link, .post .title a:visited, .page .title a:link, .page .title a:visited {color:#222222}
.post-meta { font:normal 12px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#999999; }
.entry, .entry p{ font:normal 15px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555; }
.post-more {font:normal 13px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:;border-top:0px solid #e6e6e6;border-bottom:0px solid #e6e6e6;}
#post-author, #connect {border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;border-left:1px solid #e6e6e6;border-right:1px solid #e6e6e6;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#fafafa}
.nav-entries a, .woo-pagination { font:normal 13px/1em "Helvetica Neue", Helvetica, sans-serif;color:#888; }
.woo-pagination a, .woo-pagination a:hover {color:#888!important}
.widget h3 {font:bold 14px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#555555;border-bottom:1px solid #e6e6e6;}
.widget_recent_comments li, #twitter li { border-color: #e6e6e6;}
.widget p, .widget .textwidget { font:normal 13px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555; }
.widget {font:normal 13px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555;border-radius:0px;-moz-border-radius:0px;-webkit-border-radius:0px;}
#tabs .inside li a, .widget_woodojo_tabs .tabbable .tab-pane li a { font:bold 12px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#555555; }
#tabs .inside li span.meta, .widget_woodojo_tabs .tabbable .tab-pane li span.meta { font:300 11px/1.5em "Helvetica Neue", Helvetica, sans-serif;color:#999999; }
#tabs ul.wooTabs li a, .widget_woodojo_tabs .tabbable .nav-tabs li a { font:300 11px/2em "Helvetica Neue", Helvetica, sans-serif;color:#999999; }
@media only screen and (min-width:768px) {
ul.nav li a, #navigation ul.rss a, #navigation ul.cart a.cart-contents, #navigation .cart-contents #navigation ul.rss, #navigation ul.nav-search, #navigation ul.nav-search a { font:bold 18px/1.2em "Helvetica Neue", Helvetica, sans-serif;color:#4c89bf; } #navigation ul.rss li a:before, #navigation ul.nav-search a.search-contents:before { color:#4c89bf;}
#navigation ul.nav > li a:hover, #navigation ul.nav > li:hover a, #navigation ul.nav li ul li a, #navigation ul.cart > li:hover > a, #navigation ul.cart > li > ul > div, #navigation ul.cart > li > ul > div p, #navigation ul.cart > li > ul span, #navigation ul.cart .cart_list a, #navigation ul.nav li.current_page_item a, #navigation ul.nav li.current_page_parent a, #navigation ul.nav li.current-menu-ancestor a, #navigation ul.nav li.current-cat a, #navigation ul.nav li.current-menu-item a { color:#4c89bf!important; }
#navigation ul.nav > li a:hover, #navigation ul.nav > li:hover, #navigation ul.nav li ul, #navigation ul.cart li:hover a.cart-contents, #navigation ul.nav-search li:hover a.search-contents, #navigation ul.nav-search a.search-contents + ul, #navigation ul.cart a.cart-contents + ul, #navigation ul.nav li.current_page_item a, #navigation ul.nav li.current_page_parent a, #navigation ul.nav li.current-menu-ancestor a, #navigation ul.nav li.current-cat a, #navigation ul.nav li.current-menu-item a{background-color:#ffffff!important}
#navigation ul.nav li ul, #navigation ul.cart > li > ul > div  { border: 0px solid #dbdbdb; }
#navigation ul.nav > li:hover > ul  { left: 0; }
#navigation ul.nav > li  { border-right: 0px solid #dbdbdb; }#navigation ul.nav > li:hover > ul  { left: 0; }
#navigation { box-shadow: none; -moz-box-shadow: none; -webkit-box-shadow: none; }#navigation ul li:first-child, #navigation ul li:first-child a { border-radius:0px 0 0 0px; -moz-border-radius:0px 0 0 0px; -webkit-border-radius:0px 0 0 0px; }
#navigation {background:#ffffff;border-top:0px solid #dbdbdb;border-bottom:0px solid #dbdbdb;border-left:0px solid #dbdbdb;border-right:0px solid #dbdbdb;border-radius:0px; -moz-border-radius:0px; -webkit-border-radius:0px;}
#top ul.nav li a { font:normal 12px/1.6em "Helvetica Neue", Helvetica, sans-serif;color:#ddd; }
}
#footer, #footer p { font:normal 13px/1.4em "Helvetica Neue", Helvetica, sans-serif;color:#999999; }
#footer {border-top:1px solid #dbdbdb;border-bottom:0px solid ;border-left:0px solid ;border-right:0px solid ;border-radius:0px; -moz-border-radius:0px; -webkit-border-radius:0px;}
.magazine #loopedSlider .content h2.title a { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
.wooslider-theme-magazine .slide-title a { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
.magazine #loopedSlider .content .excerpt p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.wooslider-theme-magazine .slide-content p, .wooslider-theme-magazine .slide-excerpt p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.magazine .block .post .title a {font:bold 18px/1.2em Helvetica Neue, Helvetica, sans-serif;color:#222222; }
#loopedSlider.business-slider .content h2 { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
#loopedSlider.business-slider .content h2.title a { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
.wooslider-theme-business .has-featured-image .slide-title { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
.wooslider-theme-business .has-featured-image .slide-title a { font:bold 24px/1em Arial, sans-serif;color:#ffffff; }
#wrapper #loopedSlider.business-slider .content p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.wooslider-theme-business .has-featured-image .slide-content p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.wooslider-theme-business .has-featured-image .slide-excerpt p { font:300 13px/1.5em Arial, sans-serif;color:#cccccc; }
.archive_header { font:bold 18px/1em Arial, sans-serif;color:#222222; }
.archive_header {border-bottom:1px solid #e6e6e6;}
.archive_header .catrss { display:none; }
</style>
<!-- Woo Shortcodes CSS -->
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/functions/css/shortcodes.css" rel="stylesheet" type="text/css"/>
<!-- Custom Stylesheet -->
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/themes/canvas-new/custom.css" rel="stylesheet" type="text/css"/>
<!-- Theme version -->
<meta content="Canvas 5.9.21" name="generator"/>
<meta content="WooFramework 6.2.9" name="generator"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2016/09/cropped-icon-32x32.png" rel="icon" sizes="32x32"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2016/09/cropped-icon-192x192.png" rel="icon" sizes="192x192"/>
<link href="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2016/09/cropped-icon-180x180.png" rel="apple-touch-icon-precomposed"/>
<meta content="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2016/09/cropped-icon-270x270.png" name="msapplication-TileImage"/>
</head>
<body class="post-template-default single single-post postid-6295 single-format-standard chrome alt-style-default two-col-left width-960 two-col-left-960">
<div id="wrapper">
<div id="inner-wrapper">
<h3 class="nav-toggle icon"><a href="#navigation">Navigation</a></h3>
<header class="col-full" id="header">
<div id="logo">
<a href="https://machinelearningmastery.com/" title="Making developers awesome at machine learning"><img alt="Machine Learning Mastery" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/09/icon-100x100.png"/></a>
<span class="site-title"><a href="https://machinelearningmastery.com/">Machine Learning Mastery</a></span>
<span class="site-description">Making developers awesome at machine learning</span>
</div>
<div class="header-widget">
<div class="widget widget_text" id="text-53"> <div class="textwidget"><p>Want help with deep learning for time series? <a href="https://machinelearningmastery.lpages.co/deep-learning-for-time-series-forecasting-mini-course/">Take the FREE Mini-Course</a></p>
</div>
</div><div class="widget widget_search" id="search-3"><div class="search_main">
<form action="https://machinelearningmastery.com/" class="searchform" method="get">
<input class="field s" name="s" onblur="if (this.value == '') {this.value = 'Search...';}" onfocus="if (this.value == 'Search...') {this.value = '';}" type="text" value="Search..."/>
<input name="post_type" type="hidden" value="post"/>
<button class="fa fa-search submit" name="submit" type="submit" value="Search"></button>
</form>
<div class="fix"></div>
</div></div> </div>
</header>
<nav class="col-full" id="navigation" role="navigation">
<section class="menus">
<a class="nav-home" href="https://machinelearningmastery.com"><span>Home</span></a>
<h3>Main Menu</h3><ul class="nav fl" id="main-nav"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6503" id="menu-item-6503"><a href="https://machinelearningmastery.com/start-here/">Start Here</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-6501" id="menu-item-6501"><a href="https://machinelearningmastery.com/blog/">Blog</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-6506" id="menu-item-6506"><a href="#">Topics</a>
<ul class="sub-menu">
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6508" id="menu-item-6508"><a href="https://machinelearningmastery.com/category/deep-learning/">Deep Learning (Keras)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6511" id="menu-item-6511"><a href="https://machinelearningmastery.com/category/lstm/">LSTMs</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-6509" id="menu-item-6509"><a href="https://machinelearningmastery.com/category/deep-learning-time-series/">Deep Learning for Time Series</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6515" id="menu-item-6515"><a href="https://machinelearningmastery.com/category/natural-language-processing/">Deep Learning for NLP</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6512" id="menu-item-6512"><a href="https://machinelearningmastery.com/category/machine-learning-algorithms/">Understand Algorithms</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6507" id="menu-item-6507"><a href="https://machinelearningmastery.com/category/algorithms-from-scratch/">Code Algorithms (Python)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6513" id="menu-item-6513"><a href="https://machinelearningmastery.com/category/machine-learning-process/">Machine Learning Process</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6516" id="menu-item-6516"><a href="https://machinelearningmastery.com/category/python-machine-learning/">Python (scikit-learn)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6517" id="menu-item-6517"><a href="https://machinelearningmastery.com/category/r-machine-learning/">R (caret)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6522" id="menu-item-6522"><a href="https://machinelearningmastery.com/category/weka-machine-learning/">Weka (no code)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6518" id="menu-item-6518"><a href="https://machinelearningmastery.com/category/start-machine-learning/">Getting Started</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6510" id="menu-item-6510"><a href="https://machinelearningmastery.com/category/linear-algebra/">Linear Algebra</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6519" id="menu-item-6519"><a href="https://machinelearningmastery.com/category/statistical-methods/">Statistical Methods</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6520" id="menu-item-6520"><a href="https://machinelearningmastery.com/category/time-series/">Time Series (introductory)</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6523" id="menu-item-6523"><a href="https://machinelearningmastery.com/category/xgboost/">XGBoost</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6514" id="menu-item-6514"><a href="https://machinelearningmastery.com/category/machine-learning-resources/">Resources</a></li>
</ul>
</li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6502" id="menu-item-6502"><a href="https://machinelearningmastery.com/products/">Ebooks</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6500" id="menu-item-6500"><a href="https://machinelearningmastery.com/faq/">FAQ</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6504" id="menu-item-6504"><a href="https://machinelearningmastery.com/about/">About</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6505" id="menu-item-6505"><a href="https://machinelearningmastery.com/contact/">Contact</a></li>
</ul> <div class="side-nav">
</div><!-- /#side-nav -->
</section><!-- /.menus -->
<a class="nav-close" href="#top"><span>Return to Content</span></a>
</nav>
<!-- #content Starts -->
<div class="col-full" id="content">
<div id="main-sidebar-container">
<!-- #main Starts -->
<section id="main">
<article class="post-6295 post type-post status-publish format-standard has-post-thumbnail hentry category-deep-learning-time-series">
<header>
<h1 class="title entry-title">How to Load, Visualize, and Explore a Complex Multivariate Multistep Time Series Forecasting Dataset</h1> </header>
<div class="post-meta"><span class="small">By</span> <span class="author vcard"><span class="fn"><a href="https://machinelearningmastery.com/author/jasonb/" rel="author" title="Posts by Jason Brownlee">Jason Brownlee</a></span></span> <span class="small">on</span> <abbr class="date time published updated" title="2018-10-12T05:00:01+1100">October 12, 2018</abbr> <span class="small">in</span> <span class="categories"><a href="https://machinelearningmastery.com/category/deep-learning-time-series/" title="View all items in Deep Learning for Time Series">Deep Learning for Time Series</a></span> </div>
<section class="entry">
<div class="simplesocialbuttons simplesocial-simple-icons simplesocialbuttons_inline simplesocialbuttons-align-left post-6295 post simplesocialbuttons-inline-no-animation">
<button class="ssb_tweet-icon" data-href="https://twitter.com/share?text=How+to+Load%2C+Visualize%2C+and+Explore+a+Complex+Multivariate+Multistep+Time+Series+Forecasting+Dataset&amp;url=https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" rel="nofollow">
<span class="icon"><svg viewbox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h72v72H0z" fill="none"></path><path class="icon" d="M68.812 15.14c-2.348 1.04-4.87 1.744-7.52 2.06 2.704-1.62 4.78-4.186 5.757-7.243-2.53 1.5-5.33 2.592-8.314 3.176C56.35 10.59 52.948 9 49.182 9c-7.23 0-13.092 5.86-13.092 13.093 0 1.026.118 2.02.338 2.98C25.543 24.527 15.9 19.318 9.44 11.396c-1.125 1.936-1.77 4.184-1.77 6.58 0 4.543 2.312 8.552 5.824 10.9-2.146-.07-4.165-.658-5.93-1.64-.002.056-.002.11-.002.163 0 6.345 4.513 11.638 10.504 12.84-1.1.298-2.256.457-3.45.457-.845 0-1.666-.078-2.464-.23 1.667 5.2 6.5 8.985 12.23 9.09-4.482 3.51-10.13 5.605-16.26 5.605-1.055 0-2.096-.06-3.122-.184 5.794 3.717 12.676 5.882 20.067 5.882 24.083 0 37.25-19.95 37.25-37.25 0-.565-.013-1.133-.038-1.693 2.558-1.847 4.778-4.15 6.532-6.774z" fill="#fff"></path></svg></span><i class="simplesocialtxt">Tweet </i></button>
<button class="ssb_fbshare-icon" data-href="https://www.facebook.com/sharer/sharer.php?u=https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" target="_blank">
<span class="icon"><svg class="_1pbq" color="#ffffff" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path class="icon" d="M8 14H3.667C2.733 13.9 2 13.167 2 12.233V3.667A1.65 1.65 0 0 1 3.667 2h8.666A1.65 1.65 0 0 1 14 3.667v8.566c0 .934-.733 1.667-1.667 1.767H10v-3.967h1.3l.7-2.066h-2V6.933c0-.466.167-.9.867-.9H12v-1.8c.033 0-.933-.266-1.533-.266-1.267 0-2.434.7-2.467 2.133v1.867H6v2.066h2V14z" fill="#ffffff" fill-rule="evenodd"></path></svg></span>
<span class="simplesocialtxt">Share </span> </button>
<button class="ssb_linkedin-icon" data-href="https://www.linkedin.com/cws/share?url=https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
<span class="icon"> <svg enable-background="new -301.4 387.5 15 14.1" height="14.1px" id="Layer_1" version="1.1" viewbox="-301.4 387.5 15 14.1" width="15px" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"> <g id="XMLID_398_"> <path d="M-296.2,401.6c0-3.2,0-6.3,0-9.5h0.1c1,0,2,0,2.9,0c0.1,0,0.1,0,0.1,0.1c0,0.4,0,0.8,0,1.2 c0.1-0.1,0.2-0.3,0.3-0.4c0.5-0.7,1.2-1,2.1-1.1c0.8-0.1,1.5,0,2.2,0.3c0.7,0.4,1.2,0.8,1.5,1.4c0.4,0.8,0.6,1.7,0.6,2.5 c0,1.8,0,3.6,0,5.4v0.1c-1.1,0-2.1,0-3.2,0c0-0.1,0-0.1,0-0.2c0-1.6,0-3.2,0-4.8c0-0.4,0-0.8-0.2-1.2c-0.2-0.7-0.8-1-1.6-1 c-0.8,0.1-1.3,0.5-1.6,1.2c-0.1,0.2-0.1,0.5-0.1,0.8c0,1.7,0,3.4,0,5.1c0,0.2,0,0.2-0.2,0.2c-1,0-1.9,0-2.9,0 C-296.1,401.6-296.2,401.6-296.2,401.6z" fill="#FFFFFF" id="XMLID_399_"></path> <path d="M-298,401.6L-298,401.6c-1.1,0-2.1,0-3,0c-0.1,0-0.1,0-0.1-0.1c0-3.1,0-6.1,0-9.2 c0-0.1,0-0.1,0.1-0.1c1,0,2,0,2.9,0h0.1C-298,395.3-298,398.5-298,401.6z" fill="#FFFFFF" id="XMLID_400_"></path> <path d="M-299.6,390.9c-0.7-0.1-1.2-0.3-1.6-0.8c-0.5-0.8-0.2-2.1,1-2.4c0.6-0.2,1.2-0.1,1.8,0.2 c0.5,0.4,0.7,0.9,0.6,1.5c-0.1,0.7-0.5,1.1-1.1,1.3C-299.1,390.8-299.4,390.8-299.6,390.9L-299.6,390.9z" fill="#FFFFFF" id="XMLID_401_"></path> </g> </svg> </span>
<span class="simplesocialtxt">Share</span> </button>
<button class="ssb_gplus-icon" data-href="https://plus.google.com/share?url=https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
<span class="icon"><svg class="ozWidgetRioButtonSvg_ ozWidgetRioButtonPlusOne_" height="18px" preserveaspectratio="xMidYMid meet" version="1.1" viewbox="-10 -6 60 36" width="30px" xmlns="http://www.w3.org/2000/svg"><path d="M30 7h-3v4h-4v3h4v4h3v-4h4v-3h-4V7z"></path><path d="M11 9.9v4h5.4C16 16.3 14 18 11 18c-3.3 0-5.9-2.8-5.9-6S7.7 6 11 6c1.5 0 2.8.5 3.8 1.5l2.9-2.9C15.9 3 13.7 2 11 2 5.5 2 1 6.5 1 12s4.5 10 10 10c5.8 0 9.6-4.1 9.6-9.8 0-.7-.1-1.5-.2-2.2H11z"></path></svg></span>
<span class="simplesocialtxt">Google Plus </span></button>
</div>
<p>Real-world time series forecasting is challenging for a whole host of reasons not limited to problem features such as having multiple input variables, the requirement to predict multiple time steps, and the need to perform the same type of prediction for multiple physical sites.</p>
<p>The EMC Data Science Global Hackathon dataset, or the ‘<em>Air Quality Prediction</em>‘ dataset for short, describes weather conditions at multiple sites and requires a prediction of air quality measurements over the subsequent three days.</p>
<p>In this tutorial, you will discover and explore the Air Quality Prediction dataset that represents a challenging multivariate, multi-site, and multi-step time series forecasting problem.</p>
<p>After completing this tutorial, you will know:</p>
<ul>
<li>How to load and explore the chunk-structure of the dataset.</li>
<li>How to explore and visualize the input and target variables for the dataset.</li>
<li>How to use the new understanding to outline a suite of methods for framing the problem, preparing the data, and modeling the dataset.</li>
</ul>
<p>Let’s get started.</p>
<div class="wp-caption aligncenter" id="attachment_6312" style="width: 650px"><img alt="How to Load, Visualize, and Explore a Complex Multivariate Multistep Time Series Forecasting Dataset" class="size-full wp-image-6312" height="427" sizes="(max-width: 640px) 100vw, 640px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/10/How-to-Load-Visualize-and-Explore-a-Complex-Multivariate-Multistep-Time-Series-Forecasting-Dataset-1.jpg" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/10/How-to-Load-Visualize-and-Explore-a-Complex-Multivariate-Multistep-Time-Series-Forecasting-Dataset-1.jpg 640w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/10/How-to-Load-Visualize-and-Explore-a-Complex-Multivariate-Multistep-Time-Series-Forecasting-Dataset-1-300x200.jpg 300w" width="640"/><p class="wp-caption-text">How to Load, Visualize, and Explore a Complex Multivariate Multistep Time Series Forecasting Dataset<br/>Photo by <a href="https://www.flickr.com/photos/flatworldsedge/7874109806/">H Matthew Howarth</a>, some rights reserved.</p></div>
<h2>Tutorial Overview</h2>
<p>This tutorial is divided into seven parts; they are:</p>
<ol>
<li>Problem Description</li>
<li>Load Dataset</li>
<li>Chunk Data Structure</li>
<li>Input Variables</li>
<li>Target Variables</li>
<li>A Wrinkle With Target Variables</li>
<li>Thoughts on Modeling</li>
</ol>
<h2>Problem Description</h2>
<p>The EMC Data Science Global Hackathon dataset, or the ‘<em>Air Quality Prediction</em>‘ dataset for short, describes weather conditions at multiple sites and requires a prediction of air quality measurements over the subsequent three days.</p>
<p>Specifically, weather observations such as temperature, pressure, wind speed, and wind direction are provided hourly for eight days for multiple sites. The objective is to predict air quality measurements for the next three days at multiple sites. The forecast lead times are not contiguous; instead, specific lead times must be forecast over the 72 hour forecast period; they are:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50255391232853" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
+1, +2, +3, +4, +5, +10, +17, +24, +48, +72</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50255391232853-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50255391232853-1">+1, +2, +3, +4, +5, +10, +17, +24, +48, +72</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>Further, the dataset is divided into disjoint but contiguous chunks of data, with eight days of data followed by three days that require a forecast.</p>
<p>Not all observations are available at all sites or chunks and not all output variables are available at all sites and chunks. There are large portions of missing data that must be addressed.</p>
<p>The dataset was used as the basis for a <a href="https://www.kaggle.com/c/dsg-hackathon">short duration machine learning competition</a> (or hackathon) on the Kaggle website in 2012.</p>
<p>Submissions for the competition were evaluated against the true observations that were withheld from participants and scored using Mean Absolute Error (MAE). Submissions required the value of -1,000,000 to be specified in those cases where a forecast was not possible due to missing data. In fact, a template of where to insert missing values was provided and required to be adopted for all submissions (what a pain).</p>
<p>A winning entrant achieved a MAE of 0.21058 on the withheld test set (<a href="https://www.kaggle.com/c/dsg-hackathon/leaderboard">private leaderboard</a>) using random forest on lagged observations. A writeup of this solution is available in the post:</p>
<ul>
<li><a href="http://blog.kaggle.com/2012/05/01/chucking-everything-into-a-random-forest-ben-hamner-on-winning-the-air-quality-prediction-hackathon/">Chucking everything into a Random Forest: Ben Hamner on Winning The Air Quality Prediction Hackathon</a>, 2012.</li>
</ul>
<p>In this tutorial, we will explore this dataset in order to better understand the nature of the forecast problem and suggest approaches for how it may be modeled.</p>
<h2>Load Dataset</h2>
<p>The first step is to download the dataset and load it into memory.</p>
<p>The dataset can be downloaded for free from the Kaggle website. You may have to create an account and log in, in order to be able to download the dataset.</p>
<p>Download the entire dataset, e.g. “<em>Download All</em>” to your workstation and unzip the archive in your current working directory with the folder named ‘<em>AirQualityPrediction</em>‘</p>
<ul>
<li><a href="https://www.kaggle.com/c/dsg-hackathon/data">EMC Data Science Global Hackathon (Air Quality Prediction) Data</a></li>
</ul>
<p>You should have five files in the <em>AirQualityPrediction/</em> folder; they are:</p>
<ul>
<li>SiteLocations.csv</li>
<li>SiteLocations_with_more_sites.csv</li>
<li>SubmissionZerosExceptNAs.csv</li>
<li>TrainingData.csv</li>
<li>sample_code.r</li>
</ul>
<p>Our focus will be the ‘<em>TrainingData.csv</em>‘ that contains the training dataset, specifically data in chunks where each chunk is eight contiguous days of observations and target variables.</p>
<p>The test dataset (remaining three days of each chunk) is not available for this dataset at the time of writing.</p>
<p>Open the ‘<em>TrainingData.csv</em>‘ file and review the contents. The unzipped data file is relatively small (21 megabytes) and will easily fit into RAM.</p>
<p>Reviewing the contents of the file, we can see that the data file contains a header row.</p>
<p>We can also see that missing data is marked with the ‘<em>NA</em>‘ value, which Pandas will automatically convert to <em>NumPy.NaN</em>.</p>
<p>We can see that the ‘<em>weekday</em>‘ column contains the day as a string, whereas all other data is numeric.</p>
<p>Below are the first few lines of the data file for reference.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50261792067517" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
"rowID","chunkID","position_within_chunk","month_most_common","weekday","hour","Solar.radiation_64","WindDirection..Resultant_1","WindDirection..Resultant_1018","WindSpeed..Resultant_1","WindSpeed..Resultant_1018","Ambient.Max.Temperature_14","Ambient.Max.Temperature_22","Ambient.Max.Temperature_50","Ambient.Max.Temperature_52","Ambient.Max.Temperature_57","Ambient.Max.Temperature_76","Ambient.Max.Temperature_2001","Ambient.Max.Temperature_3301","Ambient.Max.Temperature_6005","Ambient.Min.Temperature_14","Ambient.Min.Temperature_22","Ambient.Min.Temperature_50","Ambient.Min.Temperature_52","Ambient.Min.Temperature_57","Ambient.Min.Temperature_76","Ambient.Min.Temperature_2001","Ambient.Min.Temperature_3301","Ambient.Min.Temperature_6005","Sample.Baro.Pressure_14","Sample.Baro.Pressure_22","Sample.Baro.Pressure_50","Sample.Baro.Pressure_52","Sample.Baro.Pressure_57","Sample.Baro.Pressure_76","Sample.Baro.Pressure_2001","Sample.Baro.Pressure_3301","Sample.Baro.Pressure_6005","Sample.Max.Baro.Pressure_14","Sample.Max.Baro.Pressure_22","Sample.Max.Baro.Pressure_50","Sample.Max.Baro.Pressure_52","Sample.Max.Baro.Pressure_57","Sample.Max.Baro.Pressure_76","Sample.Max.Baro.Pressure_2001","Sample.Max.Baro.Pressure_3301","Sample.Max.Baro.Pressure_6005","Sample.Min.Baro.Pressure_14","Sample.Min.Baro.Pressure_22","Sample.Min.Baro.Pressure_50","Sample.Min.Baro.Pressure_52","Sample.Min.Baro.Pressure_57","Sample.Min.Baro.Pressure_76","Sample.Min.Baro.Pressure_2001","Sample.Min.Baro.Pressure_3301","Sample.Min.Baro.Pressure_6005","target_1_57","target_10_4002","target_10_8003","target_11_1","target_11_32","target_11_50","target_11_64","target_11_1003","target_11_1601","target_11_4002","target_11_8003","target_14_4002","target_14_8003","target_15_57","target_2_57","target_3_1","target_3_50","target_3_57","target_3_1601","target_3_4002","target_3_6006","target_4_1","target_4_50","target_4_57","target_4_1018","target_4_1601","target_4_2001","target_4_4002","target_4_4101","target_4_6006","target_4_8003","target_5_6006","target_7_57","target_8_57","target_8_4002","target_8_6004","target_8_8003","target_9_4002","target_9_8003"
1,1,1,10,"Saturday",21,0.01,117,187,0.3,0.3,NA,NA,NA,14.9,NA,NA,NA,NA,NA,NA,NA,NA,5.8,NA,NA,NA,NA,NA,NA,NA,NA,747,NA,NA,NA,NA,NA,NA,NA,NA,750,NA,NA,NA,NA,NA,NA,NA,NA,743,NA,NA,NA,NA,NA,2.67923294292042,6.1816228132982,NA,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,NA,2.38965627997991,NA,5.56815355612325,0.690015329704154,NA,NA,NA,NA,NA,NA,2.84349016287551,0.0920223353681394,1.69321097077376,0.368089341472558,0.184044670736279,0.368089341472558,0.276067006104418,0.892616653070952,1.74842437199465,NA,NA,5.1306307034019,1.34160578423204,2.13879182993514,3.01375212399952,NA,5.67928016629218,NA
2,1,2,10,"Saturday",22,0.01,231,202,0.5,0.6,NA,NA,NA,14.9,NA,NA,NA,NA,NA,NA,NA,NA,5.8,NA,NA,NA,NA,NA,NA,NA,NA,747,NA,NA,NA,NA,NA,NA,NA,NA,750,NA,NA,NA,NA,NA,NA,NA,NA,743,NA,NA,NA,NA,NA,2.67923294292042,8.47583334194495,NA,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,NA,1.99138023331659,NA,5.56815355612325,0.923259948195698,NA,NA,NA,NA,NA,NA,3.1011527019063,0.0920223353681394,1.94167127626774,0.368089341472558,0.184044670736279,0.368089341472558,0.368089341472558,1.73922213845783,2.14412041407765,NA,NA,5.1306307034019,1.19577906855465,2.72209869264472,3.88871241806389,NA,7.42675098668978,NA
3,1,3,10,"Saturday",23,0.01,247,227,0.5,1.5,NA,NA,NA,14.9,NA,NA,NA,NA,NA,NA,NA,NA,5.8,NA,NA,NA,NA,NA,NA,NA,NA,747,NA,NA,NA,NA,NA,NA,NA,NA,750,NA,NA,NA,NA,NA,NA,NA,NA,743,NA,NA,NA,NA,NA,2.67923294292042,8.92192983362627,NA,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,NA,1.7524146053186,NA,5.56815355612325,0.680296803933673,NA,NA,NA,NA,NA,NA,3.06434376775904,0.0920223353681394,2.52141198908702,0.460111676840697,0.184044670736279,0.368089341472558,0.368089341472558,1.7852333061419,1.93246904273093,NA,NA,5.13639545700122,1.40965825154816,3.11096993445111,3.88871241806389,NA,7.68373198968942,NA
4,1,4,10,"Sunday",0,0.01,219,218,0.2,1.2,NA,NA,NA,14,NA,NA,NA,NA,NA,NA,NA,NA,4.8,NA,NA,NA,NA,NA,NA,NA,NA,751,NA,NA,NA,NA,NA,NA,NA,NA,754,NA,NA,NA,NA,NA,NA,NA,NA,748,NA,NA,NA,NA,NA,2.67923294292042,5.09824561921501,NA,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,NA,2.38965627997991,NA,5.6776192223642,0.612267123540305,NA,NA,NA,NA,NA,NA,3.21157950434806,0.184044670736279,2.374176252498,0.460111676840697,0.184044670736279,0.368089341472558,0.276067006104418,1.86805340797323,2.08890701285676,NA,NA,5.21710200739181,1.47771071886428,2.04157401948354,3.20818774490271,NA,4.83124285639335,NA
...</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50261792067517-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50261792067517-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50261792067517-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50261792067517-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50261792067517-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50261792067517-6">6</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50261792067517-1">"rowID","chunkID","position_within_chunk","month_most_common","weekday","hour","Solar.radiation_64","WindDirection..Resultant_1","WindDirection..Resultant_1018","WindSpeed..Resultant_1","WindSpeed..Resultant_1018","Ambient.Max.Temperature_14","Ambient.Max.Temperature_22","Ambient.Max.Temperature_50","Ambient.Max.Temperature_52","Ambient.Max.Temperature_57","Ambient.Max.Temperature_76","Ambient.Max.Temperature_2001","Ambient.Max.Temperature_3301","Ambient.Max.Temperature_6005","Ambient.Min.Temperature_14","Ambient.Min.Temperature_22","Ambient.Min.Temperature_50","Ambient.Min.Temperature_52","Ambient.Min.Temperature_57","Ambient.Min.Temperature_76","Ambient.Min.Temperature_2001","Ambient.Min.Temperature_3301","Ambient.Min.Temperature_6005","Sample.Baro.Pressure_14","Sample.Baro.Pressure_22","Sample.Baro.Pressure_50","Sample.Baro.Pressure_52","Sample.Baro.Pressure_57","Sample.Baro.Pressure_76","Sample.Baro.Pressure_2001","Sample.Baro.Pressure_3301","Sample.Baro.Pressure_6005","Sample.Max.Baro.Pressure_14","Sample.Max.Baro.Pressure_22","Sample.Max.Baro.Pressure_50","Sample.Max.Baro.Pressure_52","Sample.Max.Baro.Pressure_57","Sample.Max.Baro.Pressure_76","Sample.Max.Baro.Pressure_2001","Sample.Max.Baro.Pressure_3301","Sample.Max.Baro.Pressure_6005","Sample.Min.Baro.Pressure_14","Sample.Min.Baro.Pressure_22","Sample.Min.Baro.Pressure_50","Sample.Min.Baro.Pressure_52","Sample.Min.Baro.Pressure_57","Sample.Min.Baro.Pressure_76","Sample.Min.Baro.Pressure_2001","Sample.Min.Baro.Pressure_3301","Sample.Min.Baro.Pressure_6005","target_1_57","target_10_4002","target_10_8003","target_11_1","target_11_32","target_11_50","target_11_64","target_11_1003","target_11_1601","target_11_4002","target_11_8003","target_14_4002","target_14_8003","target_15_57","target_2_57","target_3_1","target_3_50","target_3_57","target_3_1601","target_3_4002","target_3_6006","target_4_1","target_4_50","target_4_57","target_4_1018","target_4_1601","target_4_2001","target_4_4002","target_4_4101","target_4_6006","target_4_8003","target_5_6006","target_7_57","target_8_57","target_8_4002","target_8_6004","target_8_8003","target_9_4002","target_9_8003"</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50261792067517-2">1,1,1,10,"Saturday",21,0.01,117,187,0.3,0.3,NA,NA,NA,14.9,NA,NA,NA,NA,NA,NA,NA,NA,5.8,NA,NA,NA,NA,NA,NA,NA,NA,747,NA,NA,NA,NA,NA,NA,NA,NA,750,NA,NA,NA,NA,NA,NA,NA,NA,743,NA,NA,NA,NA,NA,2.67923294292042,6.1816228132982,NA,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,NA,2.38965627997991,NA,5.56815355612325,0.690015329704154,NA,NA,NA,NA,NA,NA,2.84349016287551,0.0920223353681394,1.69321097077376,0.368089341472558,0.184044670736279,0.368089341472558,0.276067006104418,0.892616653070952,1.74842437199465,NA,NA,5.1306307034019,1.34160578423204,2.13879182993514,3.01375212399952,NA,5.67928016629218,NA</div><div class="crayon-line" id="crayon-5c0c9a9e50261792067517-3">2,1,2,10,"Saturday",22,0.01,231,202,0.5,0.6,NA,NA,NA,14.9,NA,NA,NA,NA,NA,NA,NA,NA,5.8,NA,NA,NA,NA,NA,NA,NA,NA,747,NA,NA,NA,NA,NA,NA,NA,NA,750,NA,NA,NA,NA,NA,NA,NA,NA,743,NA,NA,NA,NA,NA,2.67923294292042,8.47583334194495,NA,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,NA,1.99138023331659,NA,5.56815355612325,0.923259948195698,NA,NA,NA,NA,NA,NA,3.1011527019063,0.0920223353681394,1.94167127626774,0.368089341472558,0.184044670736279,0.368089341472558,0.368089341472558,1.73922213845783,2.14412041407765,NA,NA,5.1306307034019,1.19577906855465,2.72209869264472,3.88871241806389,NA,7.42675098668978,NA</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50261792067517-4">3,1,3,10,"Saturday",23,0.01,247,227,0.5,1.5,NA,NA,NA,14.9,NA,NA,NA,NA,NA,NA,NA,NA,5.8,NA,NA,NA,NA,NA,NA,NA,NA,747,NA,NA,NA,NA,NA,NA,NA,NA,750,NA,NA,NA,NA,NA,NA,NA,NA,743,NA,NA,NA,NA,NA,2.67923294292042,8.92192983362627,NA,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,NA,1.7524146053186,NA,5.56815355612325,0.680296803933673,NA,NA,NA,NA,NA,NA,3.06434376775904,0.0920223353681394,2.52141198908702,0.460111676840697,0.184044670736279,0.368089341472558,0.368089341472558,1.7852333061419,1.93246904273093,NA,NA,5.13639545700122,1.40965825154816,3.11096993445111,3.88871241806389,NA,7.68373198968942,NA</div><div class="crayon-line" id="crayon-5c0c9a9e50261792067517-5">4,1,4,10,"Sunday",0,0.01,219,218,0.2,1.2,NA,NA,NA,14,NA,NA,NA,NA,NA,NA,NA,NA,4.8,NA,NA,NA,NA,NA,NA,NA,NA,751,NA,NA,NA,NA,NA,NA,NA,NA,754,NA,NA,NA,NA,NA,NA,NA,NA,748,NA,NA,NA,NA,NA,2.67923294292042,5.09824561921501,NA,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,0.114975168664303,NA,2.38965627997991,NA,5.6776192223642,0.612267123540305,NA,NA,NA,NA,NA,NA,3.21157950434806,0.184044670736279,2.374176252498,0.460111676840697,0.184044670736279,0.368089341472558,0.276067006104418,1.86805340797323,2.08890701285676,NA,NA,5.21710200739181,1.47771071886428,2.04157401948354,3.20818774490271,NA,4.83124285639335,NA</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50261792067517-6">...</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>We can load the data file into memory using the Pandas <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">read_csv() function</a> and specify the header row on line 0.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50264185105650" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load dataset
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50264185105650-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50264185105650-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50264185105650-1"><span class="crayon-p"># load dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50264185105650-2"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>We can also get a quick idea of how much missing data there is in the dataset. We can do that by first trimming the first few columns to remove the string weekday data and convert the remaining columns to floating point values.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50267978243717" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# trim and transform to floats
values = dataset.values
data = values[:, 6:].astype('float32')</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50267978243717-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50267978243717-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50267978243717-3">3</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50267978243717-1"><span class="crayon-p"># trim and transform to floats</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50267978243717-2"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e50267978243717-3"><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">astype</span><span class="crayon-sy">(</span><span class="crayon-s">'float32'</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>We can then calculate the total number of missing observations and the percentage of values that are missing.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50269698613879" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# summarize amount of missing data
total_missing = data.size - count_nonzero(isnan(data))
percent_missing = total_missing / data.size * 100
print('Total Missing: %d/%d (%.1f%%)' % (total_missing, data.size, percent_missing))</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50269698613879-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50269698613879-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50269698613879-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50269698613879-4">4</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50269698613879-1"><span class="crayon-p"># summarize amount of missing data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50269698613879-2"><span class="crayon-v">total_missing</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">count_nonzero</span><span class="crayon-sy">(</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50269698613879-3"><span class="crayon-v">percent_missing</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">total_missing</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-e ">size *</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50269698613879-4"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Total Missing: %d/%d (%.1f%%)'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">total_missing</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-v">size</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">percent_missing</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5026b182534788" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# load dataset
from numpy import isnan
from numpy import count_nonzero
from pandas import read_csv
# load dataset
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# summarize
print(dataset.shape)
# trim and transform to floats
values = dataset.values
data = values[:, 6:].astype('float32')
# summarize amount of missing data
total_missing = data.size - count_nonzero(isnan(data))
percent_missing = total_missing / data.size * 100
print('Total Missing: %d/%d (%.1f%%)' % (total_missing, data.size, percent_missing))</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5026b182534788-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5026b182534788-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e5026b182534788-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5026b182534788-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e5026b182534788-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5026b182534788-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e5026b182534788-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5026b182534788-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e5026b182534788-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5026b182534788-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e5026b182534788-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5026b182534788-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e5026b182534788-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5026b182534788-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e5026b182534788-15">15</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5026b182534788-1"><span class="crayon-p"># load dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5026b182534788-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">isnan</span></div><div class="crayon-line" id="crayon-5c0c9a9e5026b182534788-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">count_nonzero</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5026b182534788-4"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-v">read_csv</span></div><div class="crayon-line" id="crayon-5c0c9a9e5026b182534788-5"><span class="crayon-p"># load dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5026b182534788-6"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5026b182534788-7"><span class="crayon-p"># summarize</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5026b182534788-8"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5026b182534788-9"><span class="crayon-p"># trim and transform to floats</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5026b182534788-10"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e5026b182534788-11"><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">astype</span><span class="crayon-sy">(</span><span class="crayon-s">'float32'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5026b182534788-12"><span class="crayon-p"># summarize amount of missing data</span></div><div class="crayon-line" id="crayon-5c0c9a9e5026b182534788-13"><span class="crayon-v">total_missing</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">count_nonzero</span><span class="crayon-sy">(</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5026b182534788-14"><span class="crayon-v">percent_missing</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">total_missing</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-e ">size *</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line" id="crayon-5c0c9a9e5026b182534788-15"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Total Missing: %d/%d (%.1f%%)'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">total_missing</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">.</span><span class="crayon-v">size</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">percent_missing</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>Running the example first prints the shape of the loaded dataset.</p>
<p>We can see that we have about 37,000 rows and 95 columns. We know these numbers are misleading given that the data is in fact divided into chunks and the columns are divided into the same observations at different sites.</p>
<p>We can also see that a little over 40% of the data is missing. This is a lot. The data is very patchy and we are going to have to understand this well before modeling the problem.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5026c413464227" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
(37821, 95)
Total Missing: 1443977/3366069 (42.9%)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5026c413464227-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5026c413464227-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5026c413464227-1">(37821, 95)</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5026c413464227-2">Total Missing: 1443977/3366069 (42.9%)</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p></p><p></p><div class="woo-sc-hr"></div>
<center>
<h3>Need help with Deep Learning for Time Series?</h3>
<p>Take my free 7-day email crash course now (with sample code).</p>
<p>Click to sign-up and also get a free PDF Ebook version of the course.</p>
<p><a href="https://machinelearningmastery.lpages.co/leadbox/14531ee73f72a2%3A164f8be4f346dc/5630742793027584/" style="background: rgb(255, 206, 10); color: rgb(255, 255, 255); text-decoration: none; font-family: Helvetica, Arial, sans-serif; font-weight: bold; font-size: 16px; line-height: 20px; padding: 10px; display: inline-block; max-width: 300px; border-radius: 5px; text-shadow: rgba(0, 0, 0, 0.25) 0px -1px 1px; box-shadow: rgba(255, 255, 255, 0.5) 0px 1px 3px inset, rgba(0, 0, 0, 0.5) 0px 1px 3px;" target="_blank">Download Your FREE Mini-Course</a><script data-config="%7B%7D" data-leadbox="14531ee73f72a2:164f8be4f346dc" data-url="https://machinelearningmastery.lpages.co/leadbox/14531ee73f72a2%3A164f8be4f346dc/5630742793027584/" src="https://machinelearningmastery.lpages.co/leadbox-1534880695.js" type="text/javascript"></script></p>
</center>
<p></p><div class="woo-sc-hr"></div>
<h2>Chunk Data Structure</h2>
<p>A good starting point is to look at the data in terms of the chunks.</p>
<h3>Chunk Durations</h3>
<p>We can group data by the ‘chunkID’ variable (column index 1).</p>
<p>If each chunk is eight days and the observations are hourly, then we would expect (8 * 24) or 192 rows of data per chunk.</p>
<p>If there are 37,821 rows of data, then there must be chunks with more or less than 192 hours as 37,821/192 is about 196.9 chunks.</p>
<p>Let’s first split the data into chunks. We can first get a list of the unique chunk identifiers.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5026e997479993" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
chunk_ids = unique(values[:, 1])</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5026e997479993-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5026e997479993-1"><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>We can then collect all rows for each chunk identifier and store them in a dictionary for easy access.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50270504042857" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
chunks = dict()
# sort rows by chunk id
for chunk_id in chunk_ids:
	selection = values[:, chunk_ix] == chunk_id
	chunks[chunk_id] = values[selection, :]</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50270504042857-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50270504042857-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50270504042857-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50270504042857-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50270504042857-5">5</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50270504042857-1"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50270504042857-2"><span class="crayon-p"># sort rows by chunk id</span></div><div class="crayon-line" id="crayon-5c0c9a9e50270504042857-3"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50270504042857-4"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line" id="crayon-5c0c9a9e50270504042857-5"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>Below defines a function named <em>to_chunks()</em> that takes a NumPy array of the loaded data and returns a dictionary of <em>chunk_id</em> to rows for the chunk.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50272092094939" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50272092094939-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50272092094939-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50272092094939-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50272092094939-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50272092094939-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50272092094939-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e50272092094939-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50272092094939-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e50272092094939-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50272092094939-10">10</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50272092094939-1"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50272092094939-2"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50272092094939-3"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50272092094939-4"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line" id="crayon-5c0c9a9e50272092094939-5"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50272092094939-6"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line" id="crayon-5c0c9a9e50272092094939-7"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50272092094939-8"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line" id="crayon-5c0c9a9e50272092094939-9"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50272092094939-10"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>The ‘<em>position_within_chunk</em>‘ in the data file indicates the order of a row within a chunk. At this stage, we assume that rows are already ordered and do not need to be sorted. A skim of the raw data file seems to confirm this assumption.</p>
<p>Once the data is sorted into chunks, we can calculate the number of rows in each chunk and have a look at the distribution, such as with a box and whisker plot.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50274271175620" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot distribution of chunk durations
def plot_chunk_durations(chunks):
	# chunk durations in hours
	chunk_durations = [len(v) for k,v in chunks.items()]
	# boxplot
	pyplot.subplot(2, 1, 1)
	pyplot.boxplot(chunk_durations)
	# histogram
	pyplot.subplot(2, 1, 2)
	pyplot.hist(chunk_durations)
	# histogram
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50274271175620-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50274271175620-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50274271175620-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50274271175620-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50274271175620-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50274271175620-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e50274271175620-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50274271175620-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e50274271175620-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50274271175620-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e50274271175620-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50274271175620-12">12</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50274271175620-1"><span class="crayon-p"># plot distribution of chunk durations</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50274271175620-2"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_durations</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50274271175620-3"><span class="crayon-h"> </span><span class="crayon-p"># chunk durations in hours</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50274271175620-4"><span class="crayon-h"> </span><span class="crayon-v">chunk_durations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">v</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-sy">,</span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e50274271175620-5"><span class="crayon-h"> </span><span class="crayon-p"># boxplot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50274271175620-6"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50274271175620-7"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">chunk_durations</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50274271175620-8"><span class="crayon-h"> </span><span class="crayon-p"># histogram</span></div><div class="crayon-line" id="crayon-5c0c9a9e50274271175620-9"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50274271175620-10"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-v">chunk_durations</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50274271175620-11"><span class="crayon-h"> </span><span class="crayon-p"># histogram</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50274271175620-12"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>The complete example that ties all of this together is listed below</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50275768221643" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# split data into chunks
from numpy import unique
from pandas import read_csv
from matplotlib import pyplot

# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks

# plot distribution of chunk durations
def plot_chunk_durations(chunks):
	# chunk durations in hours
	chunk_durations = [len(v) for k,v in chunks.items()]
	# boxplot
	pyplot.subplot(2, 1, 1)
	pyplot.boxplot(chunk_durations)
	# histogram
	pyplot.subplot(2, 1, 2)
	pyplot.hist(chunk_durations)
	# histogram
	pyplot.show()

# load dataset
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# group data by chunks
values = dataset.values
chunks = to_chunks(values)
print('Total Chunks: %d' % len(chunks))
# plot chunk durations
plot_chunk_durations(chunks)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-32">32</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-34">34</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50275768221643-36">36</div><div class="crayon-num" data-line="crayon-5c0c9a9e50275768221643-37">37</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-1"><span class="crayon-p"># split data into chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-3"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-4"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-5"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-6"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-7"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-8"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-9"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-10"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-11"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-12"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-13"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-14"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-15"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-16"> </div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-17"><span class="crayon-p"># plot distribution of chunk durations</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-18"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_durations</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-19"><span class="crayon-h"> </span><span class="crayon-p"># chunk durations in hours</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-20"><span class="crayon-h"> </span><span class="crayon-v">chunk_durations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">v</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-sy">,</span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-21"><span class="crayon-h"> </span><span class="crayon-p"># boxplot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-22"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-23"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">chunk_durations</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-24"><span class="crayon-h"> </span><span class="crayon-p"># histogram</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-25"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-26"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-v">chunk_durations</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-27"><span class="crayon-h"> </span><span class="crayon-p"># histogram</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-28"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-29"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-30"><span class="crayon-p"># load dataset</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-31"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-32"><span class="crayon-p"># group data by chunks</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-33"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-34"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-35"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Total Chunks: %d'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50275768221643-36"><span class="crayon-p"># plot chunk durations</span></div><div class="crayon-line" id="crayon-5c0c9a9e50275768221643-37"><span class="crayon-e">plot_chunk_durations</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0014 seconds] -->
<p>Running the example first prints the number of chunks in the dataset.</p>
<p>We can see that there are 208, which suggests that indeed the number of hourly observations must vary across the chunks.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50277375334094" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
Total Chunks: 208</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50277375334094-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50277375334094-1">Total Chunks: 208</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>A box and whisker plot and a histogram plot of chunk durations is created. We can see that indeed the median is 192, meaning that most chunks have eight days of observations or close to it.</p>
<p>We can also see a long tail of durations down to about 25 rows. Although there are not many of these cases, we would expect that will be challenging to forecast given the lack of data.</p>
<p>The distribution also raises questions about how contiguous the observations within each chunk may be.</p>
<div class="wp-caption aligncenter" id="attachment_6297" style="width: 1290px"><img alt="Box and whisker plot and Histogram plot of chunk duration in hours" class="size-full wp-image-6297" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plot-and-Histogram-plot-of-chunk-duration-in-hours.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plot-and-Histogram-plot-of-chunk-duration-in-hours.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plot-and-Histogram-plot-of-chunk-duration-in-hours-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plot-and-Histogram-plot-of-chunk-duration-in-hours-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plot-and-Histogram-plot-of-chunk-duration-in-hours-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Box and whisker plot and Histogram plot of chunk duration in hours</p></div>
<h3>Chunk Contiguousness</h3>
<p>It may be helpful to get an idea of how contiguous (or not) the observations are within those chunks that do not have the full eight days of data.</p>
<p>One approach to considering this is to create a line plot for each discontiguous chunk and show the gaps in the observations.</p>
<p>We can do this on a single plot. Each chunk has a unique identifier, from 1 to 208, and we can use this as the value for the series and mark missing observations within the eight day interval via <em>NaN</em> values that will not appear on the plot.</p>
<p>Inverting this, we can assume that we have NaN values for all time steps within a chunk, then use the ‘<em>position_within_chunk</em>‘ column (index 2) to determine the time steps that do have values and mark them with the chunk id.</p>
<p>The <em>plot_discontinuous_chunks()</em> below implements this behavior, creating one series or line for each chunk with missing rows all on the same plot. The expectation is that breaks in the line will help us see how contiguous or discontiguous these incomplete chunks happen to be.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50279414282099" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot chunks that do not have all data
def plot_discontiguous_chunks(chunks, row_in_chunk_ix=2):
	n_steps = 8 * 24
	for c_id,rows in chunks.items():
		# skip chunks with all data
		if rows.shape[0] == n_steps:
			continue
		# create empty series
		series = [nan for _ in range(n_steps)]
		# mark all rows with data
		for row in rows:
			# convert to zero offset
			r_id = row[row_in_chunk_ix] - 1
			# mark value
			series[r_id] = c_id
		# plot
		pyplot.plot(series)
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e50279414282099-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50279414282099-18">18</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-1"><span class="crayon-p"># plot chunks that do not have all data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-2"><span class="crayon-e">def </span><span class="crayon-e">plot_discontiguous_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">row_in_chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-3"><span class="crayon-h"> </span><span class="crayon-v">n_steps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">24</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-4"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">c_id</span><span class="crayon-sy">,</span><span class="crayon-e">rows </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-5"><span class="crayon-h"> </span><span class="crayon-p"># skip chunks with all data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-6"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">n_steps</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-7"><span class="crayon-h"> </span><span class="crayon-st">continue</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-8"><span class="crayon-h"> </span><span class="crayon-p"># create empty series</span></div><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-9"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-e">nan </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">_</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">n_steps</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-10"><span class="crayon-h"> </span><span class="crayon-p"># mark all rows with data</span></div><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-11"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">row </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-12"><span class="crayon-h"> </span><span class="crayon-p"># convert to zero offset</span></div><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-13"><span class="crayon-h"> </span><span class="crayon-v">r_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">row</span><span class="crayon-sy">[</span><span class="crayon-v">row_in_chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-14"><span class="crayon-h"> </span><span class="crayon-p"># mark value</span></div><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-15"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-sy">[</span><span class="crayon-v">r_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">c_id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-16"><span class="crayon-h"> </span><span class="crayon-p"># plot</span></div><div class="crayon-line" id="crayon-5c0c9a9e50279414282099-17"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-v">series</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50279414282099-18"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0008 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5027c166835937" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot discontiguous chunks
from numpy import nan
from numpy import unique
from pandas import read_csv
from matplotlib import pyplot

# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks

# plot chunks that do not have all data
def plot_discontiguous_chunks(chunks, row_in_chunk_ix=2):
	n_steps = 8 * 24
	for c_id,rows in chunks.items():
		# skip chunks with all data
		if rows.shape[0] == n_steps:
			continue
		# create empty series
		series = [nan for _ in range(n_steps)]
		# mark all rows with data
		for row in rows:
			# convert to zero offset
			r_id = row[row_in_chunk_ix] - 1
			# mark value
			series[r_id] = c_id
		# plot
		pyplot.plot(series)
	pyplot.show()

# load dataset
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# group data by chunks
values = dataset.values
chunks = to_chunks(values)
# plot discontiguous chunks
plot_discontiguous_chunks(chunks)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-32">32</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-34">34</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-36">36</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-38">38</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-40">40</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027c166835937-42">42</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027c166835937-43">43</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-1"><span class="crayon-p"># plot discontiguous chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">nan</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-4"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-5"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-6"> </div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-7"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-8"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-9"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-10"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-11"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-12"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-14"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-15"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-16"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-17"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-18"><span class="crayon-p"># plot chunks that do not have all data</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-19"><span class="crayon-e">def </span><span class="crayon-e">plot_discontiguous_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">row_in_chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-20"><span class="crayon-h"> </span><span class="crayon-v">n_steps</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">24</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-21"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">c_id</span><span class="crayon-sy">,</span><span class="crayon-e">rows </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-22"><span class="crayon-h"> </span><span class="crayon-p"># skip chunks with all data</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-23"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">n_steps</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-24"><span class="crayon-h"> </span><span class="crayon-st">continue</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-25"><span class="crayon-h"> </span><span class="crayon-p"># create empty series</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-26"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-e">nan </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">_</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">n_steps</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-27"><span class="crayon-h"> </span><span class="crayon-p"># mark all rows with data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-28"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">row </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-29"><span class="crayon-h"> </span><span class="crayon-p"># convert to zero offset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-30"><span class="crayon-h"> </span><span class="crayon-v">r_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">row</span><span class="crayon-sy">[</span><span class="crayon-v">row_in_chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-31"><span class="crayon-h"> </span><span class="crayon-p"># mark value</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-32"><span class="crayon-h"> </span><span class="crayon-v">series</span><span class="crayon-sy">[</span><span class="crayon-v">r_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">c_id</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-33"><span class="crayon-h"> </span><span class="crayon-p"># plot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-34"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-v">series</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-35"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-36"> </div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-37"><span class="crayon-p"># load dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-38"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-39"><span class="crayon-p"># group data by chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-40"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-41"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027c166835937-42"><span class="crayon-p"># plot discontiguous chunks</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027c166835937-43"><span class="crayon-e">plot_discontiguous_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0017 seconds] -->
<p>Running the example creates a single figure with one line for each of the chunks with missing data.</p>
<p>The number and lengths of the breaks in the line for each chunk give an idea of how discontiguous the observations within each chunk happen to be.</p>
<p>Many of the chunks do have long stretches of contiguous data, which is a good sign for modeling.</p>
<p>There are cases where chunks have very few observations and those observations that are present are in small contiguous patches. These may be challenging to model.</p>
<p>Further, not all of these chunks have observations at the end of chunk: the period right before a forecast is required. These specifically will be a challenge for those models that seek to persist recent observations.</p>
<p>The discontinuous nature of the series data within the chunks will also make it challenging to evaluate models. For example, one cannot simply split chunk data in half, train on the first half and test on the second when the observations are patchy. At least, when the incomplete chunk data is considered.</p>
<div class="wp-caption aligncenter" id="attachment_6298" style="width: 1290px"><img alt="Line plots of chunks with discontinuous observations" class="size-full wp-image-6298" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Line-plots-of-chunks-with-discontinuous-observations.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Line-plots-of-chunks-with-discontinuous-observations.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Line-plots-of-chunks-with-discontinuous-observations-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Line-plots-of-chunks-with-discontinuous-observations-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Line-plots-of-chunks-with-discontinuous-observations-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Line plots of chunks with discontinuous observations</p></div>
<h3>Daily Coverage Within Chunks</h3>
<p>The discontiguous nature of the chunks also suggests that it may be important to look at the hours covered by each chunk.</p>
<p>The time of day is important in environmental data, and models that assume that each chunk covers the same daily or weekly cycle may stumble if the start and end time of day vary across chunks.</p>
<p>We can quickly check this by plotting the distribution of the first hour (in a 24 hour day) of each chunk.</p>
<p>The number of bins in the histogram is set to 24 so we can clearly see the distribution for each hour of the day in 24-hour time.</p>
<p>Further, when collecting the first hour of the chunk, we are careful to only collect it from those chunks that have all eight days of data, in case a chunk with missing data does not have observations at the beginning of the chunk, which we know happens.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5027e189502521" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot distribution of chunk start hour
def plot_chunk_start_hour(chunks, hour_in_chunk_ix=5):
	# chunk start hour
	chunk_start_hours = [v[0, hour_in_chunk_ix] for k,v in chunks.items() if len(v)==192]
	# boxplot
	pyplot.subplot(2, 1, 1)
	pyplot.boxplot(chunk_start_hours)
	# histogram
	pyplot.subplot(2, 1, 2)
	pyplot.hist(chunk_start_hours, bins=24)
	# histogram
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5027e189502521-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027e189502521-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027e189502521-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027e189502521-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027e189502521-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027e189502521-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027e189502521-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027e189502521-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027e189502521-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027e189502521-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e5027e189502521-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5027e189502521-12">12</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5027e189502521-1"><span class="crayon-p"># plot distribution of chunk start hour</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027e189502521-2"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_start_hour</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">hour_in_chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027e189502521-3"><span class="crayon-h"> </span><span class="crayon-p"># chunk start hour</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027e189502521-4"><span class="crayon-h"> </span><span class="crayon-v">chunk_start_hours</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">v</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">hour_in_chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-sy">,</span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">v</span><span class="crayon-sy">)</span><span class="crayon-o">==</span><span class="crayon-cn">192</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027e189502521-5"><span class="crayon-h"> </span><span class="crayon-p"># boxplot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027e189502521-6"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027e189502521-7"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">chunk_start_hours</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027e189502521-8"><span class="crayon-h"> </span><span class="crayon-p"># histogram</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027e189502521-9"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027e189502521-10"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-v">chunk_start_hours</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">24</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5027e189502521-11"><span class="crayon-h"> </span><span class="crayon-p"># histogram</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5027e189502521-12"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50281747079407" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot distribution of chunk start hour
from numpy import nan
from numpy import unique
from pandas import read_csv
from matplotlib import pyplot

# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks

# plot distribution of chunk start hour
def plot_chunk_start_hour(chunks, hour_in_chunk_ix=5):
	# chunk start hour
	chunk_start_hours = [v[0, hour_in_chunk_ix] for k,v in chunks.items() if len(v)==192]
	# boxplot
	pyplot.subplot(2, 1, 1)
	pyplot.boxplot(chunk_start_hours)
	# histogram
	pyplot.subplot(2, 1, 2)
	pyplot.hist(chunk_start_hours, bins=24)
	# histogram
	pyplot.show()

# load dataset
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# group data by chunks
values = dataset.values
chunks = to_chunks(values)
# plot distribution of chunk start hour
plot_chunk_start_hour(chunks)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-32">32</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-34">34</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50281747079407-36">36</div><div class="crayon-num" data-line="crayon-5c0c9a9e50281747079407-37">37</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-1"><span class="crayon-p"># plot distribution of chunk start hour</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">nan</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-4"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-5"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-6"> </div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-7"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-8"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-9"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-10"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-11"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-12"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-13"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-14"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-15"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-16"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-17"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-18"><span class="crayon-p"># plot distribution of chunk start hour</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-19"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_start_hour</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">hour_in_chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-20"><span class="crayon-h"> </span><span class="crayon-p"># chunk start hour</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-21"><span class="crayon-h"> </span><span class="crayon-v">chunk_start_hours</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">v</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">hour_in_chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-sy">,</span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">v</span><span class="crayon-sy">)</span><span class="crayon-o">==</span><span class="crayon-cn">192</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-22"><span class="crayon-h"> </span><span class="crayon-p"># boxplot</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-23"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-24"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">chunk_start_hours</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-25"><span class="crayon-h"> </span><span class="crayon-p"># histogram</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-26"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-27"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-v">chunk_start_hours</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">24</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-28"><span class="crayon-h"> </span><span class="crayon-p"># histogram</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-29"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-30"> </div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-31"><span class="crayon-p"># load dataset</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-32"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-33"><span class="crayon-p"># group data by chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-34"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-35"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50281747079407-36"><span class="crayon-p"># plot distribution of chunk start hour</span></div><div class="crayon-line" id="crayon-5c0c9a9e50281747079407-37"><span class="crayon-e">plot_chunk_start_hour</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0016 seconds] -->
<p>Running the example creates a box and whisker plot and a histogram of the first hour within each chunk.</p>
<p>We can see a reasonably uniform distribution of the start time across the 24 hours in the day.</p>
<p>Further, this means that the interval to be forecast for each chunk will also vary across the 24 hour period. This adds a wrinkle for models that might expect a standard three day forecast period (midnight to midnight).</p>
<div class="wp-caption aligncenter" id="attachment_6299" style="width: 1290px"><img alt="Distribution of first hour in observations within each chunk" class="size-full wp-image-6299" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Distribution-of-first-hour-in-observations-within-each-chunk.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Distribution-of-first-hour-in-observations-within-each-chunk.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Distribution-of-first-hour-in-observations-within-each-chunk-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Distribution-of-first-hour-in-observations-within-each-chunk-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Distribution-of-first-hour-in-observations-within-each-chunk-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Distribution of first hour in observations within each chunk</p></div>
<p>Now that we have some idea of the chunk-structure of the data, let’s take a closer look at the input variables that describe the meteorological observations.</p>
<h2>Input Variables</h2>
<p>There are 56 input variables.</p>
<p>The first six (indexes 0 to 5) are metadata information for the chunk and time of the observations. They are:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50284675506329" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
rowID
chunkID
position_within_chunk
month_most_common
weekday
hour</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50284675506329-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50284675506329-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50284675506329-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50284675506329-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50284675506329-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50284675506329-6">6</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50284675506329-1">rowID</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50284675506329-2">chunkID</div><div class="crayon-line" id="crayon-5c0c9a9e50284675506329-3">position_within_chunk</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50284675506329-4">month_most_common</div><div class="crayon-line" id="crayon-5c0c9a9e50284675506329-5">weekday</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50284675506329-6">hour</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>The remaining 50 describe meteorological information for specific sites; they are:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50287205338551" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
Solar.radiation_64
WindDirection..Resultant_1
WindDirection..Resultant_1018
WindSpeed..Resultant_1
WindSpeed..Resultant_1018
Ambient.Max.Temperature_14
Ambient.Max.Temperature_22
Ambient.Max.Temperature_50
Ambient.Max.Temperature_52
Ambient.Max.Temperature_57
Ambient.Max.Temperature_76
Ambient.Max.Temperature_2001
Ambient.Max.Temperature_3301
Ambient.Max.Temperature_6005
Ambient.Min.Temperature_14
Ambient.Min.Temperature_22
Ambient.Min.Temperature_50
Ambient.Min.Temperature_52
Ambient.Min.Temperature_57
Ambient.Min.Temperature_76
Ambient.Min.Temperature_2001
Ambient.Min.Temperature_3301
Ambient.Min.Temperature_6005
Sample.Baro.Pressure_14
Sample.Baro.Pressure_22
Sample.Baro.Pressure_50
Sample.Baro.Pressure_52
Sample.Baro.Pressure_57
Sample.Baro.Pressure_76
Sample.Baro.Pressure_2001
Sample.Baro.Pressure_3301
Sample.Baro.Pressure_6005
Sample.Max.Baro.Pressure_14
Sample.Max.Baro.Pressure_22
Sample.Max.Baro.Pressure_50
Sample.Max.Baro.Pressure_52
Sample.Max.Baro.Pressure_57
Sample.Max.Baro.Pressure_76
Sample.Max.Baro.Pressure_2001
Sample.Max.Baro.Pressure_3301
Sample.Max.Baro.Pressure_6005
Sample.Min.Baro.Pressure_14
Sample.Min.Baro.Pressure_22
Sample.Min.Baro.Pressure_50
Sample.Min.Baro.Pressure_52
Sample.Min.Baro.Pressure_57
Sample.Min.Baro.Pressure_76
Sample.Min.Baro.Pressure_2001
Sample.Min.Baro.Pressure_3301
Sample.Min.Baro.Pressure_6005</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-32">32</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-34">34</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-36">36</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-38">38</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-40">40</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-42">42</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-44">44</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-46">46</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-48">48</div><div class="crayon-num" data-line="crayon-5c0c9a9e50287205338551-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50287205338551-50">50</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-1">Solar.radiation_64</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-2">WindDirection..Resultant_1</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-3">WindDirection..Resultant_1018</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-4">WindSpeed..Resultant_1</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-5">WindSpeed..Resultant_1018</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-6">Ambient.Max.Temperature_14</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-7">Ambient.Max.Temperature_22</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-8">Ambient.Max.Temperature_50</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-9">Ambient.Max.Temperature_52</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-10">Ambient.Max.Temperature_57</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-11">Ambient.Max.Temperature_76</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-12">Ambient.Max.Temperature_2001</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-13">Ambient.Max.Temperature_3301</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-14">Ambient.Max.Temperature_6005</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-15">Ambient.Min.Temperature_14</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-16">Ambient.Min.Temperature_22</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-17">Ambient.Min.Temperature_50</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-18">Ambient.Min.Temperature_52</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-19">Ambient.Min.Temperature_57</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-20">Ambient.Min.Temperature_76</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-21">Ambient.Min.Temperature_2001</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-22">Ambient.Min.Temperature_3301</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-23">Ambient.Min.Temperature_6005</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-24">Sample.Baro.Pressure_14</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-25">Sample.Baro.Pressure_22</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-26">Sample.Baro.Pressure_50</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-27">Sample.Baro.Pressure_52</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-28">Sample.Baro.Pressure_57</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-29">Sample.Baro.Pressure_76</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-30">Sample.Baro.Pressure_2001</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-31">Sample.Baro.Pressure_3301</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-32">Sample.Baro.Pressure_6005</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-33">Sample.Max.Baro.Pressure_14</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-34">Sample.Max.Baro.Pressure_22</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-35">Sample.Max.Baro.Pressure_50</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-36">Sample.Max.Baro.Pressure_52</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-37">Sample.Max.Baro.Pressure_57</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-38">Sample.Max.Baro.Pressure_76</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-39">Sample.Max.Baro.Pressure_2001</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-40">Sample.Max.Baro.Pressure_3301</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-41">Sample.Max.Baro.Pressure_6005</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-42">Sample.Min.Baro.Pressure_14</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-43">Sample.Min.Baro.Pressure_22</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-44">Sample.Min.Baro.Pressure_50</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-45">Sample.Min.Baro.Pressure_52</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-46">Sample.Min.Baro.Pressure_57</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-47">Sample.Min.Baro.Pressure_76</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-48">Sample.Min.Baro.Pressure_2001</div><div class="crayon-line" id="crayon-5c0c9a9e50287205338551-49">Sample.Min.Baro.Pressure_3301</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50287205338551-50">Sample.Min.Baro.Pressure_6005</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0001 seconds] -->
<p>Really, there are only eight meteorological input variables:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5028b503690239" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
Solar.radiation
WindDirection..Resultant
WindSpeed..Resultant
Ambient.Max.Temperature
Ambient.Min.Temperature
Sample.Baro.Pressure
Sample.Max.Baro.Pressure
Sample.Min.Baro.Pressure</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5028b503690239-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5028b503690239-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e5028b503690239-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5028b503690239-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e5028b503690239-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5028b503690239-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e5028b503690239-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5028b503690239-8">8</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5028b503690239-1">Solar.radiation</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5028b503690239-2">WindDirection..Resultant</div><div class="crayon-line" id="crayon-5c0c9a9e5028b503690239-3">WindSpeed..Resultant</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5028b503690239-4">Ambient.Max.Temperature</div><div class="crayon-line" id="crayon-5c0c9a9e5028b503690239-5">Ambient.Min.Temperature</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5028b503690239-6">Sample.Baro.Pressure</div><div class="crayon-line" id="crayon-5c0c9a9e5028b503690239-7">Sample.Max.Baro.Pressure</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5028b503690239-8">Sample.Min.Baro.Pressure</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>These variables are recorded across 23 unique sites; they are:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5028e754710604" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
1, 14, 22, 50, 52, 57, 64, 76, 1018, 2001, 3301, 6005</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5028e754710604-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5028e754710604-1">1, 14, 22, 50, 52, 57, 64, 76, 1018, 2001, 3301, 6005</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>The data is beautifully complex.</p>
<p>Not all variables are recorded at all sites.</p>
<p>There is some overlap in the site identifiers used in the target variables, such as 1, 50, 64, etc.</p>
<p>There are site identifiers used in the target variables that are not used in the input variables, such as 4002. There are also site identifiers that are used in the input that are not used in the target identifiers, such as 15.</p>
<p>This suggests, at the very least, that not all variables are recorded at all locations. That recording stations are heterogeneous across sites. Further, there might be something special about sites that only collect measures of a given type or collect all measurements.</p>
<p>Let’s take a closer look at the data for the input variables.</p>
<h3>Temporal Structure of Inputs for a Chunk</h3>
<p>We can start off by looking at the structure and distribution of inputs per chunk.</p>
<p>The first few chunks that have all eight days of observations have the chunkId of 1, 3, and 5.</p>
<p>We can enumerate all of the input columns and create one line plot for each. This will create a time series line plot for each input variable to give a rough idea of how each varies across time.</p>
<p>We can repeat this for a few chunks to get an idea how the temporal structure may differ across chunks.</p>
<p>The function below named <em>plot_chunk_inputs()</em> takes the data in chunk format and a list of chunk ids to plot. It will create a figure with 50 line plots, one for each input variable, and n lines per plot, one for each chunk.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50291069451530" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot all inputs for one or more chunk ids
def plot_chunk_inputs(chunks, c_ids):
	pyplot.figure()
	inputs = range(6, 56)
	for i in range(len(inputs)):
		ax = pyplot.subplot(len(inputs), 1, i+1)
		ax.set_xticklabels([])
		ax.set_yticklabels([])
		column = inputs[i]
		for chunk_id in c_ids:
			rows = chunks[chunk_id]
			pyplot.plot(rows[:,column])
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50291069451530-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50291069451530-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50291069451530-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50291069451530-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50291069451530-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50291069451530-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e50291069451530-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50291069451530-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e50291069451530-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50291069451530-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e50291069451530-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50291069451530-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e50291069451530-13">13</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50291069451530-1"><span class="crayon-p"># plot all inputs for one or more chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50291069451530-2"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_inputs</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50291069451530-3"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50291069451530-4"><span class="crayon-h"> </span><span class="crayon-v">inputs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">56</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50291069451530-5"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">inputs</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50291069451530-6"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">inputs</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50291069451530-7"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50291069451530-8"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_yticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50291069451530-9"><span class="crayon-h"> </span><span class="crayon-v">column</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">inputs</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50291069451530-10"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50291069451530-11"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50291069451530-12"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">column</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50291069451530-13"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0008 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50294759116339" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot inputs for a chunk
from numpy import unique
from pandas import read_csv
from matplotlib import pyplot

# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks

# plot all inputs for one or more chunk ids
def plot_chunk_inputs(chunks, c_ids):
	pyplot.figure()
	inputs = range(6, 56)
	for i in range(len(inputs)):
		ax = pyplot.subplot(len(inputs), 1, i+1)
		ax.set_xticklabels([])
		ax.set_yticklabels([])
		column = inputs[i]
		for chunk_id in c_ids:
			rows = chunks[chunk_id]
			pyplot.plot(rows[:,column])
	pyplot.show()

# load data
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# group data by chunks
values = dataset.values
chunks = to_chunks(values)
# plot inputs for some chunks
plot_chunk_inputs(chunks, [1])</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-32">32</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-34">34</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e50294759116339-36">36</div><div class="crayon-num" data-line="crayon-5c0c9a9e50294759116339-37">37</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-1"><span class="crayon-p"># plot inputs for a chunk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-3"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-4"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-5"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-6"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-7"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-8"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-9"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-10"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-11"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-12"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-13"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-14"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-15"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-16"> </div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-17"><span class="crayon-p"># plot all inputs for one or more chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-18"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_inputs</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-20"><span class="crayon-h"> </span><span class="crayon-v">inputs</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">56</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-21"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">inputs</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-22"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">inputs</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-23"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-24"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_yticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-25"><span class="crayon-h"> </span><span class="crayon-v">column</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">inputs</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-26"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-27"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-28"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">column</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-29"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-30"> </div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-31"><span class="crayon-p"># load data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-32"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-33"><span class="crayon-p"># group data by chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-34"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-35"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e50294759116339-36"><span class="crayon-p"># plot inputs for some chunks</span></div><div class="crayon-line" id="crayon-5c0c9a9e50294759116339-37"><span class="crayon-e">plot_chunk_inputs</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0016 seconds] -->
<p>Running the example creates a single figure with 50 line plots, one for each of the meteorological input variables.</p>
<p>The plots are hard to see, so you may want to increase the size of the created figure.</p>
<p>We can see that the observations for the first five variables look pretty complete; these are solar radiation, wind speed, and wind direction. The rest of the variables appear pretty patchy, at least for this chunk.</p>
<div class="wp-caption aligncenter" id="attachment_6300" style="width: 1290px"><img alt="Parallel Time Series Line Plots For All Input Variables for 1 Chunks" class="size-full wp-image-6300" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-1-Chunks.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-1-Chunks.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-1-Chunks-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-1-Chunks-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-1-Chunks-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Parallel Time Series Line Plots For All Input Variables for 1 Chunks</p></div>
<p>We can update the example and plot the input variables for the first three chunks with the full eight days of observations.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e50298625754774" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
plot_chunk_inputs(chunks, [1, 3 ,5])</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e50298625754774-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e50298625754774-1"><span class="crayon-e">plot_chunk_inputs</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-sy">,</span><span class="crayon-cn">5</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>Running the example creates the same 50 line plots, each with three series or lines per plot, one for each chunk.</p>
<p>Again, the figure makes the individual plots hard to see, so you may need to increase the size of the figure to better review the patterns.</p>
<p>We can see that these three figures do show similar structures within each line plot. This is helpful finding as it suggests that it may be useful to model the same variables across multiple chunks.</p>
<div class="wp-caption aligncenter" id="attachment_6301" style="width: 1290px"><img alt="Parallel Time Series Line Plots For All Input Variables for 3 Chunks" class="size-full wp-image-6301" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-3-Chunks.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-3-Chunks.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-3-Chunks-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-3-Chunks-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Input-Variables-for-3-Chunks-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Parallel Time Series Line Plots For All Input Variables for 3 Chunks</p></div>
<p>It does raise the question as to whether the distribution of the variables differs greatly across sites.</p>
<h3>Input Data Distribution</h3>
<p>We can look at the distribution of input variables crudely using box and whisker plots.</p>
<p>The <em>plot_chunk_input_boxplots()</em> below will create one box and whisker per input feature for the data for one chunk.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5029c783119705" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# boxplot for input variables for a chuck
def plot_chunk_input_boxplots(chunks, c_id):
	rows = chunks[c_id]
	pyplot.boxplot(rows[:,6:56])
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5029c783119705-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029c783119705-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029c783119705-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029c783119705-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029c783119705-5">5</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5029c783119705-1"><span class="crayon-p"># boxplot for input variables for a chuck</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029c783119705-2"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_input_boxplots</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029c783119705-3"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">c_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029c783119705-4"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-o">:</span><span class="crayon-cn">56</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029c783119705-5"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e5029f049631958" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# boxplots of inputs for a chunk
from numpy import unique
from numpy import isnan
from numpy import count_nonzero
from pandas import read_csv
from matplotlib import pyplot

# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks

# boxplot for input variables for a chuck
def plot_chunk_input_boxplots(chunks, c_id):
	rows = chunks[c_id]
	pyplot.boxplot(rows[:,6:56])
	pyplot.show()

# load data
dataset = read_csv('TrainingData.csv', header=0)
# group data by chunks
values = dataset.values
chunks = to_chunks(values)
# boxplot for input variables
plot_chunk_input_boxplots(chunks, 1)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e5029f049631958-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e5029f049631958-31">31</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-1"><span class="crayon-p"># boxplots of inputs for a chunk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">isnan</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-4"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">count_nonzero</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-5"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-6"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-7"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-8"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-9"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-10"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-11"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-12"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-13"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-14"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-15"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-16"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-17"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-18"> </div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-19"><span class="crayon-p"># boxplot for input variables for a chuck</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-20"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_input_boxplots</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-21"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">c_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-22"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-o">:</span><span class="crayon-cn">56</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-23"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-24"> </div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-25"><span class="crayon-p"># load data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-26"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-27"><span class="crayon-p"># group data by chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-28"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-29"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e5029f049631958-30"><span class="crayon-p"># boxplot for input variables</span></div><div class="crayon-line" id="crayon-5c0c9a9e5029f049631958-31"><span class="crayon-e">plot_chunk_input_boxplots</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>Running the example creates 50 boxplots, one for each input variable for the observations in the first chunk in the training dataset.</p>
<p>We can see that variables of the same type may have the same spread of observations, and each group of variables appears to have differing units. Perhaps degrees for wind direction, hectopascales for pressure, degrees Celsius for temperature, and so on.</p>
<div class="wp-caption aligncenter" id="attachment_6302" style="width: 1290px"><img alt="Box and whisker plots of input variables for one chunk" class="size-full wp-image-6302" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-input-variables-for-one-chunk.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-input-variables-for-one-chunk.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-input-variables-for-one-chunk-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-input-variables-for-one-chunk-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-input-variables-for-one-chunk-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Box and whisker plots of input variables for one chunk</p></div>
<p>It may be interesting to further investigate the distribution and spread of observations for each of the eight variable types. This is left as a further exercise.</p>
<p>We have some rough ideas about the input variables, and perhaps they may be useful in predicting the target variables. We cannot be sure.</p>
<p>We can now turn our attention to the target variables.</p>
<h2>Target Variables</h2>
<p>The goal of the forecast problem is to predict multiple variables across multiple sites for three days.</p>
<p>There are 39 time series variables to predict.</p>
<p>From the column header, they are:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502a3484983522" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
"target_1_57","target_10_4002","target_10_8003","target_11_1","target_11_32","target_11_50","target_11_64","target_11_1003","target_11_1601","target_11_4002","target_11_8003","target_14_4002","target_14_8003","target_15_57","target_2_57","target_3_1","target_3_50","target_3_57","target_3_1601","target_3_4002","target_3_6006","target_4_1","target_4_50","target_4_57","target_4_1018","target_4_1601","target_4_2001","target_4_4002","target_4_4101","target_4_6006","target_4_8003","target_5_6006","target_7_57","target_8_57","target_8_4002","target_8_6004","target_8_8003","target_9_4002","target_9_8003"</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502a3484983522-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502a3484983522-1">"target_1_57","target_10_4002","target_10_8003","target_11_1","target_11_32","target_11_50","target_11_64","target_11_1003","target_11_1601","target_11_4002","target_11_8003","target_14_4002","target_14_8003","target_15_57","target_2_57","target_3_1","target_3_50","target_3_57","target_3_1601","target_3_4002","target_3_6006","target_4_1","target_4_50","target_4_57","target_4_1018","target_4_1601","target_4_2001","target_4_4002","target_4_4101","target_4_6006","target_4_8003","target_5_6006","target_7_57","target_8_57","target_8_4002","target_8_6004","target_8_8003","target_9_4002","target_9_8003"</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>The naming convention for these column headers is:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502a5683473932" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
target_[variable identifier]_[site identifier]]</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502a5683473932-1">1</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502a5683473932-1">target_[variable identifier]_[site identifier]]</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>We can convert these column headers into a small dataset of variable ids and site ids with a little regex.</p>
<p>The results are as follows:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502a8008382286" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
var, site
1,57
10,4002
10,8003
11,1
11,32
11,50
11,64
11,1003
11,1601
11,4002
11,8003
14,4002
14,8003
15,57
2,57
3,1
3,50
3,57
3,1601
3,4002
3,6006
4,1
4,50
4,57
4,1018
4,1601
4,2001
4,4002
4,4101
4,6006
4,8003
5,6006
7,57
8,57
8,4002
8,6004
8,8003
9,4002
9,8003</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-32">32</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-34">34</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-36">36</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-38">38</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a8008382286-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a8008382286-40">40</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-1">var, site</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-2">1,57</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-3">10,4002</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-4">10,8003</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-5">11,1</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-6">11,32</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-7">11,50</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-8">11,64</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-9">11,1003</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-10">11,1601</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-11">11,4002</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-12">11,8003</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-13">14,4002</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-14">14,8003</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-15">15,57</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-16">2,57</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-17">3,1</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-18">3,50</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-19">3,57</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-20">3,1601</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-21">3,4002</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-22">3,6006</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-23">4,1</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-24">4,50</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-25">4,57</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-26">4,1018</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-27">4,1601</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-28">4,2001</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-29">4,4002</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-30">4,4101</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-31">4,6006</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-32">4,8003</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-33">5,6006</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-34">7,57</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-35">8,57</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-36">8,4002</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-37">8,6004</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-38">8,8003</div><div class="crayon-line" id="crayon-5c0c9a9e502a8008382286-39">9,4002</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a8008382286-40">9,8003</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>Helpfully, the targets are grouped by variable id.</p>
<p>We can see that one variable may have to be predicted across multiple sites; for example, variable 11 predicted at sites 1, 32, 50, and so on:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502a9034142781" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
var, site
11,1
11,32
11,50
11,64
11,1003
11,1601
11,4002
11,8003</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502a9034142781-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a9034142781-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a9034142781-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a9034142781-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a9034142781-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a9034142781-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a9034142781-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502a9034142781-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502a9034142781-9">9</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502a9034142781-1">var, site</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a9034142781-2">11,1</div><div class="crayon-line" id="crayon-5c0c9a9e502a9034142781-3">11,32</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a9034142781-4">11,50</div><div class="crayon-line" id="crayon-5c0c9a9e502a9034142781-5">11,64</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a9034142781-6">11,1003</div><div class="crayon-line" id="crayon-5c0c9a9e502a9034142781-7">11,1601</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502a9034142781-8">11,4002</div><div class="crayon-line" id="crayon-5c0c9a9e502a9034142781-9">11,8003</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>We can see that different variables may need to be predicted for a given site. For example, site 50 requires variables 11, 3, and 4:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502ab159314362" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
var, site
11,50
3,50
4,50</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502ab159314362-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502ab159314362-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502ab159314362-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502ab159314362-4">4</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502ab159314362-1">var, site</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502ab159314362-2">11,50</div><div class="crayon-line" id="crayon-5c0c9a9e502ab159314362-3">3,50</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502ab159314362-4">4,50</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>We can save the small dataset of targets to a file called ‘<em>targets.txt</em>‘ and load it up for some quick analysis.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502ad636253283" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# summarize targets
from numpy import unique
from pandas import read_csv
# load dataset
dataset = read_csv('targets.txt', header=0)
values = dataset.values
# summarize unique
print('Unique Variables: %d' % len(unique(values[:, 0])))
print('Unique Sites: %d' % len(unique(values[:, 1])))</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502ad636253283-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502ad636253283-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502ad636253283-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502ad636253283-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502ad636253283-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502ad636253283-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502ad636253283-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502ad636253283-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502ad636253283-9">9</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502ad636253283-1"><span class="crayon-p"># summarize targets</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502ad636253283-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0c9a9e502ad636253283-3"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-v">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502ad636253283-4"><span class="crayon-p"># load dataset</span></div><div class="crayon-line" id="crayon-5c0c9a9e502ad636253283-5"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'targets.txt'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502ad636253283-6"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e502ad636253283-7"><span class="crayon-p"># summarize unique</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502ad636253283-8"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Unique Variables: %d'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502ad636253283-9"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Unique Sites: %d'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>Running the example prints the number of unique variables and sites.</p>
<p>We can see that 39 target variables is far less than (12*14) 168 if we were predicting all variables for all sites.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502ae427411674" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
Unique Variables: 12
Unique Sites: 14</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502ae427411674-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502ae427411674-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502ae427411674-1">Unique Variables: 12</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502ae427411674-2">Unique Sites: 14</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>Let’s take a closer look at the data for the target variables.</p>
<h3>Temporal Structure of Targets for a Chunk</h3>
<p>We can start off by looking at the structure and distribution of targets per chunk.</p>
<p>The first few chunks that have all eight days of observations have the chunkId of 1, 3, and 5.</p>
<p>We can enumerate all of the target columns and create one line plot for each. This will create a time series line plot for each target variable to give a rough idea of how it varies across time.</p>
<p>We can repeat this for a few chunks to get a rough idea of how the temporal structure may vary across chunks.</p>
<p>The function below, named <em>plot_chunk_targets()</em>, takes the data in chunk format and a list of chunk ids to plot. It will create a figure with 39 line plots, one for each target variable, and n lines per plot, one for each chunk.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502b0605233013" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot all targets for one or more chunk ids
def plot_chunk_targets(chunks, c_ids):
	pyplot.figure()
	targets = range(56, 95)
	for i in range(len(targets)):
		ax = pyplot.subplot(len(targets), 1, i+1)
		ax.set_xticklabels([])
		ax.set_yticklabels([])
		column = targets[i]
		for chunk_id in c_ids:
			rows = chunks[chunk_id]
			pyplot.plot(rows[:,column])
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502b0605233013-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b0605233013-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b0605233013-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b0605233013-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b0605233013-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b0605233013-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b0605233013-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b0605233013-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b0605233013-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b0605233013-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b0605233013-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b0605233013-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b0605233013-13">13</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502b0605233013-1"><span class="crayon-p"># plot all targets for one or more chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b0605233013-2"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_targets</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b0605233013-3"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b0605233013-4"><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">56</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">95</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b0605233013-5"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b0605233013-6"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b0605233013-7"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b0605233013-8"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_yticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b0605233013-9"><span class="crayon-h"> </span><span class="crayon-v">column</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b0605233013-10"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b0605233013-11"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b0605233013-12"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">column</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b0605233013-13"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0009 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502b1791109760" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot targets for a chunk
from numpy import unique
from pandas import read_csv
from matplotlib import pyplot

# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks

# plot all targets for one or more chunk ids
def plot_chunk_targets(chunks, c_ids):
	pyplot.figure()
	targets = range(56, 95)
	for i in range(len(targets)):
		ax = pyplot.subplot(len(targets), 1, i+1)
		ax.set_xticklabels([])
		ax.set_yticklabels([])
		column = targets[i]
		for chunk_id in c_ids:
			rows = chunks[chunk_id]
			pyplot.plot(rows[:,column])
	pyplot.show()

# load data
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# group data by chunks
values = dataset.values
chunks = to_chunks(values)
# plot targets for some chunks
plot_chunk_targets(chunks, [1])</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-32">32</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-34">34</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b1791109760-36">36</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b1791109760-37">37</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-1"><span class="crayon-p"># plot targets for a chunk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-3"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-4"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-5"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-6"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-7"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-8"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-9"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-10"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-11"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-12"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-13"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-14"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-15"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-16"> </div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-17"><span class="crayon-p"># plot all targets for one or more chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-18"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_targets</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-20"><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">56</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">95</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-21"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-22"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-23"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-24"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_yticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-25"><span class="crayon-h"> </span><span class="crayon-v">column</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-26"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-27"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-28"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">plot</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">column</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-29"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-30"> </div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-31"><span class="crayon-p"># load data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-32"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-33"><span class="crayon-p"># group data by chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-34"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-35"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b1791109760-36"><span class="crayon-p"># plot targets for some chunks</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b1791109760-37"><span class="crayon-e">plot_chunk_targets</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0017 seconds] -->
<p>Running the example creates a single figure with 39 line plots for chunk identifier “1”.</p>
<p>The plots are small, but give a rough idea of the temporal structure for the variables.</p>
<p>We can see that there are more than a few variables that have no data for this chunk. These cannot be forecasted directly, and probably not indirectly.</p>
<p>This suggests that in addition to not having all variables for all sites, that even those specified in the column header may not be present for some chunks.</p>
<p>We can also see breaks in some of the series for missing values. This suggests that even though we may have observations for each time step within the chunk, that we may not have a contiguous series for all variables in the chunk.</p>
<p>There is a cyclic structure to many of the plots. Most have eight peaks, very likely corresponding to the eight days of observations within the chunk. This seasonal structure could be modeled directly, and perhaps removed from the data when modeling and added back to the forecasted interval.</p>
<p>There does not appear to be any trend to the series.</p>
<div class="wp-caption aligncenter" id="attachment_6303" style="width: 1290px"><img alt="Parallel Time Series Line Plots For All Target Variables for 1 Chunk" class="size-full wp-image-6303" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-1-Chunks.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-1-Chunks.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-1-Chunks-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-1-Chunks-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-1-Chunks-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Parallel Time Series Line Plots For All Target Variables for 1 Chunk</p></div>
<p>We can re-run the example and plot the target variables for the first three chunks with complete data.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502b4546943333" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot targets for some chunks
plot_chunk_targets(chunks, [1, 3 ,5])</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502b4546943333-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b4546943333-2">2</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502b4546943333-1"><span class="crayon-p"># plot targets for some chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b4546943333-2"><span class="crayon-e">plot_chunk_targets</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-sy">,</span><span class="crayon-cn">5</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>Running the example creates a figure with 39 plots and three time series per plot, one for the targets for each chunk.</p>
<p>The plot is busy, and you may want to increase the size of the plot window to better see the comparison across the chunks for the target variables.</p>
<p>For many of the variables that have a cyclic daily structure, we can see the structure repeated across the chunks.</p>
<p>This is encouraging as it suggests that modeling a variable for a site may be helpful across chunks.</p>
<p>Further, plots 3-to-10 correspond to variable 11 across seven different sites. The string similarity in temporal structure across these plots suggest that modeling the data per variable which is used across sites may be beneficial.</p>
<div class="wp-caption aligncenter" id="attachment_6304" style="width: 1290px"><img alt="Parallel Time Series Line Plots For All Target Variables for 3 Chunks" class="size-full wp-image-6304" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-3-Chunks.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-3-Chunks.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-3-Chunks-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-3-Chunks-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Parallel-Time-Series-Line-Plots-For-All-Target-Variables-for-3-Chunks-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Parallel Time Series Line Plots For All Target Variables for 3 Chunks</p></div>
<h3>Boxplot Distribution of Target Variables</h3>
<p>It is also useful to take a look at the distribution of the target variables.</p>
<p>We can start by taking a look at the distribution of each target variable for one chuck by creating box and whisker plots for each target variable.</p>
<p>A separate boxplot can be created for each target side-by-side, allowing the shape and range of values to be directly compared on the same scale.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502b6568693684" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# boxplot for target variables for a chuck
def plot_chunk_targets_boxplots(chunks, c_id):
	rows = chunks[c_id]
	pyplot.boxplot(rows[:,56:])
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502b6568693684-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b6568693684-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b6568693684-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b6568693684-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b6568693684-5">5</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502b6568693684-1"><span class="crayon-p"># boxplot for target variables for a chuck</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b6568693684-2"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_targets_boxplots</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b6568693684-3"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">c_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b6568693684-4"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">56</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b6568693684-5"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502b7896794876" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# boxplots of targets for a chunk
from numpy import unique
from numpy import isnan
from numpy import count_nonzero
from pandas import read_csv
from matplotlib import pyplot

# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks

# boxplot for target variables for a chuck
def plot_chunk_targets_boxplots(chunks, c_id):
	rows = chunks[c_id]
	pyplot.boxplot(rows[:,56:])
	pyplot.show()

# load data
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# group data by chunks
values = dataset.values
chunks = to_chunks(values)
# boxplot for target variables
plot_chunk_targets_boxplots(chunks, 1)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b7896794876-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b7896794876-31">31</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-1"><span class="crayon-p"># boxplots of targets for a chunk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">isnan</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-4"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">count_nonzero</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-5"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-6"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-7"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-8"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-9"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-10"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-11"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-12"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-13"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-14"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-15"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-16"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-17"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-18"> </div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-19"><span class="crayon-p"># boxplot for target variables for a chuck</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-20"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_targets_boxplots</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-21"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">c_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-22"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">56</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-23"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-24"> </div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-25"><span class="crayon-p"># load data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-26"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-27"><span class="crayon-p"># group data by chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-28"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-29"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b7896794876-30"><span class="crayon-p"># boxplot for target variables</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b7896794876-31"><span class="crayon-e">plot_chunk_targets_boxplots</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>Running the example creates a figure containing 39 boxplots, one for each of the 39 target variables for the first chunk.</p>
<p>We can see that many of the variables have a median close to zero or one; we can also see a large asymmetrical spread for most variables, suggesting the variables likely have a skew with outliers.</p>
<p>It is encouraging that the boxplots from 4-10 for variable 11 across seven sites show a similar distribution. This is further supporting evidence that data may be grouped by variable and used to fit a model that could be used across sites.</p>
<div class="wp-caption aligncenter" id="attachment_6305" style="width: 1290px"><img alt="Box and whisker plots of target variables for one chunk" class="size-full wp-image-6305" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-one-chunk.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-one-chunk.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-one-chunk-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-one-chunk-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-one-chunk-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Box and whisker plots of target variables for one chunk</p></div>
<p>We can re-create this plot using data across all chunks to see dataset-wide patterns.</p>
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502b9426129958" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# boxplots of targets for all chunks
from pandas import read_csv
from matplotlib import pyplot

# boxplot for all target variables
def plot_target_boxplots(values):
	pyplot.boxplot(values[:,56:])
	pyplot.show()

# load data
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# boxplot for target variables
values = dataset.values
plot_target_boxplots(values)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502b9426129958-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b9426129958-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b9426129958-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b9426129958-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b9426129958-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b9426129958-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b9426129958-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b9426129958-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b9426129958-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b9426129958-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b9426129958-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b9426129958-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502b9426129958-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502b9426129958-14">14</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502b9426129958-1"><span class="crayon-p"># boxplots of targets for all chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b9426129958-2"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b9426129958-3"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b9426129958-4"> </div><div class="crayon-line" id="crayon-5c0c9a9e502b9426129958-5"><span class="crayon-p"># boxplot for all target variables</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b9426129958-6"><span class="crayon-e">def </span><span class="crayon-e">plot_target_boxplots</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b9426129958-7"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">boxplot</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-cn">56</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b9426129958-8"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b9426129958-9"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b9426129958-10"><span class="crayon-p"># load data</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b9426129958-11"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b9426129958-12"><span class="crayon-p"># boxplot for target variables</span></div><div class="crayon-line" id="crayon-5c0c9a9e502b9426129958-13"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502b9426129958-14"><span class="crayon-e">plot_target_boxplots</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>Running the example creates a new figure showing 39 box and whisker plots for the entire training dataset regardless of chunk.</p>
<p>It is a little bit of a mess, where the circle outliers obscure the main data distributions.</p>
<p>We can see that outlier values do extend into the range 5-to-10 units. This suggests there might be some use in standardizing and/or rescaling the targets when modeling.</p>
<p>Perhaps the most useful finding is that there are some targets that do not have any (or very much) data regardless of chunk. These columns probably should be excluded from the dataset.</p>
<div class="wp-caption aligncenter" id="attachment_6306" style="width: 1290px"><img alt="Box and whisker plots of target variables for all training data" class="size-full wp-image-6306" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-all-training-data.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-all-training-data.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-all-training-data-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-all-training-data-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Box-and-whisker-plots-of-target-variables-for-all-training-data-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Box and whisker plots of target variables for all training data</p></div>
<h3>Apparently Empty Target Columns</h3>
<p>We can investigate the apparent missing data further by creating a bar chart of the ratio of missing data per column, excluding the metadata columns at the beginning (e.g. the first five columns).</p>
<p>The <em>plot_col_percentage_missing()</em> function below implements this.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502bb220002794" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# bar chart of the ratio of missing data per column
def plot_col_percentage_missing(values, ix_start=5):
	ratios = list()
	# skip early columns, with meta data or strings
	for col in range(ix_start, values.shape[1]):
		col_data = values[:, col].astype('float32')
		ratio = count_nonzero(isnan(col_data)) / len(col_data) * 100
		ratios.append(ratio)
		if ratio &gt; 90.0:
			print(col, ratio)
	col_id = [x for x in range(ix_start, values.shape[1])]
	pyplot.bar(col_id, ratios)
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502bb220002794-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bb220002794-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bb220002794-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bb220002794-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bb220002794-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bb220002794-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bb220002794-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bb220002794-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bb220002794-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bb220002794-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bb220002794-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bb220002794-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bb220002794-13">13</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502bb220002794-1"><span class="crayon-p"># bar chart of the ratio of missing data per column</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bb220002794-2"><span class="crayon-e">def </span><span class="crayon-e">plot_col_percentage_missing</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ix_start</span><span class="crayon-o">=</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bb220002794-3"><span class="crayon-h"> </span><span class="crayon-v">ratios</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bb220002794-4"><span class="crayon-h"> </span><span class="crayon-p"># skip early columns, with meta data or strings</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bb220002794-5"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">col </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">ix_start</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bb220002794-6"><span class="crayon-h"> </span><span class="crayon-v">col_data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">col</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">astype</span><span class="crayon-sy">(</span><span class="crayon-s">'float32'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bb220002794-7"><span class="crayon-h"> </span><span class="crayon-v">ratio</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">count_nonzero</span><span class="crayon-sy">(</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">col_data</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">col_data</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bb220002794-8"><span class="crayon-h"> </span><span class="crayon-v">ratios</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">ratio</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bb220002794-9"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">ratio</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">90.0</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bb220002794-10"><span class="crayon-h"> </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ratio</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bb220002794-11"><span class="crayon-h"> </span><span class="crayon-v">col_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">ix_start</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bb220002794-12"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">bar</span><span class="crayon-sy">(</span><span class="crayon-v">col_id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ratios</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bb220002794-13"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0010 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502bd729242727" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# summarize missing data per column
from numpy import isnan
from numpy import count_nonzero
from pandas import read_csv
from matplotlib import pyplot

# bar chart of the ratio of missing data per column
def plot_col_percentage_missing(values, ix_start=5):
	ratios = list()
	# skip early columns, with meta data or strings
	for col in range(ix_start, values.shape[1]):
		col_data = values[:, col].astype('float32')
		ratio = count_nonzero(isnan(col_data)) / len(col_data) * 100
		ratios.append(ratio)
		if ratio &gt; 90.0:
			print(ratio)
	col_id = [x for x in range(ix_start, values.shape[1])]
	pyplot.bar(col_id, ratios)
	pyplot.show()

# load data
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# plot ratio of missing data per column
values = dataset.values
plot_col_percentage_missing(values)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bd729242727-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bd729242727-25">25</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-1"><span class="crayon-p"># summarize missing data per column</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">isnan</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">count_nonzero</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-4"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-5"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-6"> </div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-7"><span class="crayon-p"># bar chart of the ratio of missing data per column</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-8"><span class="crayon-e">def </span><span class="crayon-e">plot_col_percentage_missing</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ix_start</span><span class="crayon-o">=</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-9"><span class="crayon-h"> </span><span class="crayon-v">ratios</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-10"><span class="crayon-h"> </span><span class="crayon-p"># skip early columns, with meta data or strings</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-11"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">col </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">ix_start</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-12"><span class="crayon-h"> </span><span class="crayon-v">col_data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">col</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">astype</span><span class="crayon-sy">(</span><span class="crayon-s">'float32'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-13"><span class="crayon-h"> </span><span class="crayon-v">ratio</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">count_nonzero</span><span class="crayon-sy">(</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">col_data</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">col_data</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">100</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-14"><span class="crayon-h"> </span><span class="crayon-v">ratios</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">ratio</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-15"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">ratio</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">90.0</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-16"><span class="crayon-h"> </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">ratio</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-17"><span class="crayon-h"> </span><span class="crayon-v">col_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-v">ix_start</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-18"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">bar</span><span class="crayon-sy">(</span><span class="crayon-v">col_id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ratios</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-19"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-20"> </div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-21"><span class="crayon-p"># load data</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-22"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-23"><span class="crayon-p"># plot ratio of missing data per column</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bd729242727-24"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line" id="crayon-5c0c9a9e502bd729242727-25"><span class="crayon-e">plot_col_percentage_missing</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>Running the example first prints the column id (zero offset) and the ratio of missing data, if the ratio is above 90%.</p>
<p>We can see that there are in fact no columns with zero non-NaN data, but perhaps two dozen (12) that have above 90% missing data.</p>
<p>Interestingly, seven of these are target variables (index 56 or higher).</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502bf301486371" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
11 91.48885539779488
20 91.48885539779488
29 91.48885539779488
38 91.48885539779488
47 91.48885539779488
58 95.38880516115385
66 96.9805134713519
68 95.38880516115385
72 97.31630575606145
86 95.38880516115385
92 95.38880516115385
94 95.38880516115385</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502bf301486371-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bf301486371-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bf301486371-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bf301486371-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bf301486371-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bf301486371-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bf301486371-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bf301486371-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bf301486371-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bf301486371-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502bf301486371-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502bf301486371-12">12</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502bf301486371-1">11 91.48885539779488</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bf301486371-2">20 91.48885539779488</div><div class="crayon-line" id="crayon-5c0c9a9e502bf301486371-3">29 91.48885539779488</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bf301486371-4">38 91.48885539779488</div><div class="crayon-line" id="crayon-5c0c9a9e502bf301486371-5">47 91.48885539779488</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bf301486371-6">58 95.38880516115385</div><div class="crayon-line" id="crayon-5c0c9a9e502bf301486371-7">66 96.9805134713519</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bf301486371-8">68 95.38880516115385</div><div class="crayon-line" id="crayon-5c0c9a9e502bf301486371-9">72 97.31630575606145</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bf301486371-10">86 95.38880516115385</div><div class="crayon-line" id="crayon-5c0c9a9e502bf301486371-11">92 95.38880516115385</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502bf301486371-12">94 95.38880516115385</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0000 seconds] -->
<p>A bar chart of column index number to ratio of missing data is created.</p>
<p>We can see that there might be some stratification to the ratio of missing data, with a cluster below 10%, a cluster around 70%, and a cluster above 90%.</p>
<p>We can also see a separation between input variable and target variables where the former are quite regular as they show the same variable type measured across different sites.</p>
<p>Such small amounts of data for some target variables suggest the need to leverage other factors besides past observations in order to make predictions.</p>
<div class="wp-caption aligncenter" id="attachment_6307" style="width: 1290px"><img alt="Bar Chart of Percentage of Missing Data Per Column" class="size-full wp-image-6307" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Bar-Chart-of-Percentage-of-Missing-Data-Per-Column.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Bar-Chart-of-Percentage-of-Missing-Data-Per-Column.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Bar-Chart-of-Percentage-of-Missing-Data-Per-Column-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Bar-Chart-of-Percentage-of-Missing-Data-Per-Column-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Bar-Chart-of-Percentage-of-Missing-Data-Per-Column-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Bar Chart of Percentage of Missing Data Per Column</p></div>
<h3>Histogram Distribution of Target Variables</h3>
<p>The distribution of the target variables are not neat and may be non-Gaussian at the least, or highly multimodal at worst.</p>
<p>We can check this by looking at histograms of the target variables, for the data for a single chunk.</p>
<p>A problem with the <em>hist()</em> function in matplotlib is that it is not robust to NaN values. We can overcome this by checking that each column has non-NaN values prior to plotting and excluding the rows with NaN values.</p>
<p>The function below does this and creates one histogram for each target variable for one or more chunks.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502c1945985636" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot distribution of targets for one or more chunk ids
def plot_chunk_targets_hist(chunks, c_ids):
	pyplot.figure()
	targets = range(56, 95)
	for i in range(len(targets)):
		ax = pyplot.subplot(len(targets), 1, i+1)
		ax.set_xticklabels([])
		ax.set_yticklabels([])
		column = targets[i]
		for chunk_id in c_ids:
			rows = chunks[chunk_id]
			# extract column of interest
			col = rows[:,column].astype('float32')
			# check for some data to plot
			if count_nonzero(isnan(col)) &lt; len(rows):
				# only plot non-nan values
				pyplot.hist(col[~isnan(col)], bins=100)
	pyplot.show()</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c1945985636-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c1945985636-18">18</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-1"><span class="crayon-p"># plot distribution of targets for one or more chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-2"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_targets_hist</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-3"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-4"><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">56</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">95</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-5"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-6"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-7"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-8"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_yticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-9"><span class="crayon-h"> </span><span class="crayon-v">column</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-10"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-11"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-12"><span class="crayon-h"> </span><span class="crayon-p"># extract column of interest</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-13"><span class="crayon-h"> </span><span class="crayon-v">col</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">column</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">astype</span><span class="crayon-sy">(</span><span class="crayon-s">'float32'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-14"><span class="crayon-h"> </span><span class="crayon-p"># check for some data to plot</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-15"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">count_nonzero</span><span class="crayon-sy">(</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-16"><span class="crayon-h"> </span><span class="crayon-p"># only plot non-nan values</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c1945985636-17"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">[</span><span class="crayon-o">~</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c1945985636-18"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502c3457927716" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot distribution of targets for a chunk
from numpy import unique
from numpy import isnan
from numpy import count_nonzero
from pandas import read_csv
from matplotlib import pyplot

# split the dataset by 'chunkID', return a dict of id to rows
def to_chunks(values, chunk_ix=1):
	chunks = dict()
	# get the unique chunk ids
	chunk_ids = unique(values[:, chunk_ix])
	# group rows by chunk id
	for chunk_id in chunk_ids:
		selection = values[:, chunk_ix] == chunk_id
		chunks[chunk_id] = values[selection, :]
	return chunks

# plot distribution of targets for one or more chunk ids
def plot_chunk_targets_hist(chunks, c_ids):
	pyplot.figure()
	targets = range(56, 95)
	for i in range(len(targets)):
		ax = pyplot.subplot(len(targets), 1, i+1)
		ax.set_xticklabels([])
		ax.set_yticklabels([])
		column = targets[i]
		for chunk_id in c_ids:
			rows = chunks[chunk_id]
			# extract column of interest
			col = rows[:,column].astype('float32')
			# check for some data to plot
			if count_nonzero(isnan(col)) &lt; len(rows):
				# only plot non-nan values
				pyplot.hist(col[~isnan(col)], bins=100)
	pyplot.show()

# load data
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# group data by chunks
values = dataset.values
chunks = to_chunks(values)
# plot targets for some chunks
plot_chunk_targets_hist(chunks, [1])</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-28">28</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-30">30</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-32">32</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-34">34</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-36">36</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-38">38</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-40">40</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-42">42</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c3457927716-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c3457927716-44">44</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-1"><span class="crayon-p"># plot distribution of targets for a chunk</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">unique</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">isnan</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-4"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">count_nonzero</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-5"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-6"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-7"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-8"><span class="crayon-p"># split the dataset by 'chunkID', return a dict of id to rows</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-9"><span class="crayon-e">def </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-10"><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dict</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-11"><span class="crayon-h"> </span><span class="crayon-p"># get the unique chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-12"><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">unique</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-13"><span class="crayon-h"> </span><span class="crayon-p"># group rows by chunk id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-14"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-15"><span class="crayon-h"> </span><span class="crayon-v">selection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">chunk_ix</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-16"><span class="crayon-e"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">selection</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-17"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-18"> </div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-19"><span class="crayon-p"># plot distribution of targets for one or more chunk ids</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-20"><span class="crayon-e">def </span><span class="crayon-e">plot_chunk_targets_hist</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-21"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-22"><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">56</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">95</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-23"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-24"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-25"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-26"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_yticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-27"><span class="crayon-h"> </span><span class="crayon-v">column</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-28"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">chunk_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">c_ids</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-29"><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">chunks</span><span class="crayon-sy">[</span><span class="crayon-v">chunk_id</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-30"><span class="crayon-h"> </span><span class="crayon-p"># extract column of interest</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-31"><span class="crayon-h"> </span><span class="crayon-v">col</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">rows</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">column</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">astype</span><span class="crayon-sy">(</span><span class="crayon-s">'float32'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-32"><span class="crayon-h"> </span><span class="crayon-p"># check for some data to plot</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-33"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">count_nonzero</span><span class="crayon-sy">(</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">rows</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-34"><span class="crayon-h"> </span><span class="crayon-p"># only plot non-nan values</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-35"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">[</span><span class="crayon-o">~</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-36"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-37"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-38"><span class="crayon-p"># load data</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-39"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-40"><span class="crayon-p"># group data by chunks</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-41"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-42"><span class="crayon-v">chunks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">to_chunks</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c3457927716-43"><span class="crayon-p"># plot targets for some chunks</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c3457927716-44"><span class="crayon-e">plot_chunk_targets_hist</span><span class="crayon-sy">(</span><span class="crayon-v">chunks</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0020 seconds] -->
<p>Running the example creates a figure with 39 histograms, one for each target variable for the first chunk.</p>
<p>The plot is hard to read, but the large number of bins goes to show the distribution of the variables.</p>
<p>It might be fair to say that perhaps none of the target variables have an obvious Gaussian distribution. Many may have a skewed distribution with a long right tail.</p>
<p>Other variables have what appears to be quite a discrete distribution that might be an artifact of the chosen measurement device or measurement scale.</p>
<div class="wp-caption aligncenter" id="attachment_6308" style="width: 1290px"><img alt="Histograms for each target variable for one chunk" class="size-full wp-image-6308" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-one-chunk.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-one-chunk.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-one-chunk-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-one-chunk-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-one-chunk-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Histograms for each target variable for one chunk</p></div>
<p>We can re-create the same plot with target variables for all chunks.</p>
<p>The complete example is listed below.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502c5400256983" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
# plot distribution of all targets
from numpy import isnan
from numpy import count_nonzero
from pandas import read_csv
from matplotlib import pyplot

# plot histogram for each target variable
def plot_target_hist(values):
	pyplot.figure()
	targets = range(56, 95)
	for i in range(len(targets)):
		ax = pyplot.subplot(len(targets), 1, i+1)
		ax.set_xticklabels([])
		ax.set_yticklabels([])
		column = targets[i]
		# extract column of interest
		col = values[:,column].astype('float32')
		# check for some data to plot
		if count_nonzero(isnan(col)) &lt; len(values):
			# only plot non-nan values
			pyplot.hist(col[~isnan(col)], bins=100)
	pyplot.show()

# load data
dataset = read_csv('AirQualityPrediction/TrainingData.csv', header=0)
# plot targets for all chunks
values = dataset.values
plot_target_hist(values)</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-16">16</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-18">18</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-20">20</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-22">22</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-24">24</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-26">26</div><div class="crayon-num" data-line="crayon-5c0c9a9e502c5400256983-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502c5400256983-28">28</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-1"><span class="crayon-p"># plot distribution of all targets</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-2"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">isnan</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-3"><span class="crayon-e">from </span><span class="crayon-e">numpy </span><span class="crayon-e">import </span><span class="crayon-e">count_nonzero</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-4"><span class="crayon-e">from </span><span class="crayon-e">pandas </span><span class="crayon-e">import </span><span class="crayon-e">read_csv</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-5"><span class="crayon-e">from </span><span class="crayon-e">matplotlib </span><span class="crayon-e">import </span><span class="crayon-v">pyplot</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-6"> </div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-7"><span class="crayon-p"># plot histogram for each target variable</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-8"><span class="crayon-e">def </span><span class="crayon-e">plot_target_hist</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-9"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">figure</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-10"><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">56</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">95</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-11"><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-12"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">subplot</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">targets</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-13"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_xticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-14"><span class="crayon-h"> </span><span class="crayon-v">ax</span><span class="crayon-sy">.</span><span class="crayon-e">set_yticklabels</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-15"><span class="crayon-h"> </span><span class="crayon-v">column</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">targets</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-16"><span class="crayon-h"> </span><span class="crayon-p"># extract column of interest</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-17"><span class="crayon-h"> </span><span class="crayon-v">col</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">,</span><span class="crayon-v">column</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">astype</span><span class="crayon-sy">(</span><span class="crayon-s">'float32'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-18"><span class="crayon-h"> </span><span class="crayon-p"># check for some data to plot</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-19"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">count_nonzero</span><span class="crayon-sy">(</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-20"><span class="crayon-h"> </span><span class="crayon-p"># only plot non-nan values</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-21"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">hist</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">[</span><span class="crayon-o">~</span><span class="crayon-e">isnan</span><span class="crayon-sy">(</span><span class="crayon-v">col</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bins</span><span class="crayon-o">=</span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-22"><span class="crayon-h"> </span><span class="crayon-v">pyplot</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-23"> </div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-24"><span class="crayon-p"># load data</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-25"><span class="crayon-v">dataset</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">read_csv</span><span class="crayon-sy">(</span><span class="crayon-s">'AirQualityPrediction/TrainingData.csv'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">header</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-26"><span class="crayon-p"># plot targets for all chunks</span></div><div class="crayon-line" id="crayon-5c0c9a9e502c5400256983-27"><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">dataset</span><span class="crayon-sy">.</span><span class="crayon-e">values</span></div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502c5400256983-28"><span class="crayon-e">plot_target_hist</span><span class="crayon-sy">(</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0013 seconds] -->
<p>Running the example creates a figure with 39 histograms, one for each of the target variables in the training dataset.</p>
<p>We can see fuller distributions, which are more insightful.</p>
<p>The first handful of plots perhaps show a highly skewed distribution, the core of which may or may not be Gaussian.</p>
<p>We can see many Gaussian-like distributions with gaps, suggesting discrete measurements imposed on a Gaussian-distributed continuous variable.</p>
<p>We can also see some variables that show an exponential distribution.</p>
<p>Together, this suggests either the use of <a href="https://machinelearningmastery.com/power-transform-time-series-forecast-data-python/">power transforms</a> to explore reshaping the data to be more Gaussian, and/or the use of nonparametric modeling methods that are not dependent upon a Gaussian distribution of the variables. For example, classical linear methods may be expected to have a hard time.</p>
<div class="wp-caption aligncenter" id="attachment_6309" style="width: 1290px"><img alt="Histograms for each target variable for the entire training dataset" class="size-full wp-image-6309" height="960" sizes="(max-width: 1280px) 100vw, 1280px" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-the-entire-training-dataset.png" srcset="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-the-entire-training-dataset.png 1280w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-the-entire-training-dataset-300x225.png 300w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-the-entire-training-dataset-768x576.png 768w, https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/07/Histograms-for-each-target-variable-for-the-entire-training-dataset-1024x768.png 1024w" width="1280"/><p class="wp-caption-text">Histograms for each target variable for the entire training dataset</p></div>
<h2>A Wrinkle With Target Variables</h2>
<p>After the end of the competition, the person who provided the data, <a href="https://www.linkedin.com/in/david-chudzicki-3ba1a92a/">David Chudzicki</a>, summarized the true meaning of the 12 output variables.</p>
<p>This was provided in a form post titled “<a href="https://www.kaggle.com/c/dsg-hackathon/discussion/1830">what the target variables really were</a>“, reproduced partially below:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->
<div class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover" id="crayon-5c0c9a9e502d0330222901" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;" wrap="soft">
Description						Target Variable
Carbon monoxide, 				8
Sulfur dioxide, 				4
SO2 max 5-min avg, 				3
Nitric oxide (NO),				10
Nitrogen dioxide (NO2),			14
Oxides of nitrogen (NOx), 		9
Ozone,							11
PM10 Total 0-10um STP, 			5
OC CSN Unadjusted PM2.5 LC TOT,	15
Total Nitrate PM2.5 LC, 		2
EC CSN PM2.5 LC TOT, 			1
Total Carbon PM2.5 LC TOT, 		7
Sulfate PM2.5 LC, 				8
PM2.5 Raw Data, 				4
PM2.5 AQI &amp; Speciation Mass, 	3</textarea></div>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5c0c9a9e502d0330222901-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502d0330222901-2">2</div><div class="crayon-num" data-line="crayon-5c0c9a9e502d0330222901-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502d0330222901-4">4</div><div class="crayon-num" data-line="crayon-5c0c9a9e502d0330222901-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502d0330222901-6">6</div><div class="crayon-num" data-line="crayon-5c0c9a9e502d0330222901-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502d0330222901-8">8</div><div class="crayon-num" data-line="crayon-5c0c9a9e502d0330222901-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502d0330222901-10">10</div><div class="crayon-num" data-line="crayon-5c0c9a9e502d0330222901-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502d0330222901-12">12</div><div class="crayon-num" data-line="crayon-5c0c9a9e502d0330222901-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502d0330222901-14">14</div><div class="crayon-num" data-line="crayon-5c0c9a9e502d0330222901-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5c0c9a9e502d0330222901-16">16</div></div>
</td>
<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5c0c9a9e502d0330222901-1">Description						Target Variable</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502d0330222901-2">Carbon monoxide, 				8</div><div class="crayon-line" id="crayon-5c0c9a9e502d0330222901-3">Sulfur dioxide, 				4</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502d0330222901-4">SO2 max 5-min avg, 				3</div><div class="crayon-line" id="crayon-5c0c9a9e502d0330222901-5">Nitric oxide (NO),				10</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502d0330222901-6">Nitrogen dioxide (NO2),			14</div><div class="crayon-line" id="crayon-5c0c9a9e502d0330222901-7">Oxides of nitrogen (NOx), 		9</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502d0330222901-8">Ozone,							11</div><div class="crayon-line" id="crayon-5c0c9a9e502d0330222901-9">PM10 Total 0-10um STP, 			5</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502d0330222901-10">OC CSN Unadjusted PM2.5 LC TOT,	15</div><div class="crayon-line" id="crayon-5c0c9a9e502d0330222901-11">Total Nitrate PM2.5 LC, 		2</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502d0330222901-12">EC CSN PM2.5 LC TOT, 			1</div><div class="crayon-line" id="crayon-5c0c9a9e502d0330222901-13">Total Carbon PM2.5 LC TOT, 		7</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502d0330222901-14">Sulfate PM2.5 LC, 				8</div><div class="crayon-line" id="crayon-5c0c9a9e502d0330222901-15">PM2.5 Raw Data, 				4</div><div class="crayon-line crayon-striped-line" id="crayon-5c0c9a9e502d0330222901-16">PM2.5 AQI &amp; Speciation Mass, 	3</div></div></td>
</tr>
</table>
</div>
</div>
<!-- [Format Time: 0.0001 seconds] -->
<p>This is interesting as we can see that the target variables are meteorological in nature and related to air quality as the name of the competition suggests.</p>
<p>A problem is that there are 15 variables and only 12 different types of target variables in the dataset.</p>
<p>The cause of this problem is that the same target variable in the dataset may be used to represent different target variables. Specifically:</p>
<ul>
<li>Target 8 could be data for ‘<em>Carbon monoxide</em>‘ or ‘<em>Sulfate PM2.5 LC</em>‘.</li>
<li>Target 4 could be data for ‘<em>Sulfur dioxide</em>‘ or ‘<em>PM2.5 Raw Data</em>‘.</li>
<li>Target 3 could be data for ‘<em>SO2 max 5-min avg</em>‘ or ‘<em>PM2.5 AQI &amp; Speciation Mass</em>‘.</li>
</ul>
<p>From the names of the variables, the doubling-up of data into the same target variable was done so with variables with differing chemical characters and perhaps even measures, e.g. it appears to be accidental rather than strategic.</p>
<p>It is not clear, but it is likely that a target represents one variable within a chunk but may represent different variables across chunks. Alternately, it may be possible that the variables differ across sites within each chunk. In the former case, it means that models that expect consistency in these target variables across chunks, which is a very reasonable assumption, may have difficulty. In the latter, models can treat the variable-site combinations as distinct variables.</p>
<p>It may be possible to tease out the differences by comparing the distribution and scales of these variables across chunks.</p>
<p>This is disappointing, and depending on how consequential it is to model skill, it may require the removal of these variables from the dataset, which are a lot of the target variables (20 of 39).</p>
<h2>Thoughts on Modeling</h2>
<p>In this section, we will harness what we have discovered about the problem and suggest some approaches to modeling this problem.</p>
<p>I like this dataset; it is messy, realistic, and resists naive approaches.</p>
<p>This section is divided into four sections; they are:</p>
<ul>
<li>Framing.</li>
<li>Data Preparation.</li>
<li>Modeling.</li>
<li>Evaluation.</li>
</ul>
<h3>Framing</h3>
<p>The problem is generally framed as a multivariate multi-step time series forecasting problem.</p>
<p>Further, the multiple variables are required to be forecasted across multiple sites, which is a common structural breakdown for time series forecasting problems, e.g. predict the variable thing at different physical locations such as stores or stations.</p>
<p>Let’s walk through some possible framings of the data.</p>
<h4>Univariate by Variable and Site</h4>
<p>A first-cut approach might be to treat each variable at each site as a univariate time series forecasting problem.</p>
<p>A model is given eight days of hourly observations for a variable and is asked to forecast three days, from which a specific subset of forecast lead times are taken and used or evaluated.</p>
<p>It may be possible in a few select cases, and this could be confirmed with some further data analysis.</p>
<p>Nevertheless, the data generally resists this framing because not all chunks have eight days of observations for each target variable. Further, the time series for the target variable can be dramatically discontiguous, if not mostly (90%-to-95%) incomplete.</p>
<p>We could relax the expectation of the structure and amount of prior data required by the model, designing the model to make use of whatever is available.</p>
<p>This approach would require 39 models per chunk and a total of (208 * 39) or 8,112 separate models. It sounds possible, but perhaps less scalable than we may prefer from an engineering perspective.</p>
<p>The variable-site combinations could be modeled across chunks, requiring only 39 models.</p>
<h4>Univariate by Variable</h4>
<p>The target variables can be aggregated across sites.</p>
<p>We can also relax what lag lead times are used to make a forecast and present what is available either with zero-padding or imputing for missing values, or even lag observations that disregard lead time.</p>
<p>We can then frame the problem as given some prior observations for a given variable, forecast the following three days.</p>
<p>The models may have more to work with, but will disregard any variable differences based on site. This may or may not be reasonless and could be checked by comparing variable distributions across sites.</p>
<p>There are 12 unique variables.</p>
<p>We could model each variable per chunk, giving (208 * 12) or 2,496 models. It might make more sense to model the 12 variables across chunks, requiring only 12 models.</p>
<h4>Multivariate Models</h4>
<p>Perhaps one or more target variables are dependent on one or more of the meteorological variables, or even on the other target variables.</p>
<p>This could be explored by investigating the correlation between each target variable and each input variable, as well as with the other target variables.</p>
<p>If such dependencies exist, or could be assumed, it may be possible to not only forecast the variables with more complete data, but also those target variables with above 90% missing data.</p>
<p>Such models could use some subset of prior meteorological observations and/or target variable observations as input. The discontiguous nature of the data may require the relaxing of the traditional lag temporal structure for the input variables, allowing the model to use whatever was available for a specific forecast.</p>
<h2>Data Preparation</h2>
<p>Depending on the choice of model, the input and target variables may benefit from some data preparation, such as:</p>
<ul>
<li>Standardization.</li>
<li>Normalization.</li>
<li>Power Transform, where Gaussian.</li>
<li>Seasonal Differencing, where seasonal structures are present.</li>
</ul>
<p>To address the missing data, in some cases imputing may be required with simple persistence or averaging.</p>
<p>In other cases, and depending on the choice of model, it may be possible to learn directly from the NaN values as observations (e.g. XGBoost can do this) or to fill with 0 values and mask the inputs (e.g. LSTMs can do this).</p>
<p>It may be interesting to investigate downscaling input to 2, 4, or 12, hourly data or similar in an attempt to fill the gaps in discontiguous data, e.g. forecast hourly from 12 hourly data.</p>
<h3>Modeling</h3>
<p>Modeling may require some prototyping to discover what works well in terms of methods and chosen input observations.</p>
<h4>Classical Methods</h4>
<p>There may be rare examples of chunks with complete data where classical methods like ETS or SARIMA could be used for univariate forecasting.</p>
<p>Generally, the problem resists the classical methods.</p>
<h4>Machine Learning</h4>
<p>A good choice would be the use of nonlinear machine learning methods that are agnostic about the temporal structure of the input data, making use of whatever is available.</p>
<p>Such models could be used in a recursive or direct strategy to forecast the lead times. A direct strategy may make more sense, with one model per required lead time.</p>
<p>There are 10 lead times, and 39 target variables, in which case a direct strategy would require (39 * 10) or 390 models.</p>
<p>A downside of the direct approach to modeling the problem is the inability of the model to leverage any dependencies between target variables in the forecast interval, specifically across sites, across variables, or across lead times. If these dependencies exist (and some surely do), it may be possible to add a flavor of them in using a second-tier of of ensemble models.</p>
<p>Feature selection could be used to discover the variables and/or the lag lead times that may provide the most value in forecasting each target variable and lead time.</p>
<p>This approach would provide a lot of flexibility, and as was shown in the competition, ensembles of decision trees perform well with little tuning.</p>
<h4>Deep Learning</h4>
<p>Like machine learning methods, deep learning methods may be able to use whatever multivariate data is available in order to make a prediction.</p>
<p>Two classes of neural networks may be worth exploring for this problem:</p>
<ul>
<li>Convolutional Neural Networks or CNNs.</li>
<li>Recurrent Neural Networks, specifically Long Short-Term Memory networks or LSTMs.</li>
</ul>
<p>CNNs are capable of distilling long sequences of multivariate input time series data into small feature maps, and in essence learn the features from the sequences that are most relevant for forecasting. Their ability to handle noise and feature invariance across the input sequences may be useful. Like other neural networks, CNNs can output a vector in order to predict the forecast lead times.</p>
<p>LSTMs are designed to work with sequence data and can directly support missing data via masking. They too are capable of automatic feature learning from long input sequences and alone or combined with CNNs may perform well on this problem. Together with an encoder-decoder architecture, the LSTM network can be used to natively forecast multiple lead times.</p>
<h3>Evaluation</h3>
<p>A naive approach that mirrors that used in the competition might be best for evaluating models.</p>
<p>That is, splitting each chunk into train and test sets, in this case using the first five days of data for training and the remaining three for test.</p>
<p>It may be possible and interesting to finalize a model by training it on the entire dataset and submitting a forecast to the Kaggle website for evaluation on the held out test dataset.</p>
<h2>Further Reading</h2>
<p>This section provides more resources on the topic if you are looking to go deeper.</p>
<ul>
<li><a href="https://machinelearningmastery.com/standard-multivariate-multi-step-multi-site-time-series-forecasting-problem/">A Standard Multivariate, Multi-Step, and Multi-Site Time Series Forecasting Problem</a></li>
<li><a href="https://www.kaggle.com/c/dsg-hackathon/data">EMC Data Science Global Hackathon (Air Quality Prediction)</a></li>
<li><a href="http://blog.kaggle.com/2012/05/01/chucking-everything-into-a-random-forest-ben-hamner-on-winning-the-air-quality-prediction-hackathon/">Chucking everything into a Random Forest: Ben Hamner on Winning The Air Quality Prediction Hackathon</a></li>
<li><a href="https://github.com/benhamner/Air-Quality-Prediction-Hackathon-Winning-Model">Winning Code for the EMC Data Science Global Hackathon (Air Quality Prediction)</a></li>
<li><a href="https://www.kaggle.com/c/dsg-hackathon/discussion/1821">General approaches to partitioning the models?</a></li>
</ul>
<h2>Summary</h2>
<p>In this tutorial, you discovered and explored the Air Quality Prediction dataset that represents a challenging multivariate, multi-site, and multi-step time series forecasting problem.</p>
<p>Specifically, you learned:</p>
<ul>
<li>How to load and explore the chunk-structure of the dataset.</li>
<li>How to explore and visualize the input and target variables for the dataset.</li>
<li>How to use the new understand to outline a suite of methods for framing the problem, preparing the data, and modeling the dataset.</li>
</ul>
<p>Do you have any questions?<br/>
Ask your questions in the comments below and I will do my best to answer.</p>
<div class="awac-wrapper"><div class="awac widget text-52"> <div class="textwidget"><p></p><center><br/>
<div class="woo-sc-hr"></div>
<h2>Develop Deep Learning models for Time Series Today!</h2>
<p><a href="/deep-learning-for-time-series-forecasting/"><img align="left" alt="Deep Learning for Time Series Forecasting" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/08/Cover-220.png" style="border: 0;"/></a></p>
<h4>Develop Your Own Forecasting models in Minutes</h4>
<p>…with just a few lines of python code</p>
<p>Discover how in my new Ebook:<br/>
<a href="/deep-learning-for-time-series-forecasting/">Deep Learning for Time Series Forecasting</a></p>
<p>It provides <strong>self-study tutorials</strong> on topics like: <em>CNNs</em>, <em>LSTMs</em>,<br/>
<em>Multivariate Forecasting</em>, <em>Multi-Step Forecasting</em> and much more…</p>
<h4>Finally Bring Deep Learning to your Time Series Forecasting Projects</h4>
<p>Skip the Academics. Just Results.</p>
<p><a href="/deep-learning-for-time-series-forecasting/">Click to learn more</a>.<br/>
</p><div class="woo-sc-hr"></div><br/>
</center>
</div>
</div></div><div class="simplesocialbuttons simplesocial-simple-icons simplesocialbuttons_inline simplesocialbuttons-align-left post-6295 post simplesocialbuttons-inline-no-animation">
<button class="ssb_tweet-icon" data-href="https://twitter.com/share?text=How+to+Load%2C+Visualize%2C+and+Explore+a+Complex+Multivariate+Multistep+Time+Series+Forecasting+Dataset&amp;url=https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" rel="nofollow">
<span class="icon"><svg viewbox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h72v72H0z" fill="none"></path><path class="icon" d="M68.812 15.14c-2.348 1.04-4.87 1.744-7.52 2.06 2.704-1.62 4.78-4.186 5.757-7.243-2.53 1.5-5.33 2.592-8.314 3.176C56.35 10.59 52.948 9 49.182 9c-7.23 0-13.092 5.86-13.092 13.093 0 1.026.118 2.02.338 2.98C25.543 24.527 15.9 19.318 9.44 11.396c-1.125 1.936-1.77 4.184-1.77 6.58 0 4.543 2.312 8.552 5.824 10.9-2.146-.07-4.165-.658-5.93-1.64-.002.056-.002.11-.002.163 0 6.345 4.513 11.638 10.504 12.84-1.1.298-2.256.457-3.45.457-.845 0-1.666-.078-2.464-.23 1.667 5.2 6.5 8.985 12.23 9.09-4.482 3.51-10.13 5.605-16.26 5.605-1.055 0-2.096-.06-3.122-.184 5.794 3.717 12.676 5.882 20.067 5.882 24.083 0 37.25-19.95 37.25-37.25 0-.565-.013-1.133-.038-1.693 2.558-1.847 4.778-4.15 6.532-6.774z" fill="#fff"></path></svg></span><i class="simplesocialtxt">Tweet </i></button>
<button class="ssb_fbshare-icon" data-href="https://www.facebook.com/sharer/sharer.php?u=https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" target="_blank">
<span class="icon"><svg class="_1pbq" color="#ffffff" viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path class="icon" d="M8 14H3.667C2.733 13.9 2 13.167 2 12.233V3.667A1.65 1.65 0 0 1 3.667 2h8.666A1.65 1.65 0 0 1 14 3.667v8.566c0 .934-.733 1.667-1.667 1.767H10v-3.967h1.3l.7-2.066h-2V6.933c0-.466.167-.9.867-.9H12v-1.8c.033 0-.933-.266-1.533-.266-1.267 0-2.434.7-2.467 2.133v1.867H6v2.066h2V14z" fill="#ffffff" fill-rule="evenodd"></path></svg></span>
<span class="simplesocialtxt">Share </span> </button>
<button class="ssb_linkedin-icon" data-href="https://www.linkedin.com/cws/share?url=https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
<span class="icon"> <svg enable-background="new -301.4 387.5 15 14.1" height="14.1px" id="Layer_1" version="1.1" viewbox="-301.4 387.5 15 14.1" width="15px" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px"> <g id="XMLID_398_"> <path d="M-296.2,401.6c0-3.2,0-6.3,0-9.5h0.1c1,0,2,0,2.9,0c0.1,0,0.1,0,0.1,0.1c0,0.4,0,0.8,0,1.2 c0.1-0.1,0.2-0.3,0.3-0.4c0.5-0.7,1.2-1,2.1-1.1c0.8-0.1,1.5,0,2.2,0.3c0.7,0.4,1.2,0.8,1.5,1.4c0.4,0.8,0.6,1.7,0.6,2.5 c0,1.8,0,3.6,0,5.4v0.1c-1.1,0-2.1,0-3.2,0c0-0.1,0-0.1,0-0.2c0-1.6,0-3.2,0-4.8c0-0.4,0-0.8-0.2-1.2c-0.2-0.7-0.8-1-1.6-1 c-0.8,0.1-1.3,0.5-1.6,1.2c-0.1,0.2-0.1,0.5-0.1,0.8c0,1.7,0,3.4,0,5.1c0,0.2,0,0.2-0.2,0.2c-1,0-1.9,0-2.9,0 C-296.1,401.6-296.2,401.6-296.2,401.6z" fill="#FFFFFF" id="XMLID_399_"></path> <path d="M-298,401.6L-298,401.6c-1.1,0-2.1,0-3,0c-0.1,0-0.1,0-0.1-0.1c0-3.1,0-6.1,0-9.2 c0-0.1,0-0.1,0.1-0.1c1,0,2,0,2.9,0h0.1C-298,395.3-298,398.5-298,401.6z" fill="#FFFFFF" id="XMLID_400_"></path> <path d="M-299.6,390.9c-0.7-0.1-1.2-0.3-1.6-0.8c-0.5-0.8-0.2-2.1,1-2.4c0.6-0.2,1.2-0.1,1.8,0.2 c0.5,0.4,0.7,0.9,0.6,1.5c-0.1,0.7-0.5,1.1-1.1,1.3C-299.1,390.8-299.4,390.8-299.6,390.9L-299.6,390.9z" fill="#FFFFFF" id="XMLID_401_"></path> </g> </svg> </span>
<span class="simplesocialtxt">Share</span> </button>
<button class="ssb_gplus-icon" data-href="https://plus.google.com/share?url=https://machinelearningmastery.com/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
<span class="icon"><svg class="ozWidgetRioButtonSvg_ ozWidgetRioButtonPlusOne_" height="18px" preserveaspectratio="xMidYMid meet" version="1.1" viewbox="-10 -6 60 36" width="30px" xmlns="http://www.w3.org/2000/svg"><path d="M30 7h-3v4h-4v3h4v4h3v-4h4v-3h-4V7z"></path><path d="M11 9.9v4h5.4C16 16.3 14 18 11 18c-3.3 0-5.9-2.8-5.9-6S7.7 6 11 6c1.5 0 2.8.5 3.8 1.5l2.9-2.9C15.9 3 13.7 2 11 2 5.5 2 1 6.5 1 12s4.5 10 10 10c5.8 0 9.6-4.1 9.6-9.8 0-.7-.1-1.5-.2-2.2H11z"></path></svg></span>
<span class="simplesocialtxt">Google Plus </span></button>
</div>
</section><!-- /.entry -->
<div class="fix"></div>
<aside id="post-author">
<div class="profile-image"><img alt="" class="avatar avatar-80 photo" height="80" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=80&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=160&amp;d=mm&amp;r=g 2x" width="80"/></div>
<div class="profile-content">
<h4>About Jason Brownlee</h4>
		Jason Brownlee, PhD is a machine learning specialist who teaches developers how to get results with modern machine learning methods via hands-on tutorials.				<div class="profile-link">
<a href="https://machinelearningmastery.com/author/jasonb/">
				View all posts by Jason Brownlee <span class="meta-nav">→</span> </a>
</div><!--#profile-link-->
</div>
<div class="fix"></div>
</aside>
<div class="post-utility"></div>
</article><!-- /.post -->
<div class="post-entries">
<div class="nav-prev fl"><a href="https://machinelearningmastery.com/how-to-develop-lstm-models-for-multi-step-time-series-forecasting-of-household-power-consumption/" rel="prev"><i class="fa fa-angle-left"></i> How to Develop LSTM Models for Multi-Step Time Series Forecasting of Household Power Consumption</a></div>
<div class="nav-next fr"><a href="https://machinelearningmastery.com/how-to-develop-baseline-forecasts-for-multi-site-multivariate-air-pollution-time-series-forecasting/" rel="next">How to Develop Baseline Forecasts for Multi-Site Multivariate Air Pollution Time Series Forecasting <i class="fa fa-angle-right"></i></a></div>
<div class="fix"></div>
</div>
<div id="comments"><h5 class="nocomments">No comments yet.</h5></div> <div class="comment-respond" id="respond">
<h3 class="comment-reply-title" id="reply-title">Leave a Reply <small><a href="/how-to-load-visualize-and-explore-a-complex-multivariate-multistep-time-series-forecasting-dataset/#respond" id="cancel-comment-reply-link" rel="nofollow" style="display:none;">Click here to cancel reply.</a></small></h3> <form action="https://machinelearningmastery.com/wp-comments-post.php?wpe-comment-post=mlmastery" class="comment-form" id="commentform" method="post">
<p class="comment-form-comment"><label class="hide" for="comment">Comment</label> <textarea cols="50" id="comment" maxlength="65525" name="comment" required="required" rows="10" tabindex="4"></textarea></p><p class="comment-form-author"><input aria-required="true" class="txt" id="author" name="author" size="30" tabindex="1" type="text" value=""/><label for="author">Name <span class="required">(required)</span></label> </p>
<p class="comment-form-email"><input aria-required="true" class="txt" id="email" name="email" size="30" tabindex="2" type="text" value=""/><label for="email">Email (will not be published) <span class="required">(required)</span></label> </p>
<p class="comment-form-url"><input class="txt" id="url" name="url" size="30" tabindex="3" type="text" value=""/><label for="url">Website</label></p>
<p class="form-submit"><input class="submit" id="submit" name="submit" type="submit" value="Submit Comment"/> <input id="comment_post_ID" name="comment_post_ID" type="hidden" value="6295"/>
<input id="comment_parent" name="comment_parent" type="hidden" value="0"/>
</p><p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" type="hidden" value="fa94593aab"/></p><p style="display: none;"><input id="ak_js" name="ak_js" type="hidden" value="120"/></p> </form>
</div><!-- #respond -->
</section><!-- /#main -->
<aside id="sidebar">
<div class="widget widget_woo_blogauthorinfo" id="woo_blogauthorinfo-2"><h3>Welcome to Machine Learning Mastery!</h3><span class="left"><img alt="" class="avatar avatar-100 photo" height="100" src="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=100&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1d75d46040c28497f0dee5d8e100db37?s=200&amp;d=mm&amp;r=g 2x" width="100"/></span>
<p>Hi, I'm Jason Brownlee, PhD
<br/>
I write tutorials to help developers (<i>like you</i>) get results with machine learning.</p>
<p><a href="/about">Read More</a></p>
<div class="fix"></div>
</div><div class="widget widget_text" id="text-51"> <div class="textwidget"><p></p><center><br/>
<strong>Deep Learning for Time Series</strong><br/>
Forecast the future with MLPs, CNNs, and LSTMs.
<p><a href="/deep-learning-for-time-series-forecasting/">Click to Get Started Now!</a><br/>
<a href="/deep-learning-for-time-series-forecasting/"><img src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/08/Cover-220.png"/></a><br/>
</p></center>
</div>
</div>
<div class="widget widget_woo_tabs" id="woo_tabs-2"> <div id="tabs">
<ul class="wooTabs">
<li class="popular"><a href="#tab-pop">Popular</a></li> </ul>
<div class="clear"></div>
<div class="boxes box inside">
<ul class="list" id="tab-pop">
<li>
<a href="https://machinelearningmastery.com/develop-neural-machine-translation-system-keras/" title="How to Develop a Neural Machine Translation System from Scratch"><img alt="How to Develop a Neural Machine Translation System in Keras" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/01/How-to-Develop-a-Neural-Machine-Translation-System-in-Keras-150x150.jpg" title="How to Develop a Neural Machine Translation System from Scratch" width="45"/></a> <a href="https://machinelearningmastery.com/develop-neural-machine-translation-system-keras/" title="How to Develop a Neural Machine Translation System from Scratch">How to Develop a Neural Machine Translation System from Scratch</a>
<span class="meta">January 10, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/classification-versus-regression-in-machine-learning/" title="Difference Between Classification and Regression in Machine Learning"><img alt="Difference Between Classification and Regression in Machine Learning" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2017/12/Difference-Between-Classification-and-Regression-in-Machine-Learning-150x150.jpg" title="Difference Between Classification and Regression in Machine Learning" width="45"/></a> <a href="https://machinelearningmastery.com/classification-versus-regression-in-machine-learning/" title="Difference Between Classification and Regression in Machine Learning">Difference Between Classification and Regression in Machine Learning</a>
<span class="meta">December 11, 2017</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/working-machine-learning-problem/" title="So, You are Working on a Machine Learning Problem..."><img alt="So, You are Working on a Machine Learning Problem..." class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/04/So-You-are-Working-on-a-Machine-Learning-Problem...-150x150.jpg" title="So, You are Working on a Machine Learning Problem..." width="45"/></a> <a href="https://machinelearningmastery.com/working-machine-learning-problem/" title="So, You are Working on a Machine Learning Problem…">So, You are Working on a Machine Learning Problem…</a>
<span class="meta">April 4, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/develop-n-gram-multichannel-convolutional-neural-network-sentiment-analysis/" title="How to Develop an N-gram Multichannel Convolutional Neural Network for Sentiment Analysis"><img alt="Plot of the Multichannel Convolutional Neural Network For Text" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2017/10/Plot-of-the-Multichannel-Convolutional-Neural-Network-For-Text-150x150.png" title="How to Develop an N-gram Multichannel Convolutional Neural Network for Sentiment Analysis" width="45"/></a> <a href="https://machinelearningmastery.com/develop-n-gram-multichannel-convolutional-neural-network-sentiment-analysis/" title="How to Develop an N-gram Multichannel Convolutional Neural Network for Sentiment Analysis">How to Develop an N-gram Multichannel Convolutional Neural Network for Sentiment Analysis</a>
<span class="meta">January 12, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/how-to-make-classification-and-regression-predictions-for-deep-learning-models-in-keras/" title="How to Make Predictions with Keras"><img alt="How to Make Classification and Regression Predictions for Deep Learning Models in Keras" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/04/How-to-Make-Classification-and-Regression-Predictions-for-Deep-Learning-Models-in-Keras-150x150.jpg" title="How to Make Predictions with Keras" width="45"/></a> <a href="https://machinelearningmastery.com/how-to-make-classification-and-regression-predictions-for-deep-learning-models-in-keras/" title="How to Make Predictions with Keras">How to Make Predictions with Keras</a>
<span class="meta">April 9, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" title="11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)"><img alt="11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2018/08/11-Classical-Time-Series-Forecasting-Methods-in-Python-Cheat-Sheet-150x150.jpg" title="11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)" width="45"/></a> <a href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" title="11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)">11 Classical Time Series Forecasting Methods in Python (Cheat Sheet)</a>
<span class="meta">August 6, 2018</span>
<div class="fix"></div>
</li>
<li>
<a href="https://machinelearningmastery.com/visualize-deep-learning-neural-network-model-keras/" title="How to Visualize a Deep Learning Neural Network Model in Keras"><img alt="How to Visualize a Deep Learning Neural Network Model in Keras" class="thumbnail wp-post-image" height="45" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/uploads/2017/12/How-to-Visualize-a-Deep-Learning-Neural-Network-Model-in-Keras-150x150.jpg" title="How to Visualize a Deep Learning Neural Network Model in Keras" width="45"/></a> <a href="https://machinelearningmastery.com/visualize-deep-learning-neural-network-model-keras/" title="How to Visualize a Deep Learning Neural Network Model in Keras">How to Visualize a Deep Learning Neural Network Model in Keras</a>
<span class="meta">December 13, 2017</span>
<div class="fix"></div>
</li>
</ul>
</div><!-- /.boxes -->
</div><!-- /wooTabs -->
</div> <div class="widget_text widget widget_custom_html" id="custom_html-2"><h3>You might also like…</h3><div class="textwidget custom-html-widget"><ul>
<li><a href="/setup-python-environment-machine-learning-deep-learning-anaconda/">How to Install Python for Machine Learning</a></li>
<li><a href="/machine-learning-in-python-step-by-step/">Your First Machine Learning Project in Python</a></li>
<li><a href="/tutorial-first-neural-network-python-keras/">Your First Neural Network in Python</a></li>
<li><a href="/how-to-run-your-first-classifier-in-weka/">Your First Classifier in Weka</a></li>
<li><a href="/arima-for-time-series-forecasting-with-python/">Your First Time Series Forecasting Project</a></li>
</ul></div></div></aside><!-- /#sidebar -->
</div><!-- /#main-sidebar-container -->
</div><!-- /#content -->
<footer class="col-full" id="footer">
<div class="col-left" id="copyright">
<p>© 2018 Machine Learning Mastery. All Rights Reserved. </p> </div>
<div class="col-right" id="credit">
<p></p><p>
<a href="/privacy/">Privacy</a> | 
<a href="/disclaimer/">Disclaimer</a> | 
<a href="/terms-of-service/">Terms</a> | 
<a href="/contact/">Contact</a>
</p> </div>
</footer>
</div><!-- /#inner-wrapper -->
</div><!-- /#wrapper -->
<div class="fix"></div><!--/.fix-->
<!-- Drip -->
<script type="text/javascript">
  var _dcq = _dcq || [];
  var _dcs = _dcs || {};
  _dcs.account = '9556588';

  (function() {
    var dc = document.createElement('script');
    dc.type = 'text/javascript'; dc.async = true;
    dc.src = '//tag.getdrip.com/9556588.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(dc, s);
  })();
</script>
<!-- end Drip --><!-- Woo Tabs Widget -->
<script type="text/javascript">
jQuery(document).ready(function(){
	// UL = .wooTabs
	// Tab contents = .inside

	var tag_cloud_class = '#tagcloud';

	//Fix for tag clouds - unexpected height before .hide()
	var tag_cloud_height = jQuery( '#tagcloud').height();

	jQuery( '.inside ul li:last-child').css( 'border-bottom','0px' ); // remove last border-bottom from list in tab content
	jQuery( '.wooTabs').each(function(){
		jQuery(this).children( 'li').children( 'a:first').addClass( 'selected' ); // Add .selected class to first tab on load
	});
	jQuery( '.inside > *').hide();
	jQuery( '.inside > *:first-child').show();

	jQuery( '.wooTabs li a').click(function(evt){ // Init Click funtion on Tabs

		var clicked_tab_ref = jQuery(this).attr( 'href' ); // Strore Href value

		jQuery(this).parent().parent().children( 'li').children( 'a').removeClass( 'selected' ); //Remove selected from all tabs
		jQuery(this).addClass( 'selected' );
		jQuery(this).parent().parent().parent().children( '.inside').children( '*').hide();

		jQuery( '.inside ' + clicked_tab_ref).fadeIn(500);

		 evt.preventDefault();

	})
})
</script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/js/comment-reply.min.js?ver=4.9.8" type="text/javascript"></script>
<script type="text/javascript">
/* <![CDATA[ */
var wpcf7 = {"apiSettings":{"root":"https:\/\/machinelearningmastery.com\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"},"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}},"cached":"1"};
/* ]]> */
</script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=5.0.5" type="text/javascript"></script>
<script src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-includes/js/wp-embed.min.js?ver=4.9.8" type="text/javascript"></script>
<script async="async" src="https://3qeqpr26caki16dnhd19sv6by6v-wpengine.netdna-ssl.com/wp-content/plugins/akismet/_inc/form.js?ver=4.1" type="text/javascript"></script>
</body>
</html>